# 2021年05月07日 code
<a href="https://toutiao.io/k/nkx9rki">我认为最优美的数据结构</a><br /><a href="https://toutiao.io/k/ss8h91v">架构师必看：架构设计的四大思维支柱</a><br /><a href="https://toutiao.io/k/cu1u6b9">有了 CopyOnWrite 为何又要有 ReadWriteLock？</a><br /><a href="https://toutiao.io/k/d4ymrr1">Go 语言中常见的几种反模式</a><br /><a href="https://toutiao.io/k/dg28m1s">Spring 拦截器流程及多个拦截器的顺序</a><br /><a href="https://toutiao.io/k/bypqv6b">JavaScript 中到底要不要加分号？</a><br /><a href="https://toutiao.io/k/c59eddx">长尾延迟问题的一些解决思路</a><br /><a href="https://toutiao.io/k/zu91kh4">GitHub 标星 8k：在 PC 上玩 Switch</a><br /><a href="https://toutiao.io/k/fg52hbx">把你的 IDE 搬进浏览器里：JetBrains Projector 初体验</a><br /><a href="https://toutiao.io/k/hf4zo9r">写了个简洁的 Markdown 简历模板</a><br /><a href="https://toutiao.io/k/kximdd7">记一次 .NET 某教育系统异常崩溃分析</a><br /><a href="https://toutiao.io/k/ur8vd2p">2021 年低代码发展预测解读 (Mendix)</a><br /><a href="https://toutiao.io/k/1n31apj">AndroidSyscallLogger</a><br /><a href="https://toutiao.io/k/xna3lx9">.NET 中安全高效跨平台的模板引擎 Fluid 使用文档</a><br /><a href="https://toutiao.io/k/yct2gs5">Python数据分析：股票成交量与收盘价时间序列可视化分析</a><br /><a href="https://toutiao.io/k/6z3uu2m">[推荐] 如何设计一个高性能的秒杀系统</a><br /><a href="https://toutiao.io/k/lvyzxo8">[推荐] 图解 Kafka</a><br /><a href="https://toutiao.io/k/iwkig90">[推荐] 殷浩详解 DDD：如何避免写流水账代码？</a><br /><a href="https://toutiao.io/k/08uadl6">[推荐] 书单丨“1 本抵 10 本” 的好书，建议收藏</a><br /><a href="https://toutiao.io/k/xdsox3x">[推荐] 撸代码前，写下设计方案</a><br /><a href="https://toutiao.io/k/1nwsx5k">[推荐] 万级并发：电商库存扣减如何设计？不超卖</a><br /><a href="https://toutiao.io/k/a5s1rfh">[推荐] 前端哪需要自己设计页面？用现成的不就好了</a><br /><a href="https://toutiao.io/k/0iue4f4">[推荐] 2.7w 字！Java 基础面试题/知识点总结（2021 最新版）</a><br /><a href="https://toutiao.io/k/upefap5">[推荐] 程序员应该掌握的常用网络问题定位工具</a><br /><a href="https://toutiao.io/k/90vs9kg">[推荐] ClickHouse 在 Bilibili 用户行为分析的实践</a><br /><a href="https://toutiao.io/k/2aonyjp">[推荐] 把 Redis 当作队列来用，真的合适吗？</a><br /><a href="https://toutiao.io/k/0etokja">[推荐] Kafka：这次分享我只想把原理讲清楚</a><br /><a href="https://toutiao.io/k/nrdp4oq">[推荐] 用户画像的基础、原理、方法论（模型）和应用</a><br /><a href="https://toutiao.io/k/6mzds1m">[推荐] 系统设计之路：如何设计一个 URL 短链服务</a><br /><hr /><a href="https://github.com/abuanwar072/Flutter-Responsive-Admin-Panel-or-Dashboard">Responsive Admin Panel or Dashboard using Flutter</a><br /><a href="https://github.com/pallupz/covid-vaccine-booking">This very basic script can be used to automate COVID-19 vaccination slot booking on India's Co-WIN Platform.</a><br /><a href="https://github.com/goharbor/harbor">An open source trusted cloud native registry project that stores, signs, and scans content.</a><br /><a href="https://github.com/public-apis/public-apis">A collective list of free APIs</a><br /><a href="https://github.com/jwasham/coding-interview-university">A complete computer science study plan to become a software engineer.</a><br /><a href="https://github.com/DIGITALCRIMINAL/OnlyFans">Scrape all the media from an OnlyFans account - Updated regularly</a><br /><a href="https://github.com/facebookincubator/cinder">Instagram's performance oriented fork of CPython.</a><br /><a href="https://github.com/vinta/awesome-python">A curated list of awesome Python frameworks, libraries, software and resources</a><br /><a href="https://github.com/jlevy/the-art-of-command-line">Master the command line, in one page</a><br /><a href="https://github.com/dogecoin/dogecoin">very currency</a><br /><a href="https://github.com/phamdinhkhanh/vnquant">VietNam Data Stock Market Price</a><br /><a href="https://github.com/audacity/audacity">Audio Editor</a><br /><a href="https://github.com/Uniswap/uniswap-v3-periphery">🦄 🦄 🦄 Peripheral smart contracts for interacting with Uniswap v3</a><br /><a href="https://github.com/swar/Swar-Chia-Plot-Manager">This is a Cross-Platform Plot Manager for Chia Plotting that is simple, easy-to-use, and reliable.</a><br /><a href="https://github.com/flutter/flutter">Flutter makes it easy and fast to build beautiful apps for mobile and beyond.</a><br /><a href="https://github.com/login?return_to=%2Fstreamich%2Freact-use">React Hooks — 👍</a><br /><a href="https://github.com/dynamicwebpaige/thinking-in-data">A VS Code extension pack to help users visualize, understand, and interact with data.</a><br /><a href="https://github.com/forem/forem">For empowering community 🌱</a><br /><a href="https://github.com/Azure/counterfit">a CLI that provides a generic automation layer for assessing the security of ML models</a><br /><a href="https://github.com/Uniswap/uniswap-v3-core">🦄 🦄 🦄 Core smart contracts of Uniswap v3</a><br /><a href="https://github.com/ionic-team/ionic-framework">A powerful cross-platform UI toolkit for building native-quality iOS, Android, and Progressive Web Apps with HTML, CSS, and JavaScript.</a><br /><a href="https://github.com/thedevdojo/wave">Wave - The Software as a Service Starter Kit, designed to help you build the SAAS of your dreams 🚀 💰</a><br /><a href="https://github.com/devsuperior/sds3"></a><br /><a href="https://github.com/angular/angular-cli">CLI tool for Angular</a><br /><a href="https://github.com/benawad/dogehouse">Taking voice conversations to the moon 🚀</a><br /><hr />数组异或操作<br /><p>给你两个整数，<code>n</code> 和 <code>start</code> 。</p>

<p>数组 <code>nums</code> 定义为：<code>nums[i] = start + 2*i</code>（下标从 0 开始）且 <code>n == nums.length</code> 。</p>

<p>请返回 <code>nums</code> 中所有元素按位异或（<strong>XOR</strong>）后得到的结果。</p>

<p>&nbsp;</p>

<p><strong>示例 1：</strong></p>

<pre><strong>输入：</strong>n = 5, start = 0
<strong>输出：</strong>8
<strong>解释：</strong>数组 nums 为 [0, 2, 4, 6, 8]，其中 (0 ^ 2 ^ 4 ^ 6 ^ 8) = 8 。
     &quot;^&quot; 为按位异或 XOR 运算符。
</pre>

<p><strong>示例 2：</strong></p>

<pre><strong>输入：</strong>n = 4, start = 3
<strong>输出：</strong>8
<strong>解释：</strong>数组 nums 为 [3, 5, 7, 9]，其中 (3 ^ 5 ^ 7 ^ 9) = 8.</pre>

<p><strong>示例 3：</strong></p>

<pre><strong>输入：</strong>n = 1, start = 7
<strong>输出：</strong>7
</pre>

<p><strong>示例 4：</strong></p>

<pre><strong>输入：</strong>n = 10, start = 5
<strong>输出：</strong>2
</pre>

<p>&nbsp;</p>

<p><strong>提示：</strong></p>

<ul>
	<li><code>1 &lt;= n &lt;= 1000</code></li>
	<li><code>0 &lt;= start &lt;= 1000</code></li>
	<li><code>n == nums.length</code></li>
</ul>
<br />#### 方法一：模拟

**思路**

按照题意模拟即可：

1. 初始化 $\textit{ans} = 0$；
2. 遍历区间 $[0, n - 1]$ 中的每一个整数 $i$，令 $\textit{ans}$ 与每一个 $\textit{start} + 2 \times i$ 做异或运算；
3. 最终返回 $\textit{ans}$，即我们需要的答案。

**代码**

```C++ [sol1-C++]
class Solution {
public:
    int xorOperation(int n, int start) {
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            ans ^= (start + i * 2);
        }
        return ans;
    }
};
```

```Java [sol1-Java]
class Solution {
    public int xorOperation(int n, int start) {
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            ans ^= (start + i * 2);
        }
        return ans;
    }
}
```

```C# [sol1-C#]
public class Solution {
    public int XorOperation(int n, int start) {
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            ans ^= (start + i * 2);
        }
        return ans;
    }
}
```

```Python [sol1-Python3]
class Solution:
    def xorOperation(self, n: int, start: int) -> int:
        ans = 0
        for i in range(n):
            ans ^= (start + i * 2)
        return ans
```

```JavaScript [sol1-JavaScript]
var xorOperation = function(n, start) {
    let ans = 0;
    for (let i = 0; i < n; ++i) {
        ans ^= (start + i * 2);
    }
    return ans;
};
```

```go [sol1-Golang]
func xorOperation(n, start int) (ans int) {
    for i := 0; i < n; i++ {
        ans ^= start + i*2
    }
    return
}
```

```C [sol1-C]
int xorOperation(int n, int start) {
    int ans = 0;
    for (int i = 0; i < n; ++i) {
        ans ^= (start + i * 2);
    }
    return ans;
}
```

**复杂度分析**

- 时间复杂度：$O(n)$。这里用一重循环对 $n$ 个数字进行异或。

- 空间复杂度：$O(1)$。这里只是用了常量级别的辅助空间。

#### 方法二：数学

记 $\oplus$ 为异或运算，异或运算满足以下性质：

1. $x \oplus x = 0$；
2. $x \oplus y = y \oplus x$（交换律）；
3. $(x \oplus y) \oplus z = x \oplus (y \oplus z)$（结合律）；
4. $x \oplus y \oplus y = x$（自反性）；
5. $\forall i \in Z$，有 $4i \oplus (4i+1) \oplus (4i+2) \oplus (4i+3) = 0$。

在本题中，我们需要计算 $\textit{start} \oplus (\textit{start}+2i) \oplus (\textit{start}+4i) \oplus \dots \oplus (\textit{start}+2(n-1))$。

观察公式可以知道，这些数的奇偶性质相同，因此它们的二进制表示中的最低位或者均为 $1$，或者均为 $0$。于是我们可以把参与运算的数的二进制位的最低位提取出来单独处理。当且仅当 $\textit{start}$ 为奇数，且 $n$ 也为奇数时，结果的二进制位的最低位才为 $1$。

此时我们可以将公式转化为 $(s \oplus (s+1) \oplus (s+2) \oplus \dots \oplus (s+n-1))\times 2 + e$，其中 $s=\lfloor \frac{\textit{start}}{2} \rfloor$，$e$ 表示运算结果的最低位。即我们单独处理最低位，而舍去最低位后的数列恰成为一串连续的整数。

这样我们可以描述一个函数 $\text{sumXor}(x)$，表示 $0 \oplus 1 \oplus 2 \oplus \dots \oplus x$。利用异或运算的性质 $5$，我们可以将计算该函数的复杂度降低到 $O(1)$，因为以 $4i$ 为开头的连续四个整数异或的结果为 $0$，所以 $\text{sumXor}(x)$ 可以被表示为：

$$
\text{sumXor}(x)=
\begin{cases}
x,& x=4k,k\in Z\\
(x-1) \oplus x,& x=4k+1,k\in Z\\
(x-2) \oplus (x-1) \oplus x,& x=4k+2,k\in Z\\
(x-3) \oplus (x-2) \oplus (x-1) \oplus x,& x=4k+3,k\in Z\\
\end{cases}
$$

我们可以进一步化简该式：

$$
\text{sumXor}(x)=
\begin{cases}
x,& x=4k,k\in Z\\
1,& x=4k+1,k\in Z\\
x+1,& x=4k+2,k\in Z\\
0,& x=4k+3,k\in Z\\
\end{cases}
$$

这样最后的结果即可表示为 $(\text{sumXor}(s-1) \oplus \text{sumXor}(s+n-1))\times 2 + e$。

**代码**

```C++ [sol2-C++]
class Solution {
public:
    int sumXor(int x) {
        if (x % 4 == 0) {
            return x;
        }
        if (x % 4 == 1) {
            return 1;
        }
        if (x % 4 == 2) {
            return x + 1;
        }
        return 0;
    }

    int xorOperation(int n, int start) {
        int s = start >> 1, e = n & start & 1;
        int ret = sumXor(s - 1) ^ sumXor(s + n - 1);
        return ret << 1 | e;
    }
};
```

```Java [sol2-Java]
class Solution {
    public int xorOperation(int n, int start) {
        int s = start >> 1, e = n & start & 1;
        int ret = sumXor(s - 1) ^ sumXor(s + n - 1);
        return ret << 1 | e;
    }

    public int sumXor(int x) {
        if (x % 4 == 0) {
            return x;
        }
        if (x % 4 == 1) {
            return 1;
        }
        if (x % 4 == 2) {
            return x + 1;
        }
        return 0;
    }
}
```

```C# [sol2-C#]
public class Solution {
    public int XorOperation(int n, int start) {
        int s = start >> 1, e = n & start & 1;
        int ret = SumXor(s - 1) ^ SumXor(s + n - 1);
        return ret << 1 | e;
    }

    public int SumXor(int x) {
        if (x % 4 == 0) {
            return x;
        }
        if (x % 4 == 1) {
            return 1;
        }
        if (x % 4 == 2) {
            return x + 1;
        }
        return 0;
    }
}
```

```JavaScript [sol2-JavaScript]
var xorOperation = function(n, start) {
    let s = start >> 1, e = n & start & 1;
    let ret = sumXor(s - 1) ^ sumXor(s + n - 1);
    return ret << 1 | e;
};

const sumXor = (x) => {
    if (x % 4 === 0) {
        return x;
    }
    if (x % 4 === 1) {
        return 1;
    }
    if (x % 4 === 2) {
        return x + 1;
    }
    return 0;
}
```

```go [sol2-Golang]
func sumXor(x int) int {
    switch x % 4 {
    case 0:
        return x
    case 1:
        return 1
    case 2:
        return x + 1
    default:
        return 0
    }
}

func xorOperation(n, start int) (ans int) {
    s, e := start>>1, n&start&1
    ret := sumXor(s-1) ^ sumXor(s+n-1)
    return ret<<1 | e
}
```

```C [sol2-C]
int sumXor(int x) {
    if (x % 4 == 0) {
        return x;
    }
    if (x % 4 == 1) {
        return 1;
    }
    if (x % 4 == 2) {
        return x + 1;
    }
    return 0;
}

int xorOperation(int n, int start) {
    int s = start >> 1, e = n & start & 1;
    int ret = sumXor(s - 1) ^ sumXor(s + n - 1);
    return ret << 1 | e;
}
```

**复杂度分析**

- 时间复杂度：$O(1)$。我们只需要常数的时间计算出结果。

- 空间复杂度：$O(1)$。我们只需要常数的空间保存若干变量。