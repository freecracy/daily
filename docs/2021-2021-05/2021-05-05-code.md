# 2021å¹´05æœˆ05æ—¥ code
<a href="https://toutiao.io/k/ok4mp6n">äº”ä¸€å‡æœŸä¸æƒ³äººæŒ¤äººï¼Ÿæ¥è¿™é‡Œï¼</a><br /><a href="https://toutiao.io/k/0jalngx">WebRTC å™ªå£°æŠ‘åˆ¶æ¨¡å—åˆ†æä¸å®è·µ</a><br /><a href="https://toutiao.io/k/veymhfk">ä¸€ä¸ªæ–°ç»†èŠ‚ï¼ŒGo 1.17 å°†å…è®¸åˆ‡ç‰‡è½¬æ¢ä¸ºæ•°ç»„æŒ‡é’ˆ</a><br /><a href="https://toutiao.io/k/3zyt2c7">æ—¥è®¿é—®è¿‡äº¿ï¼ŒåŠå…¬ IM åŠå¼€æ”¾å¼å¹³å°åœ¨æºç¨‹çš„å®è·µ</a><br /><a href="https://toutiao.io/k/e7r8hkj">Docker å®æˆ˜ï¼šç”¨ docker-compose æ­å»º Laravel å¼€å‘ç¯å¢ƒ</a><br /><a href="https://toutiao.io/k/b5bv4dl">ç‰¹å¾å·¥ç¨‹æ–¹æ³•æ€»ç»“</a><br /><a href="https://toutiao.io/k/4wrlkf7">èŠèŠå› ä¸æ°å½“ä½¿ç”¨ alibaba sentinel è€Œè¸©åˆ°çš„å‘</a><br /><a href="https://toutiao.io/k/4hok6wf">ææ‡‚ JavaScript ç±»å‹è½¬æ¢</a><br /><a href="https://toutiao.io/k/6x3rb9r">èŠå¤©æœºå™¨äººçœŸä¸æ˜¯äººï¼Œæˆ‘æ”¾å¿ƒäº†ï¼Œä¸ç”¨æ‹…å¿ƒéšç§æš´éœ²</a><br /><a href="https://toutiao.io/k/7fuz48b">MCN æ­é…è¯„ä»·æ¨¡å‹è®ºæ–‡ç¬”è®°</a><br /><a href="https://toutiao.io/k/nrdp4oq">[æ¨è] ç”¨æˆ·ç”»åƒçš„åŸºç¡€ã€åŸç†ã€æ–¹æ³•è®ºï¼ˆæ¨¡å‹ï¼‰å’Œåº”ç”¨</a><br /><a href="https://toutiao.io/k/90vs9kg">[æ¨è] ClickHouse åœ¨ Bilibili ç”¨æˆ·è¡Œä¸ºåˆ†æçš„å®è·µ</a><br /><a href="https://toutiao.io/k/a5s1rfh">[æ¨è] å‰ç«¯å“ªéœ€è¦è‡ªå·±è®¾è®¡é¡µé¢ï¼Ÿç”¨ç°æˆçš„ä¸å°±å¥½äº†</a><br /><a href="https://toutiao.io/k/iwkig90">[æ¨è] æ®·æµ©è¯¦è§£ DDDï¼šå¦‚ä½•é¿å…å†™æµæ°´è´¦ä»£ç ï¼Ÿ</a><br /><a href="https://toutiao.io/k/1nwsx5k">[æ¨è] ä¸‡çº§å¹¶å‘ï¼šç”µå•†åº“å­˜æ‰£å‡å¦‚ä½•è®¾è®¡ï¼Ÿä¸è¶…å–</a><br /><a href="https://toutiao.io/k/wxrneux">[æ¨è] ä¸ºä»€ä¹ˆæ”¾å¼ƒ Kafkaï¼Œé€‰æ‹© Pulsar?</a><br /><a href="https://toutiao.io/k/0iue4f4">[æ¨è] 2.7w å­—ï¼Java åŸºç¡€é¢è¯•é¢˜/çŸ¥è¯†ç‚¹æ€»ç»“ï¼ˆ2021 æœ€æ–°ç‰ˆï¼‰</a><br /><a href="https://toutiao.io/k/2aonyjp">[æ¨è] æŠŠ Redis å½“ä½œé˜Ÿåˆ—æ¥ç”¨ï¼ŒçœŸçš„åˆé€‚å—ï¼Ÿ</a><br /><a href="https://toutiao.io/k/ti0gb8i">[æ¨è] Redis è¿›é˜¶ç¬”è®°</a><br /><a href="https://toutiao.io/k/upefap5">[æ¨è] ç¨‹åºå‘˜åº”è¯¥æŒæ¡çš„å¸¸ç”¨ç½‘ç»œé—®é¢˜å®šä½å·¥å…·</a><br /><a href="https://toutiao.io/k/6z3uu2m">[æ¨è] å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜æ€§èƒ½çš„ç§’æ€ç³»ç»Ÿ</a><br /><a href="https://toutiao.io/k/xkhaihd">[æ¨è] åç¨‹åˆ‡æ¢ä¼šå¼•èµ·ä»€ä¹ˆé—®é¢˜</a><br /><a href="https://toutiao.io/k/fwtxydd">[æ¨è] æ¶æ„æ¨¡å¼ä¹‹åˆ†å±‚æ¶æ„æ€»ç»“</a><br /><a href="https://toutiao.io/k/08uadl6">[æ¨è] ä¹¦å•ä¸¨â€œ1 æœ¬æŠµ 10 æœ¬â€ çš„å¥½ä¹¦ï¼Œå»ºè®®æ”¶è—</a><br /><a href="https://toutiao.io/k/0etokja">[æ¨è] Kafkaï¼šè¿™æ¬¡åˆ†äº«æˆ‘åªæƒ³æŠŠåŸç†è®²æ¸…æ¥š</a><br /><hr /><a href="https://github.com/kartikey54/VaccineAvailabilityNotifier"></a><br /><a href="https://github.com/kelseyhightower/kubernetes-the-hard-way">Bootstrap Kubernetes the hard way on Google Cloud Platform. No scripts.</a><br /><a href="https://github.com/DIGITALCRIMINAL/OnlyFans">Scrape all the media from an OnlyFans account - Updated regularly</a><br /><a href="https://github.com/facebookresearch/dino">PyTorch code for Vision Transformers training with the Self-Supervised learning method DINO</a><br /><a href="https://github.com/github/docs">The open-source repo for docs.github.com</a><br /><a href="https://github.com/bhattbhavesh91/cowin-vaccination-slot-availability">Script to check the available slots for Covid-19 Vaccination Centers from CoWIN API in India</a><br /><a href="https://github.com/flashlight/flashlight">A C++ standalone library for machine learning</a><br /><a href="https://github.com/thedevdojo/wave">Wave - The Software as a Service Starter Kit, designed to help you build the SAAS of your dreams ğŸš€ ğŸ’°</a><br /><a href="https://github.com/tldr-pages/tldr">ğŸ“š Collaborative cheatsheets for console commands</a><br /><a href="https://github.com/pballett/whatfreewords"></a><br /><a href="https://github.com/TheAlgorithms/Javascript">A repository for All algorithms implemented in Javascript (for educational purposes only)</a><br /><a href="https://github.com/dogecoin/dogecoin">very currency</a><br /><a href="https://github.com/nvbn/thefuck">Magnificent app which corrects your previous console command.</a><br /><a href="https://github.com/commaai/openpilot">openpilot is an open source driver assistance system. openpilot performs the functions of Automated Lane Centering and Adaptive Cruise Control for over 100 supported car makes and models.</a><br /><a href="https://github.com/labnol/covid19-vaccine-tracker">Covid-19 Vaccines Near me</a><br /><a href="https://github.com/vfat-tools/vfat-tools"></a><br /><a href="https://github.com/hsjoberg/fork-explorer">Check how a BIP9-like softfork signalling goes</a><br /><a href="https://github.com/jlevy/the-art-of-command-line">Master the command line, in one page</a><br /><a href="https://github.com/torvalds/linux">Linux kernel source tree</a><br /><a href="https://github.com/git-tips/tips">Most commonly used git tips and tricks.</a><br /><a href="https://github.com/login?return_to=%2Falecthomas%2Fchroma">A general purpose syntax highlighter in pure Go</a><br /><a href="https://github.com/aws-amplify/amplify-cli">The AWS Amplify CLI is a toolchain for simplifying serverless web and mobile development.</a><br /><a href="https://github.com/ethereum/solidity">Solidity, the Smart Contract Programming Language</a><br /><a href="https://github.com/projectdiscovery/interactsh">An OOB interaction gathering server and client library</a><br /><a href="https://github.com/ionic-team/ionic-framework">A powerful cross-platform UI toolkit for building native-quality iOS, Android, and Progressive Web Apps with HTML, CSS, and JavaScript.</a><br /><hr />åˆ é™¤å¹¶è·å¾—ç‚¹æ•°<br /><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â <code>nums</code>Â ï¼Œä½ å¯ä»¥å¯¹å®ƒè¿›è¡Œä¸€äº›æ“ä½œã€‚</p>

<p>æ¯æ¬¡æ“ä½œä¸­ï¼Œé€‰æ‹©ä»»æ„ä¸€ä¸ªÂ <code>nums[i]</code>Â ï¼Œåˆ é™¤å®ƒå¹¶è·å¾—Â <code>nums[i]</code>Â çš„ç‚¹æ•°ã€‚ä¹‹åï¼Œä½ å¿…é¡»åˆ é™¤<strong>æ¯ä¸ª</strong>ç­‰äºÂ <code>nums[i] - 1</code>Â æˆ–Â <code>nums[i] + 1</code>Â çš„å…ƒç´ ã€‚</p>

<p>å¼€å§‹ä½ æ‹¥æœ‰ <code>0</code> ä¸ªç‚¹æ•°ã€‚è¿”å›ä½ èƒ½é€šè¿‡è¿™äº›æ“ä½œè·å¾—çš„æœ€å¤§ç‚¹æ•°ã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [3,4,2]
<strong>è¾“å‡ºï¼š</strong>6
<strong>è§£é‡Šï¼š</strong>
åˆ é™¤ 4 è·å¾— 4 ä¸ªç‚¹æ•°ï¼Œå› æ­¤ 3 ä¹Ÿè¢«åˆ é™¤ã€‚
ä¹‹åï¼Œåˆ é™¤ 2 è·å¾— 2 ä¸ªç‚¹æ•°ã€‚æ€»å…±è·å¾— 6 ä¸ªç‚¹æ•°ã€‚
</pre>

<p><strong>ç¤ºä¾‹Â 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [2,2,3,3,3,4]
<strong>è¾“å‡ºï¼š</strong>9
<strong>è§£é‡Šï¼š</strong>
åˆ é™¤ 3 è·å¾— 3 ä¸ªç‚¹æ•°ï¼Œæ¥ç€è¦åˆ é™¤ä¸¤ä¸ª 2 å’Œ 4 ã€‚
ä¹‹åï¼Œå†æ¬¡åˆ é™¤ 3 è·å¾— 3 ä¸ªç‚¹æ•°ï¼Œå†æ¬¡åˆ é™¤ 3 è·å¾— 3 ä¸ªç‚¹æ•°ã€‚
æ€»å…±è·å¾— 9 ä¸ªç‚¹æ•°ã€‚
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 <= nums.length <= 2 * 10<sup>4</sup></code></li>
	<li><code>1 <= nums[i] <= 10<sup>4</sup></code></li>
</ul>
<br />#### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’

**æ€è·¯**

æ ¹æ®é¢˜æ„ï¼Œåœ¨é€‰æ‹©äº†å…ƒç´  $x$ åï¼Œè¯¥å…ƒç´ ä»¥åŠæ‰€æœ‰ç­‰äº $x-1$ æˆ– $x+1$ çš„å…ƒç´ ä¼šä»æ•°ç»„ä¸­åˆ å»ã€‚è‹¥è¿˜æœ‰å¤šä¸ªå€¼ä¸º $x$ çš„å…ƒç´ ï¼Œç”±äºæ‰€æœ‰ç­‰äº $x-1$ æˆ– $x+1$ çš„å…ƒç´ å·²ç»è¢«åˆ é™¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ é™¤ $x$ å¹¶è·å¾—å…¶ç‚¹æ•°ã€‚å› æ­¤è‹¥é€‰æ‹©äº† $x$ï¼Œæ‰€æœ‰ç­‰äº $x$ çš„å…ƒç´ ä¹Ÿåº”ä¸€åŒè¢«é€‰æ‹©ï¼Œä»¥å°½å¯èƒ½å¤šåœ°è·å¾—ç‚¹æ•°ã€‚

è®°å…ƒç´  $x$ åœ¨æ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°ä¸º $c_x$ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„ $sum$ è®°å½•æ•°ç»„ $\textit{nums}$ ä¸­æ‰€æœ‰ç›¸åŒå…ƒç´ ä¹‹å’Œï¼Œå³ $\textit{sum}[x]=x\cdot c_x$ã€‚è‹¥é€‰æ‹©äº† $x$ï¼Œåˆ™å¯ä»¥è·å– $\textit{sum}[x]$ çš„ç‚¹æ•°ï¼Œä¸”æ— æ³•å†é€‰æ‹© $x-1$ å’Œ $x+1$ã€‚è¿™ä¸ã€Œ[198. æ‰“å®¶åŠ«èˆ](https://leetcode-cn.com/problems/house-robber/)ã€æ˜¯ä¸€æ ·çš„ï¼Œåœ¨ç»Ÿè®¡å‡º $\textit{sum}$ æ•°ç»„åï¼Œè¯»è€…å¯å‚è€ƒã€Œ[198. æ‰“å®¶åŠ«èˆçš„å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/house-robber/solution/da-jia-jie-she-by-leetcode-solution/)ã€ä¸­çš„åŠ¨æ€è§„åˆ’è¿‡ç¨‹è®¡ç®—å‡ºç­”æ¡ˆã€‚

**ä»£ç **

```C++ [sol1-C++]
class Solution {
private:
    int rob(vector<int> &nums) {
        int size = nums.size();
        int first = nums[0], second = max(nums[0], nums[1]);
        for (int i = 2; i < size; i++) {
            int temp = second;
            second = max(first + nums[i], second);
            first = temp;
        }
        return second;
    }

public:
    int deleteAndEarn(vector<int> &nums) {
        int maxVal = 0;
        for (int val : nums) {
            maxVal = max(maxVal, val);
        }
        vector<int> sum(maxVal + 1);
        for (int val : nums) {
            sum[val] += val;
        }
        return rob(sum);
    }
};
```

```Java [sol1-Java]
class Solution {
    public int deleteAndEarn(int[] nums) {
        int maxVal = 0;
        for (int val : nums) {
            maxVal = Math.max(maxVal, val);
        }
        int[] sum = new int[maxVal + 1];
        for (int val : nums) {
            sum[val] += val;
        }
        return rob(sum);
    }

    public int rob(int[] nums) {
        int size = nums.length;
        int first = nums[0], second = Math.max(nums[0], nums[1]);
        for (int i = 2; i < size; i++) {
            int temp = second;
            second = Math.max(first + nums[i], second);
            first = temp;
        }
        return second;
    }
}
```

```C# [sol1-C#]
public class Solution {
    public int DeleteAndEarn(int[] nums) {
        int maxVal = 0;
        foreach (int val in nums) {
            maxVal = Math.Max(maxVal, val);
        }
        int[] sum = new int[maxVal + 1];
        foreach (int val in nums) {
            sum[val] += val;
        }
        return Rob(sum);
    }

    public int Rob(int[] nums) {
        int size = nums.Length;
        int first = nums[0], second = Math.Max(nums[0], nums[1]);
        for (int i = 2; i < size; i++) {
            int temp = second;
            second = Math.Max(first + nums[i], second);
            first = temp;
        }
        return second;
    }
}
```

```go [sol1-Golang]
func deleteAndEarn(nums []int) int {
    maxVal := 0
    for _, val := range nums {
        maxVal = max(maxVal, val)
    }
    sum := make([]int, maxVal+1)
    for _, val := range nums {
        sum[val] += val
    }
    return rob(sum)
}

func rob(nums []int) int {
    first, second := nums[0], max(nums[0], nums[1])
    for i := 2; i < len(nums); i++ {
        first, second = second, max(first+nums[i], second)
    }
    return second
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

```Python [sol1-Python3]
class Solution:
    def deleteAndEarn(self, nums: List[int]) -> int:
        maxVal = max(nums)
        total = [0] * (maxVal + 1)
        for val in nums:
            total[val] += val
        
        def rob(nums: List[int]) -> int:
            size = len(nums)
            first, second = nums[0], max(nums[0], nums[1])
            for i in range(2, size):
                first, second = second, max(first + nums[i], second)
            return second
        
        return rob(total)
```

```C [sol1-C]
int rob(int *nums, int numsSize) {
    int first = nums[0], second = fmax(nums[0], nums[1]);
    for (int i = 2; i < numsSize; i++) {
        int temp = second;
        second = fmax(first + nums[i], second);
        first = temp;
    }
    return second;
}

int deleteAndEarn(int *nums, int numsSize) {
    int maxVal = 0;
    for (int i = 0; i < numsSize; i++) {
        maxVal = fmax(maxVal, nums[i]);
    }
    int sum[maxVal + 1];
    memset(sum, 0, sizeof(sum));
    for (int i = 0; i < numsSize; i++) {
        sum[nums[i]] += nums[i];
    }
    return rob(sum, maxVal + 1);
}
```

```JavaScript [sol1-JavaScript]
var deleteAndEarn = function(nums) {
    let maxVal = 0;
    for (const val of nums) {
        maxVal = Math.max(maxVal, val);
    }
    const sum = new Array(maxVal + 1).fill(0);
    for (const val of nums) {
        sum[val] += val;
    }
    return rob(sum);
};

const rob = (nums) => {
    const size = nums.length;
    let first = nums[0], second = Math.max(nums[0], nums[1]);
    for (let i = 2; i < size; i++) {
        let temp = second;
        second = Math.max(first + nums[i], second);
        first = temp;
    }
    return second;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(N+M)$ï¼Œå…¶ä¸­ $N$ æ˜¯æ•°ç»„ $\textit{nums}$ çš„é•¿åº¦ï¼Œ$M$ æ˜¯ $\textit{nums}$ ä¸­å…ƒç´ çš„æœ€å¤§å€¼ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(M)$ã€‚

#### æ–¹æ³•äºŒï¼šæ’åº + åŠ¨æ€è§„åˆ’

æ³¨æ„åˆ°è‹¥ $\textit{nums}$ ä¸­ä¸å­˜åœ¨æŸä¸ªå…ƒç´  $x$ï¼Œåˆ™é€‰æ‹©ä»»ä¸€å°äº $x$ çš„å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤§äº $x$ çš„å…ƒç´ çš„é€‰æ‹©ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å°† $\textit{nums}$ æ’åºåï¼Œå°†å…¶åˆ’åˆ†æˆè‹¥å¹²è¿ç»­å­æ•°ç»„ï¼Œå­æ•°ç»„å†…ä»»æ„ç›¸é‚»å…ƒç´ ä¹‹å·®ä¸è¶…è¿‡ $1$ã€‚å¯¹æ¯ä¸ªå­æ•°ç»„æŒ‰ç…§æ–¹æ³•ä¸€çš„åŠ¨æ€è§„åˆ’è¿‡ç¨‹è®¡ç®—å‡ºç»“æœï¼Œç´¯åŠ æ‰€æœ‰ç»“æœå³ä¸ºç­”æ¡ˆã€‚

**ä»£ç **

```C++ [sol2-C++]
class Solution {
private:
    int rob(vector<int> &nums) {
        int size = nums.size();
        if (size == 1) {
            return nums[0];
        }
        int first = nums[0], second = max(nums[0], nums[1]);
        for (int i = 2; i < size; i++) {
            int temp = second;
            second = max(first + nums[i], second);
            first = temp;
        }
        return second;
    }

public:
    int deleteAndEarn(vector<int> &nums) {
        int n = nums.size();
        int ans = 0;
        sort(nums.begin(), nums.end());
        vector<int> sum = {nums[0]};
        for (int i = 1; i < n; ++i) {
            int val = nums[i];
            if (val == nums[i - 1]) {
                sum.back() += val;
            } else if (val == nums[i - 1] + 1) {
                sum.push_back(val);
            } else {
                ans += rob(sum);
                sum = {val};
            }
        }
        ans += rob(sum);
        return ans;
    }
};
```

```Java [sol2-Java]
class Solution {
    public int deleteAndEarn(int[] nums) {
        int n = nums.length;
        int ans = 0;
        Arrays.sort(nums);
        List<Integer> sum = new ArrayList<Integer>();
        sum.add(nums[0]);
        int size = 1;
        for (int i = 1; i < n; ++i) {
            int val = nums[i];
            if (val == nums[i - 1]) {
                sum.set(size - 1, sum.get(size - 1) + val);
            } else if (val == nums[i - 1] + 1) {
                sum.add(val);
                ++size;
            } else {
                ans += rob(sum);
                sum.clear();
                sum.add(val);
                size = 1;
            }
        }
        ans += rob(sum);
        return ans;
    }

    public int rob(List<Integer> nums) {
        int size = nums.size();
        if (size == 1) {
            return nums.get(0);
        }
        int first = nums.get(0), second = Math.max(nums.get(0), nums.get(1));
        for (int i = 2; i < size; i++) {
            int temp = second;
            second = Math.max(first + nums.get(i), second);
            first = temp;
        }
        return second;
    }
}
```

```C# [sol2-C#]
public class Solution {
    public int DeleteAndEarn(int[] nums) {
        int n = nums.Length;
        int ans = 0;
        Array.Sort(nums);
        IList<int> sum = new List<int>();
        sum.Add(nums[0]);
        int size = 1;
        for (int i = 1; i < n; ++i) {
            int val = nums[i];
            if (val == nums[i - 1]) {
                sum[size - 1] += val;
            } else if (val == nums[i - 1] + 1) {
                sum.Add(val);
                ++size;
            } else {
                ans += Rob(sum);
                sum.Clear();
                sum.Add(val);
                size = 1;
            }
        }
        ans += Rob(sum);
        return ans;
    }

    public int Rob(IList<int> nums) {
        int size = nums.Count;
        if (size == 1) {
            return nums[0];
        }
        int first = nums[0], second = Math.Max(nums[0], nums[1]);
        for (int i = 2; i < size; i++) {
            int temp = second;
            second = Math.Max(first + nums[i], second);
            first = temp;
        }
        return second;
    }
}
```

```go [sol2-Golang]
func deleteAndEarn(nums []int) (ans int) {
    sort.Ints(nums)
    sum := []int{nums[0]}
    for i := 1; i < len(nums); i++ {
        if val := nums[i]; val == nums[i-1] {
            sum[len(sum)-1] += val
        } else if val == nums[i-1]+1 {
            sum = append(sum, val)
        } else {
            ans += rob(sum)
            sum = []int{val}
        }
    }
    ans += rob(sum)
    return
}

func rob(nums []int) int {
    if len(nums) == 1 {
        return nums[0]
    }
    first, second := nums[0], max(nums[0], nums[1])
    for i := 2; i < len(nums); i++ {
        first, second = second, max(first+nums[i], second)
    }
    return second
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

```Python [sol2-Python3]
class Solution:
    def deleteAndEarn(self, nums: List[int]) -> int:
        def rob(nums: List[int]) -> int:
            size = len(nums)
            if size == 1:
                return nums[0]

            first, second = nums[0], max(nums[0], nums[1])
            for i in range(2, size):
                first, second = second, max(first + nums[i], second)
            return second
        
        n = len(nums)
        ans = 0
        nums.sort()
        total = [nums[0]]

        for i in range(1, n):
            val = nums[i]
            if val == nums[i - 1]:
                total[-1] += val
            elif val == nums[i - 1] + 1:
                total.append(val)
            else:
                ans += rob(total)
                total = [val]
        
        ans += rob(total)
        return ans
```

```C [sol2-C]
int rob(int *nums, int numsSize) {
    if (numsSize == 1) {
        return nums[0];
    }
    int first = nums[0], second = fmax(nums[0], nums[1]);
    for (int i = 2; i < numsSize; i++) {
        int temp = second;
        second = fmax(first + nums[i], second);
        first = temp;
    }
    return second;
}

int cmp(int *a, int *b) {
    return *a - *b;
}

int deleteAndEarn(int *nums, int numsSize) {
    int ans = 0;
    qsort(nums, numsSize, sizeof(int), cmp);
    int sum[numsSize], sumSize = 0;
    sum[sumSize++] = nums[0];
    for (int i = 1; i < numsSize; ++i) {
        int val = nums[i];
        if (val == nums[i - 1]) {
            sum[sumSize - 1] += val;
        } else if (val == nums[i - 1] + 1) {
            sum[sumSize++] = val;
        } else {
            ans += rob(sum, sumSize);
            sumSize = 0;
            sum[sumSize++] = val;
        }
    }
    ans += rob(sum, sumSize);
    return ans;
}
```

```JavaScript [sol2-JavaScript]
var deleteAndEarn = function(nums) {
    const rob = (nums) => {
        const size = nums.length;
        if (size === 1) {
            return nums[0];
        }

        let [first, second] = [nums[0], Math.max(nums[0], nums[1])];
        for (let i = 2; i < size; i++) {
            [first, second] = [second, Math.max(first + nums[i], second)];
        }
        return second;
    }

    const n = nums.length;
    let ans = 0;
    nums.sort((a, b) => a - b);
    total = [nums[0]];

    for (let i = 1; i < n; i++) {
        const val = nums[i];
        if (val === nums[i - 1]) {
            total[total.length - 1] += val;
        } else if (val === nums[i - 1] + 1) {
            total.push(val);
        } else {
            ans += rob(total);
            total = [val];
        }
    }
    ans += rob(total);
    return ans;
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(N\log N)$ï¼Œå…¶ä¸­ $N$ æ˜¯æ•°ç»„ $\textit{nums}$ çš„é•¿åº¦ã€‚å¯¹ $\textit{nums}$ æ’åºéœ€è¦èŠ±è´¹ $O(N\log N)$ çš„æ—¶é—´ï¼Œéå†è®¡ç®—éœ€è¦èŠ±è´¹ $O(N)$ çš„æ—¶é—´ï¼Œæ•…æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(N\log N)$ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ã€‚ç»Ÿè®¡ $\textit{sum}$ è‡³å¤šéœ€è¦èŠ±è´¹ $O(N)$ çš„ç©ºé—´ã€‚