# 2021年05月27日 code
<a href="https://toutiao.io/k/obo72ks">听叔一句劝，消息队列的水太深，你把握不住</a><br /><a href="https://toutiao.io/k/bbulcom">Kafka 为什么要抛弃 ZooKeeper？</a><br /><a href="https://toutiao.io/k/jwzcso7">字节跳动异构场景下的高可用建设实践</a><br /><a href="https://toutiao.io/k/dlbbh09">面试侃集合：LinkedBlockingQueue 篇</a><br /><a href="https://toutiao.io/k/18kb0os">Goroutine Local Storage 的一些实现方案和必要性讨论</a><br /><a href="https://toutiao.io/k/rvb0p4k">资深 DevOps 工程师揭秘：为什么你对于 DevOps 无从下手？（认知篇）</a><br /><a href="https://toutiao.io/k/pr7tx1o">Kubernetes 稳定性保障手册：洞察 + 预案</a><br /><a href="https://toutiao.io/k/obbhbyl">详解 Go 空结构体的 3 种使用场景</a><br /><a href="https://toutiao.io/k/skwg9g5">zk 选举原理探索（上）</a><br /><a href="https://toutiao.io/k/oupfx04">Android 之 OkHttp 网络架构源码深入分析</a><br /><a href="https://toutiao.io/k/21xn1nt">分布式动态配置后浪推前浪：Nacos</a><br /><a href="https://toutiao.io/k/sx7x45q">在？送你个开源社区版 AirTag：GitHub 热点速览 v.21.21</a><br /><a href="https://toutiao.io/k/kuvdreq">图解堆排序算法</a><br /><a href="https://toutiao.io/k/a1ezb05">Anki 卡片共享 CSS 的方法</a><br /><a href="https://toutiao.io/k/6612w8j">[译] Android Jetpack 更新一览</a><br /><a href="https://toutiao.io/k/4h2kfve">年轻人逃离算法？更懂你的时尚推荐算法，你会拒绝吗？</a><br /><a href="https://toutiao.io/k/7t64cmv">故事篇：数据库架构演变之路</a><br /><a href="https://toutiao.io/k/0h97qx4">论文笔记：向量召回技术在 Facebook 搜索中的落地</a><br /><a href="https://toutiao.io/k/3rhjmhe">某区块链公司竟然用这道算法题来面试</a><br /><a href="https://toutiao.io/k/rmge4jn">ZLT-MP v4.5.0 发布</a><br /><a href="https://toutiao.io/k/jt9e5bq">[推荐] 动图图解！既然 IP 层会分片，为什么 TCP 层也还要分段？</a><br /><a href="https://toutiao.io/k/bzx7ri7">[推荐] Spring Boot 开发秘籍：集成参数校验及高阶技巧</a><br /><a href="https://toutiao.io/k/r3kppel">[推荐] WebRTC 的前世今生</a><br /><a href="https://toutiao.io/k/a3frc3i">[推荐] 聊一聊 Linux 的五种 IO 模型</a><br /><a href="https://toutiao.io/k/pws2m3l">[推荐] 微软又一个数据可视化神器开源了！非常酷炫</a><br /><a href="https://toutiao.io/k/3byclqk">[推荐] 这个 GitHub 项目能克隆你的声音</a><br /><a href="https://toutiao.io/k/ep5e8sd">[推荐] 亿级系统的 Redis 缓存如何设计？</a><br /><a href="https://toutiao.io/k/9yex08q">[推荐] 我把这个软件，推荐给了总监</a><br /><a href="https://toutiao.io/k/t1o49fm">[推荐] 企业微信万亿级日志检索系统</a><br /><a href="https://toutiao.io/k/w8wyj2e">[推荐] 消息队列把消息弄丢了怎么办？</a><br /><a href="https://toutiao.io/k/wa52n1g">[推荐] 高并发，我把握不住啊</a><br /><a href="https://toutiao.io/k/0hjw87u">[推荐] 日订单量达到 100 万单后，我们做了订单中心重构</a><br /><a href="https://toutiao.io/k/osge9c2">[推荐] 这款远程桌面软件开源了</a><br /><hr /><a href="https://github.com/dogecoin/dogecoin">very currency</a><br /><a href="https://github.com/wuyouzhuguli/SpringAll">循序渐进，学习Spring Boot、Spring Boot & Shiro、Spring Batch、Spring Cloud、Spring Cloud Alibaba、Spring Security & Spring Security OAuth2，博客Spring系列源码：https://mrbird.cc</a><br /><a href="https://github.com/Tencent/secguide">面向开发人员梳理的代码安全指南</a><br /><a href="https://github.com/dvgodoy/dl-visuals">Over 200 figures and diagrams of the most popular deep learning architectures and layers FREE TO USE in your blog posts, slides, presentations, or papers.</a><br /><a href="https://github.com/doocs/leetcode">😏 LeetCode solutions in any programming language | 多种编程语言实现 LeetCode、《剑指 Offer（第 2 版）》、《程序员面试金典（第 6 版）》题解</a><br /><a href="https://github.com/login?return_to=%2Frustdesk%2Frustdesk">The best open source remote desktop client software</a><br /><a href="https://github.com/FiloSottile/mkcert">A simple zero-config tool to make locally trusted development certificates with any names you'd like.</a><br /><a href="https://github.com/gwuhaolin/livego">live video streaming server in golang</a><br /><a href="https://github.com/cdr/code-server">VS Code in the browser</a><br /><a href="https://github.com/kon9chunkit/GitHub-Chinese-Top-Charts">🇨🇳 GitHub中文排行榜，帮助你发现高分优秀中文项目、更高效地吸收国人的优秀经验成果；榜单每周更新一次，敬请关注！</a><br /><a href="https://github.com/dogecoin/dogecoin.com">official repo for dogecoin.com</a><br /><a href="https://github.com/donnemartin/system-design-primer">Learn how to design large-scale systems. Prep for the system design interview. Includes Anki flashcards.</a><br /><a href="https://github.com/AMAI-GmbH/AI-Expert-Roadmap">Roadmap to becoming an Artificial Intelligence Expert in 2021</a><br /><a href="https://github.com/login?return_to=%2Fbee-san%2FpyWhat">🐸 Identify anything. pyWhat easily lets you identify emails, IP addresses, and more. Feed it a .pcap file or some text and it'll tell you what it is! 🧙‍♀️</a><br /><a href="https://github.com/login?return_to=%2FEbookFoundation%2Ffree-programming-books">📚 Freely available programming books</a><br /><a href="https://github.com/appwrite/appwrite">Appwrite is a secure end-to-end backend server for Web, Mobile, and Flutter developers that is packaged as a set of Docker containers for easy deployment 🚀</a><br /><a href="https://github.com/login?return_to=%2FWeeJeWel%2Fwg-easy">The easiest way to run WireGuard VPN + Web-based Admin UI.</a><br /><a href="https://github.com/discordjs/discord.js">A powerful JavaScript library for interacting with the Discord API</a><br /><a href="https://github.com/graphql/graphiql">GraphiQL & the GraphQL LSP Reference Ecosystem for building browser & IDE tools.</a><br /><a href="https://github.com/saadeghi/daisyui">⭐️ ⭐️ ⭐️ ⭐️ ⭐️  Tailwind Components</a><br /><a href="https://github.com/seemoo-lab/openhaystack">Build your own 'AirTags' 🏷 today! Framework for tracking personal Bluetooth devices via Apple's massive Find My network.</a><br /><a href="https://github.com/pluja/awesome-privacy">Awesome Privacy - A curated list of services and alternatives that respect your privacy because PRIVACY MATTERS.</a><br /><a href="https://github.com/bradtraversy/design-resources-for-developers">Curated list of design and UI resources from stock photos, web templates, CSS frameworks, UI libraries, tools and much more</a><br /><a href="https://github.com/ethereumbook/ethereumbook">Mastering Ethereum, by Andreas M. Antonopoulos, Gavin Wood</a><br /><a href="https://github.com/EdgeSecurityTeam/Vulnerability">此项目将不定期从棱角社区对外进行公布一些最新漏洞。</a><br /><hr />汉明距离<br /><p>两个整数之间的<a href="https://baike.baidu.com/item/%E6%B1%89%E6%98%8E%E8%B7%9D%E7%A6%BB">汉明距离</a>指的是这两个数字对应二进制位不同的位置的数目。</p>

<p>给出两个整数 <code>x</code> 和 <code>y</code>，计算它们之间的汉明距离。</p>

<p><strong>注意：</strong><br />
0 &le; <code>x</code>, <code>y</code> &lt; 2<sup>31</sup>.</p>

<p><strong>示例:</strong></p>

<pre>
<strong>输入:</strong> x = 1, y = 4

<strong>输出:</strong> 2

<strong>解释:</strong>
1   (0 0 0 1)
4   (0 1 0 0)
       &uarr;   &uarr;

上面的箭头指出了对应二进制位不同的位置。
</pre>
<br />#### 前言

汉明距离广泛应用于多个领域。在编码理论中用于错误检测，在信息论中量化字符串之间的差异。

两个整数之间的汉明距离是对应位置上数字不同的位数。

根据以上定义，我们使用异或运算，记为 $\oplus$，当且仅当输入位不同时输出为 $1$。

![fig1](https://assets.leetcode-cn.com/solution-static/461/1.png){:width="80%"}

计算 $x$ 和 $y$ 之间的汉明距离，可以先计算 $x \oplus y$，然后统计结果中等于 $1$ 的位数。

现在，原始问题转换为位计数问题。位计数有多种思路，将在下面的方法中介绍。

#### 方法一：内置位计数功能

**思路及算法**

大多数编程语言都内置了计算二进制表达中 $1$ 的数量的函数。在工程中，我们应该直接使用内置函数。

**代码**

```C++ [sol1-C++]
class Solution {
public:
    int hammingDistance(int x, int y) {
        return __builtin_popcount(x ^ y);
    }
};
```

```Java [sol1-Java]
class Solution {
    public int hammingDistance(int x, int y) {
        return Integer.bitCount(x ^ y);
    }
}
```

```go [sol1-Golang]
func hammingDistance(x, y int) int {
    return bits.OnesCount(uint(x ^ y))
}
```

```C [sol1-C]
int hammingDistance(int x, int y) {
    return __builtin_popcount(x ^ y);
}
```

**复杂度分析**

- 时间复杂度：$O(1)$。不同语言的实现方法不一，我们可以近似认为其时间复杂度为 $O(1)$。

- 空间复杂度：$O(1)$。

#### 方法二：移位实现位计数

**思路及算法**

在锻炼算法能力时，重复造轮子是不可避免的，也是应当的。因此读者们也需要尝试使用各种方法自己实现几个具有位计数功能的函数。本方法将使用位运算中移位的操作实现位计数功能。

![fig2](https://assets.leetcode-cn.com/solution-static/461/2.png)

具体地，记 $s = x \oplus y$，我们可以不断地检查 $s$ 的最低位，如果最低位为 $1$，那么令计数器加一，然后我们令 $s$ 整体右移一位，这样 $s$ 的最低位将被舍去，原本的次低位就变成了新的最低位。我们重复这个过程直到 $s=0$ 为止。这样计数器中就累计了 $s$ 的二进制表示中 $1$ 的数量。

**代码**

```C++ [sol2-C++]
class Solution {
public:
    int hammingDistance(int x, int y) {
        int s = x ^ y, ret = 0;
        while (s) {
            ret += s & 1;
            s >>= 1;
        }
        return ret;
    }
};
```

```Java [sol2-Java]
class Solution {
    public int hammingDistance(int x, int y) {
        int s = x ^ y, ret = 0;
        while (s != 0) {
            ret += s & 1;
            s >>= 1;
        }
        return ret;
    }
}
```

```C# [sol2-C#]
public class Solution {
    public int HammingDistance(int x, int y) {
        int s = x ^ y, ret = 0;
        while (s != 0) {
            ret += s & 1;
            s >>= 1;
        }
        return ret;
    }
}
```

```JavaScript [sol2-JavaScript]
var hammingDistance = function(x, y) {
    let s = x ^ y, ret = 0;
    while (s != 0) {
        ret += s & 1;
        s >>= 1;
    }
    return ret;
};
```

```go [sol2-Golang]
func hammingDistance(x, y int) (ans int) {
    for s := x ^ y; s > 0; s >>= 1 {
        ans += s & 1
    }
    return
}
```

```C [sol2-C]
int hammingDistance(int x, int y) {
    int s = x ^ y, ret = 0;
    while (s) {
        ret += s & 1;
        s >>= 1;
    }
    return ret;
}
```

**复杂度分析**

- 时间复杂度：$O(\log C)$，其中 $C$ 是元素的数据范围，在本题中 $\log C=\log 2^{31} = 31$。

- 空间复杂度：$O(1)$。

#### 方法三：$\text{Brian Kernighan}$ 算法

**思路及算法**

在方法二中，对于 $s=(10001100)_2$ 的情况，我们需要循环右移 $8$ 次才能得到答案。而实际上如果我们可以跳过两个 $1$ 之间的 $0$，直接对 $1$ 进行计数，那么就只需要循环 $3$ 次即可。

我们可以使用 $\text{Brian Kernighan}$ 算法进行优化，具体地，该算法可以被描述为这样一个结论：记 $f(x)$ 表示 $x$ 和 $x-1$ 进行与运算所得的结果（即 $f(x)=x~\&~(x-1)$），那么 $f(x)$ 恰为 $x$ 删去其二进制表示中最右侧的 $1$ 的结果。

![fig3](https://assets.leetcode-cn.com/solution-static/461/3.png)

基于该算法，当我们计算出 $s = x \oplus y$，只需要不断让 $s = f(s)$，直到 $s=0$ 即可。这样每循环一次，$s$ 都会删去其二进制表示中最右侧的 $1$，最终循环的次数即为 $s$ 的二进制表示中 $1$ 的数量。

**注意**

$\text{Brian Kernighan}$ 算法发布在 $1988$ 年出版的 $\text{The C Programming Language (Second Edition)}$ 的练习中（由 $\text{Brian W. Kernighan}$ 和 $\text{Dennis M. Ritchie}$ 编写），但是 $\text{Donald Knuth}$ 在 $2006$ 年 $4$ 月 $19$ 日指出，该方法第一次是由 $\text{Peter Wegner}$ 在 $1960$ 年的 $\text{CACM3}$ 上出版。可以在上述书籍中找到更多位操作的技巧。

**代码**

```C++ [sol3-C++]
class Solution {
public:
    int hammingDistance(int x, int y) {
        int s = x ^ y, ret = 0;
        while (s) {
            s &= s - 1;
            ret++;
        }
        return ret;
    }
};
```

```Java [sol3-Java]
class Solution {
    public int hammingDistance(int x, int y) {
        int s = x ^ y, ret = 0;
        while (s != 0) {
            s &= s - 1;
            ret++;
        }
        return ret;
    }
}
```

```C# [sol3-C#]
public class Solution {
    public int HammingDistance(int x, int y) {
        int s = x ^ y, ret = 0;
        while (s != 0) {
            s &= s - 1;
            ret++;
        }
        return ret;
    }
}
```

```JavaScript [sol3-JavaScript]
var hammingDistance = function(x, y) {
    let s = x ^ y, ret = 0;
    while (s != 0) {
        s &= s - 1;
        ret++;
    }
    return ret;
};
```

```go [sol3-Golang]
func hammingDistance(x, y int) (ans int) {
    for s := x ^ y; s > 0; s &= s - 1 {
        ans++
    }
    return
}
```

```C [sol3-C]
int hammingDistance(int x, int y) {
    int s = x ^ y, ret = 0;
    while (s) {
        s &= s - 1;
        ret++;
    }
    return ret;
}
```

**复杂度分析**

- 时间复杂度：$O(\log C)$，其中 $C$ 是元素的数据范围，在本题中 $\log C=\log 2^{31} = 31$。

- 空间复杂度：$O(1)$。