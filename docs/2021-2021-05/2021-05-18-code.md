# 2021å¹´05æœˆ18æ—¥ code
<a href="https://toutiao.io/k/0hjw87u">æ—¥è®¢å•é‡è¾¾åˆ° 100 ä¸‡å•åï¼Œæˆ‘ä»¬åšäº†è®¢å•ä¸­å¿ƒé‡æ„</a><br /><a href="https://toutiao.io/k/ymuky90">çªç ´ Web åº”ç”¨ç ”å‘æ•ˆèƒ½çš„å¹æ¯ä¹‹å¢™</a><br /><a href="https://toutiao.io/k/a4op90o">æ»´æ»´å‡ºè¡Œå¹³å°ä¸šåŠ¡æ¶æ„æ¼”è¿›</a><br /><a href="https://toutiao.io/k/1b5jcg5">æ¶ˆæ¯é˜Ÿåˆ—å¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Ÿ</a><br /><a href="https://toutiao.io/k/ewr4rul">æ–¹æ³•è°ƒç”¨ï¼šä¸€çœ‹å°±æ‡‚ï¼Œä¸€é—®å°±æ‡µï¼Ÿ</a><br /><a href="https://toutiao.io/k/5q7ia30">è¯»ã€Šå¹²æ³•ã€‹ï¼šæ€è€ƒåº”è¯¥æ€æ ·å»å·¥ä½œ</a><br /><a href="https://toutiao.io/k/9ri7ti0">ä½ä»£ç å¼€å‘çš„ä¹å¤§åŸåˆ™ (Mendix)</a><br /><a href="https://toutiao.io/k/jcqmdn0">V ç¥åœ¨ç”¨çš„ Archerswap</a><br /><a href="https://toutiao.io/k/nhi4go9">Kafka æŠ€æœ¯ä¸“é¢˜ä¹‹æ€»ä½“åŸç†å’Œåˆ†æä»‹ç»ï¼ˆä¸‹ï¼‰</a><br /><a href="https://toutiao.io/k/8xzkzb0">åº”å¯¹ â€œé«˜å¹¶å‘â€ çš„æ€è·¯</a><br /><a href="https://toutiao.io/k/hc0ok96">åœ¨ JavaScript åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œè¯­éŸ³è¯†åˆ«</a><br /><a href="https://toutiao.io/k/qoj05dv">ç”¨æˆ·æ•°ç™¾ä¸‡ã€æœˆä¸‹è½½è¶… 1 äº¿ï¼Œè‘—åå¼€æºé¡¹ç›® Babel å´è¯´è‡ªå·±å¿«æ²¡é’±ç»´æŠ¤äº†</a><br /><a href="https://toutiao.io/k/o8oqe2u">[è¯‘] åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è§£å†³ï¼Œæˆ–å¹³è¡¡å¾®æœåŠ¡çš„å¤æ‚åº¦ï¼ˆä¸€ï¼‰</a><br /><a href="https://toutiao.io/k/65xb7v3">é‚£äº›å¥½ç”¨çš„ VS Code æ’ä»¶ï¼Œç©¶ç«Ÿæ˜¯å¦‚ä½•æé«˜ç¼–ç æ•ˆç‡çš„ï¼Ÿ</a><br /><a href="https://toutiao.io/k/xwksizl">æ¼æ´æ‰«æå™¨ hang ä½ case å¤ç›˜</a><br /><a href="https://toutiao.io/k/0x4f9wt">jbd2 çš„ä¸€ç§æ­»é”åˆ†æ</a><br /><a href="https://toutiao.io/k/32knt0g">å¦‚ä½•æå®šä¸åŒå…¬å¸çš„ç®—æ³•é¢è¯•ï¼Ÿ</a><br /><a href="https://toutiao.io/k/fhd9lgu">ç”¨å¯è§†åŒ–æ¢ç´¢æ•°æ®ç‰¹å¾çš„ N ç§å§¿åŠ¿</a><br /><a href="https://toutiao.io/k/gvg5v4e">[è¯‘] 7 ä¸ªæœ‰ç”¨çš„ PyTorch æŠ€å·§</a><br /><a href="https://toutiao.io/k/zec189c">.NET ä¸­çš„å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹</a><br /><a href="https://toutiao.io/k/4sywkcm">[æ¨è] å¾®æœåŠ¡è®¾è®¡åŸåˆ™</a><br /><a href="https://toutiao.io/k/gs6z30z">[æ¨è] è½»è½»æ¾æ¾æ‰“å°ç½‘é¡µå¹¶ç”Ÿæˆ pdf æ–‡æ¡£</a><br /><a href="https://toutiao.io/k/3byclqk">[æ¨è] è¿™ä¸ª GitHub é¡¹ç›®èƒ½å…‹éš†ä½ çš„å£°éŸ³</a><br /><a href="https://toutiao.io/k/4fpatsr">[æ¨è] [è¯‘] Linux ç³»ç»Ÿå®‰å…¨å¼ºåŒ–æŒ‡å—</a><br /><a href="https://toutiao.io/k/k1o0w99">[æ¨è] å“ˆå•°åœ¨åˆ†å¸ƒå¼æ¶ˆæ¯æ²»ç†å’Œå¾®æœåŠ¡æ²»ç†ä¸­çš„å®è·µ</a><br /><a href="https://toutiao.io/k/ss8h91v">[æ¨è] æ¶æ„å¸ˆå¿…çœ‹ï¼šæ¶æ„è®¾è®¡çš„å››å¤§æ€ç»´æ”¯æŸ±</a><br /><a href="https://toutiao.io/k/moooo7c">[æ¨è] æˆ‘ï¼Œç®¡ç† 100 å¤šäººæŠ€æœ¯å›¢é˜Ÿçš„äºŒä¸‰äº‹</a><br /><a href="https://toutiao.io/k/nkx9rki">[æ¨è] æˆ‘è®¤ä¸ºæœ€ä¼˜ç¾çš„æ•°æ®ç»“æ„</a><br /><a href="https://toutiao.io/k/gc13z71">[æ¨è] æ•°æ®åˆ†æåå¹´ï¼Œæˆ‘åªæ¨èè¿™äº›ä¹¦</a><br /><a href="https://toutiao.io/k/2tnj5np">[æ¨è] RabbitMQã€Kafkaã€RocketMQ æ˜¯å¦‚ä½•å®ç°é«˜å¯ç”¨çš„ï¼Ÿ</a><br /><a href="https://toutiao.io/k/bjis3t4">[æ¨è] 36 å¼ å›¾è¯¦è§£ç½‘ç»œåŸºç¡€çŸ¥è¯†</a><br /><a href="https://toutiao.io/k/ca8fe6d">[æ¨è] åŠç‚¸å¤©çš„ Docker å›¾å½¢åŒ–å·¥å…· Portainerï¼Œå¿…é¡»æ¨èç»™ä½ </a><br /><a href="https://toutiao.io/k/w8wyj2e">[æ¨è] æ¶ˆæ¯é˜Ÿåˆ—æŠŠæ¶ˆæ¯å¼„ä¸¢äº†æ€ä¹ˆåŠï¼Ÿ</a><br /><a href="https://toutiao.io/k/7v2gnx6">[æ¨è] ç¨‹åºå‘˜å¿…å¤‡åŸºç¡€ï¼š10 ç§å¸¸è§å®‰å…¨æ¼æ´æµ…æ</a><br /><hr /><a href="https://github.com/login?return_to=%2Filuwatar%2Fjava-design-patterns">Design patterns implemented in Java</a><br /><a href="https://github.com/login?return_to=%2Fsyncthing%2Fsyncthing">Open Source Continuous File Synchronization</a><br /><a href="https://github.com/sqlfluff/sqlfluff">A SQL linter and auto-formatter for Humans</a><br /><a href="https://github.com/input-output-hk/plutus">The Plutus language implementation and tools</a><br /><a href="https://github.com/paritytech/substrate">Substrate: The platform for blockchain innovators</a><br /><a href="https://github.com/login?return_to=%2FGitSquared%2Fedex-ui">A cross-platform, customizable science fiction terminal emulator with advanced monitoring & touchscreen support.</a><br /><a href="https://github.com/login?return_to=%2Fswar%2FSwar-Chia-Plot-Manager">This is a Cross-Platform Plot Manager for Chia Plotting that is simple, easy-to-use, and reliable.</a><br /><a href="https://github.com/schlae/graphics-gremlin">Open source retro ISA video card</a><br /><a href="https://github.com/login?return_to=%2Fthedaviddias%2FFront-End-Checklist">ğŸ—‚ The perfect Front-End Checklist for modern websites and meticulous developers</a><br /><a href="https://github.com/vinta/awesome-python">A curated list of awesome Python frameworks, libraries, software and resources</a><br /><a href="https://github.com/ExpressLRS/ExpressLRS">STM32/ESP32/ESP8285-based High-Performance Radio Link for RC applications</a><br /><a href="https://github.com/JanVanRyswyck/awesome-talks">Awesome online talks and screencasts</a><br /><a href="https://github.com/google/leveldb">LevelDB is a fast key-value storage library written at Google that provides an ordered mapping from string keys to string values.</a><br /><a href="https://github.com/tuteng/Best-websites-a-programmer-should-visit-zh">ç¨‹åºå‘˜åº”è¯¥è®¿é—®çš„æœ€ä½³ç½‘ç«™ä¸­æ–‡ç‰ˆ</a><br /><a href="https://github.com/lockedbyte/CVE-Exploits">PoC exploits for software vulnerabilities</a><br /><a href="https://github.com/jklepatch/eattheblocks">Source code for Eat The Blocks, a screencast for Ethereum Dapp Developers</a><br /><a href="https://github.com/dogecoin/dogecoin">very currency</a><br /><a href="https://github.com/bitcoin/bitcoin">Bitcoin Core integration/staging tree</a><br /><a href="https://github.com/lucky/bad_actor_poc"></a><br /><a href="https://github.com/solana-labs/solana-season"></a><br /><a href="https://github.com/OWASP/CheatSheetSeries">The OWASP Cheat Sheet Series was created to provide a concise collection of high value information on specific application security topics.</a><br /><a href="https://github.com/AkihiroSuda/lima">Lima: Linux-on-Mac ("macOS subsystem for Linux", "containerd for Mac")</a><br /><a href="https://github.com/zhongyang219/TrafficMonitor">è¿™æ˜¯ä¸€ä¸ªç”¨äºæ˜¾ç¤ºå½“å‰ç½‘é€Ÿã€CPUåŠå†…å­˜åˆ©ç”¨ç‡çš„æ¡Œé¢æ‚¬æµ®çª—è½¯ä»¶ï¼Œå¹¶æ”¯æŒä»»åŠ¡æ æ˜¾ç¤ºï¼Œæ”¯æŒæ›´æ¢çš®è‚¤ã€‚</a><br /><a href="https://github.com/freqtrade/freqtrade-strategies">Free trading strategies for Freqtrade bot</a><br /><a href="https://github.com/covid19india/covid19india-react">Tracking the impact of COVID-19 in India</a><br /><hr />å½¢æˆä¸¤ä¸ªå¼‚æˆ–ç›¸ç­‰æ•°ç»„çš„ä¸‰å…ƒç»„æ•°ç›®<br /><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>arr</code> ã€‚</p>

<p>ç°éœ€è¦ä»æ•°ç»„ä¸­å–ä¸‰ä¸ªä¸‹æ ‡ <code>i</code>ã€<code>j</code> å’Œ <code>k</code> ï¼Œå…¶ä¸­ <code>(0 &lt;= i &lt; j &lt;= k &lt; arr.length)</code> ã€‚</p>

<p><code>a</code> å’Œ <code>b</code> å®šä¹‰å¦‚ä¸‹ï¼š</p>

<ul>
	<li><code>a = arr[i] ^ arr[i + 1] ^ ... ^ arr[j - 1]</code></li>
	<li><code>b = arr[j] ^ arr[j + 1] ^ ... ^ arr[k]</code></li>
</ul>

<p>æ³¨æ„ï¼š<strong>^</strong> è¡¨ç¤º <strong>æŒ‰ä½å¼‚æˆ–</strong> æ“ä½œã€‚</p>

<p>è¯·è¿”å›èƒ½å¤Ÿä»¤ <code>a == b</code> æˆç«‹çš„ä¸‰å…ƒç»„ (<code>i</code>, <code>j</code> , <code>k</code>) çš„æ•°ç›®ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [2,3,1,6,7]
<strong>è¾“å‡ºï¼š</strong>4
<strong>è§£é‡Šï¼š</strong>æ»¡è¶³é¢˜æ„çš„ä¸‰å…ƒç»„åˆ†åˆ«æ˜¯ (0,1,2), (0,2,2), (2,3,4) ä»¥åŠ (2,4,4)
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [1,1,1,1,1]
<strong>è¾“å‡ºï¼š</strong>10
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [2,3]
<strong>è¾“å‡ºï¼š</strong>0
</pre>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [1,3,5,7,9]
<strong>è¾“å‡ºï¼š</strong>3
</pre>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [7,11,12,9,5,2,7,17,22]
<strong>è¾“å‡ºï¼š</strong>8
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= arr.length &lt;= 300</code></li>
	<li><code>1 &lt;= arr[i] &lt;= 10^8</code></li>
</ul>
<br />#### å‰è¨€

ç”¨ $\oplus$ è¡¨ç¤ºæŒ‰ä½å¼‚æˆ–è¿ç®—ã€‚

å®šä¹‰é•¿åº¦ä¸º $n$ çš„æ•°ç»„ $\textit{arr}$ çš„å¼‚æˆ–å‰ç¼€å’Œ

$$
S_i =
\begin{cases} 
0,&i=0\\
\textit{arr}_0\oplus\textit{arr}_1\oplus\cdots\oplus\textit{arr}_{i-1},&1\le i\le n
\end{cases}
$$

ç”±è¯¥å®šä¹‰å¯å¾—

$$
S_i =
\begin{cases} 
0,&i=0\\
S_{i-1}\oplus\textit{arr}_{i-1},&1\le i\le n
\end{cases}
$$

è¿™æ˜¯ä¸€ä¸ªå…³äº $S_i$ çš„é€’æ¨å¼ï¼Œæ ¹æ®è¯¥é€’æ¨å¼æˆ‘ä»¬å¯ä»¥ç”¨ $O(n)$ çš„æ—¶é—´å¾—åˆ°æ•°ç»„ $\textit{arr}$ çš„å¼‚æˆ–å‰ç¼€å’Œæ•°ç»„ã€‚

å¯¹äºä¸¤ä¸ªä¸‹æ ‡ä¸åŒçš„å¼‚æˆ–å‰ç¼€å’Œ $S_i$ å’Œ $S_j$ï¼Œè®¾ $0<i<j$ï¼Œæœ‰

$$
S_i\oplus S_j=(\textit{arr}_0\oplus\textit{arr}_1\oplus\cdots\oplus\textit{arr}_{i-1})\oplus(\textit{arr}_0\oplus\textit{arr}_1\oplus\cdots\oplus\textit{arr}_{i-1}\oplus\textit{arr}_i\oplus\cdots\oplus\textit{arr}_{j-1}ï¼‰
$$

ç”±äºå¼‚æˆ–è¿ç®—æ»¡è¶³ç»“åˆå¾‹å’Œäº¤æ¢å¾‹ï¼Œä¸”ä»»æ„æ•°å¼‚æˆ–è‡ªèº«ç­‰äº $0$ï¼Œä¸Šå¼å¯åŒ–ç®€ä¸º

$$
S_i\oplus S_j=\textit{arr}_i\oplus\cdots\oplus\textit{arr}_{j-1}
$$

ä»è€Œï¼Œæ•°ç»„ $\textit{arr}$ çš„å­åŒºé—´ $[i,j]$ çš„å…ƒç´ å¼‚æˆ–å’Œä¸ºå¯è¡¨ç¤ºä¸º

$$
S_i\oplus S_{j+1}
$$

å› æ­¤é—®é¢˜ä¸­çš„ $a$ å’Œ $b$ å¯è¡¨ç¤ºä¸º

$$
\begin{aligned}
&a=S_i\oplus S_{j}\\
&b=S_j\oplus S_{k+1}
\end{aligned}
$$

è‹¥ $a=b$ï¼Œåˆ™æœ‰

$$
S_i\oplus S_{j}=S_j\oplus S_{k+1}
$$

å³

$$
S_i=S_{k+1}
$$

#### æ–¹æ³•ä¸€ï¼šä¸‰é‡å¾ªç¯

è®¡ç®—æ•°ç»„ $\textit{arr}$ çš„å¼‚æˆ–å‰ç¼€å’Œ $S$ï¼Œæšä¸¾ç¬¦åˆ $0\le i<j\le k<n$ çš„ä¸‹æ ‡ $i$ï¼Œ$j$ å’Œ $k$ï¼Œç»Ÿè®¡æ»¡è¶³ç­‰å¼ $S_i=S_{k+1}$ çš„ä¸‰å…ƒç»„ä¸ªæ•°ã€‚

```C++ [sol1-C++]
class Solution {
public:
    int countTriplets(vector<int> &arr) {
        int n = arr.size();
        vector<int> s(n + 1);
        for (int i = 0; i < n; ++i) {
            s[i + 1] = s[i] ^ arr[i];
        }
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            for (int j = i + 1; j < n; ++j) {
                for (int k = j; k < n; ++k) {
                    if (s[i] == s[k + 1]) {
                        ++ans;
                    }
                }
            }
        }
        return ans;
    }
};
```

```Java [sol1-Java]
class Solution {
    public int countTriplets(int[] arr) {
        int n = arr.length;
        int[] s = new int[n + 1];
        for (int i = 0; i < n; ++i) {
            s[i + 1] = s[i] ^ arr[i];
        }
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            for (int j = i + 1; j < n; ++j) {
                for (int k = j; k < n; ++k) {
                    if (s[i] == s[k + 1]) {
                        ++ans;
                    }
                }
            }
        }
        return ans;
    }
}
```

```C# [sol1-C#]
public class Solution {
    public int CountTriplets(int[] arr) {
        int n = arr.Length;
        int[] s = new int[n + 1];
        for (int i = 0; i < n; ++i) {
            s[i + 1] = s[i] ^ arr[i];
        }
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            for (int j = i + 1; j < n; ++j) {
                for (int k = j; k < n; ++k) {
                    if (s[i] == s[k + 1]) {
                        ++ans;
                    }
                }
            }
        }
        return ans;
    }
}
```

```go [sol1-Golang]
func countTriplets(arr []int) (ans int) {
    n := len(arr)
    s := make([]int, n+1)
    for i, val := range arr {
        s[i+1] = s[i] ^ val
    }
    for i := 0; i < n; i++ {
        for j := i + 1; j < n; j++ {
            for k := j; k < n; k++ {
                if s[i] == s[k+1] {
                    ans++
                }
            }
        }
    }
    return
}
```

```Python [sol1-Python3]
class Solution:
    def countTriplets(self, arr: List[int]) -> int:
        n = len(arr)
        s = [0]
        for val in arr:
            s.append(s[-1] ^ val)
        
        ans = 0
        for i in range(n):
            for j in range(i + 1, n):
                for k in range(j, n):
                    if s[i] == s[k + 1]:
                        ans += 1
        
        return ans
```

```JavaScript [sol1-JavaScript]
var countTriplets = function(arr) {
    const n = arr.length;
    const s = [0];
    for (const num of arr) {
        s.push(s[s.length - 1] ^ num);
    }

    let ans = 0;
    for (let i = 0; i < n; i++) {
        for (let j = i + 1; j < n; j++) {
            for (let k = j; k < n; k++) {
                if (s[i] === s[k + 1]) {
                    ans++;
                }
            }
        }
    }

    return ans;
};
```

```C [sol1-C]
int countTriplets(int* arr, int arrSize) {
    int n = arrSize;
    int s[n + 1];
    s[0] = 0;
    for (int i = 0; i < n; ++i) {
        s[i + 1] = s[i] ^ arr[i];
    }
    int ans = 0;
    for (int i = 0; i < n; ++i) {
        for (int j = i + 1; j < n; ++j) {
            for (int k = j; k < n; ++k) {
                if (s[i] == s[k + 1]) {
                    ++ans;
                }
            }
        }
    }
    return ans;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n^3)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\textit{arr}$ çš„é•¿åº¦ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚

#### æ–¹æ³•äºŒï¼šäºŒé‡å¾ªç¯

å½“ç­‰å¼ $S_i=S_{k+1}$ æˆç«‹æ—¶ï¼Œ$[i+1, k]$ çš„èŒƒå›´å†…çš„ä»»æ„ $j$ éƒ½æ˜¯ç¬¦åˆè¦æ±‚çš„ï¼Œå¯¹åº”çš„ä¸‰å…ƒç»„ä¸ªæ•°ä¸º $k-i$ã€‚å› æ­¤æˆ‘ä»¬åªéœ€æšä¸¾ä¸‹æ ‡ $i$ å’Œ $k$ã€‚

**ä»£ç **

```C++ [sol2-C++]
class Solution {
public:
    int countTriplets(vector<int> &arr) {
        int n = arr.size();
        vector<int> s(n + 1);
        for (int i = 0; i < n; ++i) {
            s[i + 1] = s[i] ^ arr[i];
        }
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            for (int k = i + 1; k < n; ++k) {
                if (s[i] == s[k + 1]) {
                    ans += k - i;
                }
            }
        }
        return ans;
    }
};
```

```Java [sol2-Java]
class Solution {
    public int countTriplets(int[] arr) {
        int n = arr.length;
        int[] s = new int[n + 1];
        for (int i = 0; i < n; ++i) {
            s[i + 1] = s[i] ^ arr[i];
        }
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            for (int k = i + 1; k < n; ++k) {
                if (s[i] == s[k + 1]) {
                    ans += k - i;
                }
            }
        }
        return ans;
    }
}
```

```C# [sol2-C#]
public class Solution {
    public int CountTriplets(int[] arr) {
        int n = arr.Length;
        int[] s = new int[n + 1];
        for (int i = 0; i < n; ++i) {
            s[i + 1] = s[i] ^ arr[i];
        }
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            for (int k = i + 1; k < n; ++k) {
                if (s[i] == s[k + 1]) {
                    ans += k - i;
                }
            }
        }
        return ans;
    }
}
```

```go [sol2-Golang]
func countTriplets(arr []int) (ans int) {
    n := len(arr)
    s := make([]int, n+1)
    for i, val := range arr {
        s[i+1] = s[i] ^ val
    }
    for i := 0; i < n; i++ {
        for k := i + 1; k < n; k++ {
            if s[i] == s[k+1] {
                ans += k - i
            }
        }
    }
    return
}
```

```Python [sol2-Python3]
class Solution:
    def countTriplets(self, arr: List[int]) -> int:
        n = len(arr)
        s = [0]
        for val in arr:
            s.append(s[-1] ^ val)
        
        ans = 0
        for i in range(n):
            for k in range(i + 1, n):
                if s[i] == s[k + 1]:
                    ans += k - i
        
        return ans
```

```JavaScript [sol2-JavaScript]
var countTriplets = function(arr) {
    const n = arr.length;
    const s = [0];
    for (const num of arr) {
        s.push(s[s.length - 1] ^ num);
    }

    let ans = 0;
    for (let i = 0; i < n; i++) {
        for (let k = i + 1; k < n; k++) {
            if (s[i] === s[k + 1]) {
                ans += k - i;
            }
        }
    }

    return ans;
};
```

```C [sol2-C]
int countTriplets(int* arr, int arrSize) {
    int n = arrSize;
    int s[n + 1];
    s[0] = 0;
    for (int i = 0; i < n; ++i) {
        s[i + 1] = s[i] ^ arr[i];
    }
    int ans = 0;
    for (int i = 0; i < n; ++i) {
        for (int k = i + 1; k < n; ++k) {
            if (s[i] == s[k + 1]) {
                ans += k - i;
            }
        }
    }
    return ans;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\textit{arr}$ çš„é•¿åº¦ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚

#### æ–¹æ³•ä¸‰ï¼šå“ˆå¸Œè¡¨ï¼ˆä¸€é‡å¾ªç¯ï¼‰

å¯¹äºä¸‹æ ‡ $k$ï¼Œè‹¥ä¸‹æ ‡ $i=i_1,i_2,\cdots,i_m$ æ—¶å‡æ»¡è¶³ $S_i=S_{k+1}$ï¼Œæ ¹æ®æ–¹æ³•äºŒï¼Œè¿™äº›äºŒå…ƒç»„ $(i_1,k),(i_2,k),\cdots,(i_m,k)$ å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¹‹å’Œä¸º

$$
(k-i_1)+(k-i_2)+\cdots+(k-i_m)=m\cdot k-(i_1+i_2+\cdots+i_m)
$$

ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“éå†ä¸‹æ ‡ $k$ æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ‰€æœ‰æ»¡è¶³ $S_i=S_{k+1}$ çš„

- ä¸‹æ ‡ $i$ çš„å‡ºç°æ¬¡æ•° $m$
- ä¸‹æ ‡ $i$ ä¹‹å’Œ

è¿™å¯ä»¥å€ŸåŠ©ä¸¤ä¸ªå“ˆå¸Œè¡¨æ¥åšåˆ°ï¼Œåœ¨éå†ä¸‹æ ‡ $k$ çš„åŒæ—¶ï¼Œä¸€ä¸ªå“ˆå¸Œè¡¨ç»Ÿè®¡ $S_k$ çš„å‡ºç°æ¬¡æ•°ï¼Œå¦ä¸€ä¸ªå“ˆå¸Œè¡¨ç»Ÿè®¡å€¼ä¸º $S_k$ çš„ä¸‹æ ‡ä¹‹å’Œã€‚

```C++ [sol3-C++]
class Solution {
public:
    int countTriplets(vector<int> &arr) {
        int n = arr.size();
        vector<int> s(n + 1);
        for (int i = 0; i < n; ++i) {
            s[i + 1] = s[i] ^ arr[i];
        }
        unordered_map<int, int> cnt, total;
        int ans = 0;
        for (int k = 0; k < n; ++k) {
            if (cnt.count(s[k + 1])) {
                ans += cnt[s[k + 1]] * k - total[s[k + 1]];
            }
            ++cnt[s[k]];
            total[s[k]] += k;
        }
        return ans;
    }
};
```

```Java [sol3-Java]
class Solution {
    public int countTriplets(int[] arr) {
        int n = arr.length;
        int[] s = new int[n + 1];
        for (int i = 0; i < n; ++i) {
            s[i + 1] = s[i] ^ arr[i];
        }
        Map<Integer, Integer> cnt = new HashMap<Integer, Integer>();
        Map<Integer, Integer> total = new HashMap<Integer, Integer>();
        int ans = 0;
        for (int k = 0; k < n; ++k) {
            if (cnt.containsKey(s[k + 1])) {
                ans += cnt.get(s[k + 1]) * k - total.get(s[k + 1]);
            }
            cnt.put(s[k], cnt.getOrDefault(s[k], 0) + 1);
            total.put(s[k], total.getOrDefault(s[k], 0) + k);
        }
        return ans;
    }
}
```

```C# [sol3-C#]
public class Solution {
    public int CountTriplets(int[] arr) {
        int n = arr.Length;
        int[] s = new int[n + 1];
        for (int i = 0; i < n; ++i) {
            s[i + 1] = s[i] ^ arr[i];
        }
        Dictionary<int, int> cnt = new Dictionary<int, int>();
        Dictionary<int, int> total = new Dictionary<int, int>();
        int ans = 0;
        for (int k = 0; k < n; ++k) {
            if (cnt.ContainsKey(s[k + 1])) {
                ans += cnt[s[k + 1]] * k - total[s[k + 1]];
            }
            if (!cnt.ContainsKey(s[k])) {
                cnt.Add(s[k], 1);
            } else {
                ++cnt[s[k]];
            }
            if (!total.ContainsKey(s[k])) {
                total.Add(s[k], k);
            } else {
                total[s[k]] += k;
            }
        }
        return ans;
    }
}
```

```go [sol3-Golang]
func countTriplets(arr []int) (ans int) {
    n := len(arr)
    s := make([]int, n+1)
    for i, v := range arr {
        s[i+1] = s[i] ^ v
    }
    cnt := map[int]int{}
    total := map[int]int{}
    for k := 0; k < n; k++ {
        if m, has := cnt[s[k+1]]; has {
            ans += m*k - total[s[k+1]]
        }
        cnt[s[k]]++
        total[s[k]] += k
    }
    return
}
```

```Python [sol3-Python3]
class Solution:
    def countTriplets(self, arr: List[int]) -> int:
        n = len(arr)
        s = [0]
        for val in arr:
            s.append(s[-1] ^ val)
        
        cnt, total = Counter(), Counter()
        ans = 0
        for k in range(n):
            if s[k + 1] in cnt:
                ans += cnt[s[k + 1]] * k - total[s[k + 1]]
            cnt[s[k]] += 1
            total[s[k]] += k

        return ans
```

```JavaScript [sol3-JavaScript]
var countTriplets = function(arr) {
    const n = arr.length;
    s = [0];
    for (const num of arr) {
        s.push(s[s.length - 1] ^ num);
    }

    const cnt = new Map(), total = new Map();
    let ans = 0;
    for (let k = 0; k < n; k++) {
        if (cnt.has(s[k + 1])) {
            ans += cnt.get(s[k + 1]) * k - total.get(s[k + 1]);
        }
        cnt.set(s[k], (cnt.get(s[k]) || 0) + 1);
        total.set(s[k], (total.get(s[k]) || 0) + k);
    }

    return ans;
};
```

```C [sol3-C]
struct HashTable {
    int val, key;
    UT_hash_handle hh;
};

bool count(struct HashTable* hashTable, int x) {
    struct HashTable* tmp;
    HASH_FIND_INT(hashTable, &x, tmp);
    return tmp != NULL;
}

int getValue(struct HashTable* hashTable, int x) {
    struct HashTable* tmp;
    HASH_FIND_INT(hashTable, &x, tmp);
    return tmp == NULL ? 0 : tmp->val;
}

void addValue(struct HashTable** hashTable, int x, int y) {
    struct HashTable* tmp;
    HASH_FIND_INT(*hashTable, &x, tmp);
    if (tmp == NULL) {
        tmp = malloc(sizeof(struct HashTable));
        tmp->key = x;
        tmp->val = y;
        HASH_ADD_INT(*hashTable, key, tmp);
    } else {
        tmp->val += y;
    }
}

int countTriplets(int* arr, int arrSize) {
    int n = arrSize;
    int s[n + 1];
    s[0] = 0;
    for (int i = 0; i < n; ++i) {
        s[i + 1] = s[i] ^ arr[i];
    }
    struct HashTable *cnt = NULL, *total = NULL;
    int ans = 0;
    for (int k = 0; k < n; ++k) {
        if (count(cnt, s[k + 1])) {
            ans += getValue(cnt, s[k + 1]) * k - getValue(total, s[k + 1]);
        }
        addValue(&cnt, s[k], 1);
        addValue(&total, s[k], k);
    }
    return ans;
}
```

**ä¼˜åŒ–**

æˆ‘ä»¬å¯ä»¥åœ¨è®¡ç®—å¼‚æˆ–å‰ç¼€å’Œçš„åŒæ—¶è®¡ç®—ç­”æ¡ˆï¼Œä»è€Œåšåˆ°ä»…éå† $\textit{arr}$ ä¸€æ¬¡å°±è®¡ç®—å‡ºç­”æ¡ˆã€‚

```C++ [sol4-C++]
class Solution {
public:
    int countTriplets(vector<int> &arr) {
        int n = arr.size();
        unordered_map<int, int> cnt, total;
        int ans = 0, s = 0;
        for (int k = 0; k < n; ++k) {
            int val = arr[k];
            if (cnt.count(s ^ val)) {
                ans += cnt[s ^ val] * k - total[s ^ val];
            }
            ++cnt[s];
            total[s] += k;
            s ^= val;
        }
        return ans;
    }
};
```

```Java [sol4-Java]
class Solution {
    public int countTriplets(int[] arr) {
        int n = arr.length;
        Map<Integer, Integer> cnt = new HashMap<Integer, Integer>();
        Map<Integer, Integer> total = new HashMap<Integer, Integer>();
        int ans = 0, s = 0;
        for (int k = 0; k < n; ++k) {
            int val = arr[k];
            if (cnt.containsKey(s ^ val)) {
                ans += cnt.get(s ^ val) * k - total.get(s ^ val);
            }
            cnt.put(s, cnt.getOrDefault(s, 0) + 1);
            total.put(s, total.getOrDefault(s, 0) + k);
            s ^= val;
        }
        return ans;
    }
}
```

```C# [sol4-C#]
public class Solution {
    public int CountTriplets(int[] arr) {
        int n = arr.Length;
        Dictionary<int, int> cnt = new Dictionary<int, int>();
        Dictionary<int, int> total = new Dictionary<int, int>();
        int ans = 0, s = 0;
        for (int k = 0; k < n; ++k) {
            int val = arr[k];
            if (cnt.ContainsKey(s ^ val)) {
                ans += cnt[s ^ val] * k - total[s ^ val];
            }
            if (!cnt.ContainsKey(s)) {
                cnt.Add(s, 1);
            } else {
                ++cnt[s];
            }
            if (!total.ContainsKey(s)) {
                total.Add(s, k);
            } else {
                total[s] += k;
            }
            s ^= val;
        }
        return ans;
    }
}
```

```go [sol4-Golang]
func countTriplets(arr []int) (ans int) {
    cnt := map[int]int{}
    total := map[int]int{}
    s := 0
    for k, val := range arr {
        if m, has := cnt[s^val]; has {
            ans += m*k - total[s^val]
        }
        cnt[s]++
        total[s] += k
        s ^= val
    }
    return
}
```

```Python [sol4-Python3]
class Solution:
    def countTriplets(self, arr: List[int]) -> int:
        cnt, total = Counter(), Counter()
        ans = s = 0

        for k, val in enumerate(arr):
            if (t := s ^ val) in cnt:
                ans += cnt[t] * k - total[t]
            cnt[s] += 1
            total[s] += k
            s = t

        return ans
```

```JavaScript [sol4-JavaScript]
var countTriplets = function(arr) {
    const cnt = new Map(), total = new Map();
    let ans = 0, s = 0;

    for (const [k, val] of arr.entries()) {
        const t = s ^ val;
        if (cnt.has(t)) {
            ans += cnt.get(t) * k - total.get(t);
        }
        cnt.set(s, (cnt.get(s) || 0) + 1);
        total.set(s, (total.get(s) || 0) + k);
        s = t;
    }
    return ans;
};
```

```C [sol4-C]
struct HashTable {
    int val, key;
    UT_hash_handle hh;
};

bool count(struct HashTable* hashTable, int x) {
    struct HashTable* tmp;
    HASH_FIND_INT(hashTable, &x, tmp);
    return tmp != NULL;
}

int getValue(struct HashTable* hashTable, int x) {
    struct HashTable* tmp;
    HASH_FIND_INT(hashTable, &x, tmp);
    return tmp == NULL ? 0 : tmp->val;
}

void addValue(struct HashTable** hashTable, int x, int y) {
    struct HashTable* tmp;
    HASH_FIND_INT(*hashTable, &x, tmp);
    if (tmp == NULL) {
        tmp = malloc(sizeof(struct HashTable));
        tmp->key = x;
        tmp->val = y;
        HASH_ADD_INT(*hashTable, key, tmp);
    } else {
        tmp->val += y;
    }
}

int countTriplets(int* arr, int arrSize) {
    int n = arrSize;
    struct HashTable *cnt = NULL, *total = NULL;
    int ans = 0, s = 0;
    for (int k = 0; k < n; ++k) {
        int val = arr[k];
        if (count(cnt, s ^ val)) {
            ans += getValue(cnt, s ^ val) * k - getValue(total, s ^ val);
        }
        addValue(&cnt, s, 1);
        addValue(&total, s, k);
        s ^= val;
    }
    return ans;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\textit{arr}$ çš„é•¿åº¦ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ $O(n)$ çš„ç©ºé—´å­˜å‚¨ä¸¤ä¸ªå“ˆå¸Œè¡¨ã€‚