# 2021å¹´06æœˆ18æ—¥ code
<a href="https://toutiao.io/k/77iozz6">è·Ÿ Kafka å­¦æŠ€æœ¯ç³»åˆ—ä¹‹æ—¶é—´è½®</a><br /><a href="https://toutiao.io/k/ow2rhiz">[æ¨è] Linux è°ƒåº¦ç³»ç»Ÿå…¨æ™¯æŒ‡å—ï¼ˆç»ˆç»“ç¯‡ï¼‰</a><br /><a href="https://toutiao.io/k/3xscqep">[æ¨è] ä¸€æ–‡ç†è§£ Java ä¸­çš„ SPI æœºåˆ¶</a><br /><a href="https://toutiao.io/k/2rcud9q">[æ¨è] Redis å­˜å‚¨å¯¹è±¡ä¿¡æ¯æ˜¯ç”¨ Hash è¿˜æ˜¯ String</a><br /><a href="https://toutiao.io/k/85kvlje">[æ¨è] é¢è¯•é¢˜ï¼šMySQL ä¸€æ£µ B+ æ ‘èƒ½å­˜å¤šå°‘æ¡æ•°æ®ï¼Ÿ</a><br /><a href="https://toutiao.io/k/a7bxrhs">[æ¨è] æœ‰èµ TCP ç½‘ç»œç¼–ç¨‹æœ€ä½³å®è·µ</a><br /><a href="https://toutiao.io/k/a3gplbq">[æ¨è] ä¸€æ–‡ç†è§£ Redis åº•å±‚æ•°æ®ç»“æ„</a><br /><a href="https://toutiao.io/k/mr1knwm">[æ¨è] å¾®æœåŠ¡æ‹†åˆ†ä¹‹é“</a><br /><a href="https://toutiao.io/k/xjnx4kp">[æ¨è] æ­å·æŸå¤§å‚ï¼šMySQL è¿ç¯é—®</a><br /><a href="https://toutiao.io/k/qnyxbs9">[æ¨è] æƒŠï¼è¿™ä¸ª Go å¼€æºé¡¹ç›®å·ç§°ã€Œä¸æ”¹ä¸€è¡Œä»£ç åšç§’æ€ã€</a><br /><a href="https://toutiao.io/k/kkc4ght">[æ¨è] åˆ©ç”¨ Kubernetes æ­å»ºä¾¿æºå¼å¼€å‘ç¯å¢ƒä¹‹ MySQL å’Œ Redis</a><br /><a href="https://toutiao.io/k/b9vlrcu">[æ¨è] ç½‘ç»œè¿æ¥å­˜åœ¨å¤§é‡ time_wait å’Œ close_wait çš„åŸå› ä»¥åŠè§£å†³æ–¹æ³•</a><br /><hr /><a href="https://github.com/nushell/nushell">A new type of shell</a><br /><a href="https://github.com/thanos-io/thanos">Highly available Prometheus setup with long term storage capabilities. A CNCF Incubating project.</a><br /><a href="https://github.com/keras-team/keras">Deep Learning for humans</a><br /><a href="https://github.com/vercel/next.js">The React Framework</a><br /><a href="https://github.com/chromium/chromium">The official GitHub mirror of the Chromium source</a><br /><a href="https://github.com/google/fully-homomorphic-encryption">Libraries and tools to perform fully homomorphic encryption operations on an encrypted data set.</a><br /><a href="https://github.com/AkashSingh3031/The-Complete-FAANG-Preparation">This repository contains all the DSA (Data-Structures, Algorithms, 450 DSA by Love Babbar Bhaiya, FAANG Questions), Technical Subjects (OS + DBMS + SQL + CN + OOPs) Theory+Questions, FAANG Interview questions, and Miscellaneous Stuff (Programming MCQs, Puzzles, Aptitude, Reasoning). The Programming languages used for demonstration are C++, Pythoâ€¦</a><br /><a href="https://github.com/programthink/books">ã€ç¼–ç¨‹éšæƒ³ã€‘æ”¶è—çš„ç”µå­ä¹¦æ¸…å•ï¼ˆå¤šä¸ªå­¦ç§‘ï¼Œå«ä¸‹è½½é“¾æ¥ï¼‰</a><br /><a href="https://github.com/vxunderground/MalwareSourceCode">Collection of malware source code for a variety of platforms in an array of different programming languages.</a><br /><a href="https://github.com/monyhar/monyhar-lite">æ¢¦å¼˜æµè§ˆå™¨ è‡ªä¸»ç ”å‘ç‰ˆæœ¬ - å®Œå…¨è‡ªä¸»ç ”å‘ï¼Œæ‰“ç ´å›½å¤–å„æ–­ï¼Œæ¯” Chrome å¿« 600%ã€‚ç¼ºå°‘ä¸Šç½‘åŠŸèƒ½ã€‚</a><br /><a href="https://github.com/lydiahallie/javascript-questions">A long list of (advanced) JavaScript questions, and their explanations âœ¨</a><br /><a href="https://github.com/ibraheemdev/modern-unix">A collection of modern/faster/saner alternatives to common unix commands.</a><br /><a href="https://github.com/Asabeneh/30-Days-Of-JavaScript">30 days of JavaScript programming challenge is a step-by-step guide to learn JavaScript programming language in 30 days. This challenge may take more than 100 days, please just follow your own pace.</a><br /><a href="https://github.com/massgravel/Microsoft-Activation-Scripts">A collection of scripts for activating Microsoft products using HWID / KMS38 / Online KMS activation methods with a focus on open-source code, less antivirus detection and user-friendliness.</a><br /><a href="https://github.com/trimstray/the-book-of-secret-knowledge">A collection of inspiring lists, manuals, cheatsheets, blogs, hacks, one-liners, cli/web tools and more.</a><br /><a href="https://github.com/neuralchen/SimSwap">The official project of SimSwap (ACM MM 2020)</a><br /><a href="https://github.com/programthink/zhao">ã€ç¼–ç¨‹éšæƒ³ã€‘æ•´ç†çš„ã€Šå¤ªå­å…šå…³ç³»ç½‘ç»œã€‹ï¼Œä¸“é—¨æ­éœ²èµµå›½çš„æƒè´µ</a><br /><a href="https://github.com/jina-ai/jina">Cloud-native neural search framework for any kind of data</a><br /><a href="https://github.com/hotwired/turbo-rails">Use Turbo in your Ruby on Rails app</a><br /><a href="https://github.com/seata/seata">ğŸ”¥ Seata is an easy-to-use, high-performance, open source distributed transaction solution.</a><br /><a href="https://github.com/allenai/allennlp">An open-source NLP research library, built on PyTorch.</a><br /><a href="https://github.com/siduck76/NvChad">beautiful neovim setup configured in lua</a><br /><a href="https://github.com/dotnet/AspNetCore.Docs">Documentation for ASP.NET Core</a><br /><a href="https://github.com/yunjey/pytorch-tutorial">PyTorch Tutorial for Deep Learning Researchers</a><br /><a href="https://github.com/neon-age/Smart-Inspector">Keeps your screen real-estate clean with refined, compact UX.</a><br /><hr />æœ€å°å¥½è¿›åˆ¶<br /><p>å¯¹äºç»™å®šçš„æ•´æ•° n, å¦‚æœnçš„kï¼ˆk&gt;=2ï¼‰è¿›åˆ¶æ•°çš„æ‰€æœ‰æ•°ä½å…¨ä¸º1ï¼Œåˆ™ç§°&nbsp;kï¼ˆk&gt;=2ï¼‰æ˜¯ n çš„ä¸€ä¸ª<em><strong>å¥½è¿›åˆ¶</strong></em>ã€‚</p>

<p>ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ç»™å‡º n, ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å› n çš„æœ€å°å¥½è¿›åˆ¶ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>&quot;13&quot;
<strong>è¾“å‡ºï¼š</strong>&quot;3&quot;
<strong>è§£é‡Šï¼š</strong>13 çš„ 3 è¿›åˆ¶æ˜¯ 111ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>&quot;4681&quot;
<strong>è¾“å‡ºï¼š</strong>&quot;8&quot;
<strong>è§£é‡Šï¼š</strong>4681 çš„ 8 è¿›åˆ¶æ˜¯ 11111ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>&quot;1000000000000000000&quot;
<strong>è¾“å‡ºï¼š</strong>&quot;999999999999999999&quot;
<strong>è§£é‡Šï¼š</strong>1000000000000000000 çš„ 999999999999999999 è¿›åˆ¶æ˜¯ 11ã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ol>
	<li>nçš„å–å€¼èŒƒå›´æ˜¯&nbsp;[3, 10^18]ã€‚</li>
	<li>è¾“å…¥æ€»æ˜¯æœ‰æ•ˆä¸”æ²¡æœ‰å‰å¯¼ 0ã€‚</li>
</ol>

<p>&nbsp;</p>
<br />#### æ–¹æ³•ä¸€ï¼šæ•°å­¦

**æ€è·¯åŠè§£æ³•**

å‡è®¾æ­£æ•´æ•° $n$ åœ¨ $k~(k \geq 2)$ è¿›åˆ¶ä¸‹çš„æ‰€æœ‰æ•°ä½éƒ½ä¸º $1$ï¼Œä¸”ä½æ•°ä¸º $m + 1$ï¼Œé‚£ä¹ˆæœ‰ï¼š

$$
n = k^0 + k^1 + k^2 + \dots + k^m\tag{1}
$$

æˆ‘ä»¬é¦–å…ˆè®¨è®ºä¸¤ç§ç‰¹æ®Šæƒ…å†µï¼š

- $m=0$ï¼Œæ­¤æ—¶ $n=1$ï¼Œè€Œé¢˜ç›®ä¿è¯ $n \geq 3$ï¼Œæ‰€ä»¥æœ¬é¢˜ä¸­ $m>0$ã€‚
- $m=1$ï¼Œæ­¤æ—¶ $n=(11)_k$ï¼Œå³ $k=n-1\geq 2$ï¼Œè¿™ä¿è¯äº†æœ¬é¢˜æœ‰è§£ã€‚

ç„¶åæˆ‘ä»¬åˆ†åˆ«è¯æ˜ä¸€èˆ¬æƒ…å†µä¸‹çš„ä¸¤ä¸ªç»“è®ºï¼Œä»¥å¸®åŠ©è§£å†³æœ¬é¢˜ã€‚

**ç»“è®ºä¸€ï¼š$m < \log_k n$** 

æ³¨æ„åˆ° $(1)$ å¼å³ä¾§æ˜¯ä¸€ä¸ªé¦–é¡¹ä¸º $1$ã€å…¬æ¯”ä¸º $k$ çš„ç­‰æ¯”æ•°åˆ—ï¼Œåˆ©ç”¨ç­‰æ¯”æ•°åˆ—æ±‚å’Œå…¬å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š

$$
n = \frac{1 - k^{m+1}}{1 - k}
$$
 
å¯¹å…¬å¼è¿›è¡Œå˜æ¢å¯å¾—ï¼š

$$
k^{m+1} = kn - n + 1 < kn
$$

ç§»é¡¹å¹¶åŒ–ç®€å¯å¾—ï¼š

$$
m < \log_k n
$$

è¿™ä¸ªç»“è®ºå¸®åŠ©æˆ‘ä»¬é™åˆ¶äº† $m$ çš„èŒƒå›´ï¼Œæœ¬é¢˜ä¸­ $3 \leq n \leq 10^{18}$ ä¸” $k \geq 2$ï¼Œæ‰€ä»¥ $m < \log_2 10^{18} < 60$ã€‚

**ç»“è®ºäºŒï¼š$k = \lfloor \sqrt[m]{n} \rfloor$** 

ä¾æ® $(1)$ å¼ï¼Œå¯çŸ¥ï¼š

$$
n = k^0 + k^1 + k^2 + \dots + k^m > k^m \tag{2}
$$

ä¾æ®äºŒé¡¹å¼å®šç†å¯çŸ¥ï¼š

$$
(k+1)^m = \binom{m}{0}k^0 + \binom{m}{1}k^1 + \binom{m}{2}k^2 + \dots + \binom{m}{m}k^m
$$

å› ä¸ºå½“ $m>1$ æ—¶ï¼Œ$\forall i \in [1,m-1], \dbinom{m}{i} > 1$ï¼Œæ‰€ä»¥æœ‰ï¼š

$$
\begin{aligned}
(k+1)^m &= \binom{m}{0}k^0 + \binom{m}{1}k^1 + \binom{m}{2}k^2 + \dots + \binom{m}{m}k^m \\
&> k^0 + k^1 + k^2 + \dots + k^m = n \tag{3}
\end{aligned}
$$

ç»“åˆ $(2)(3)$ ä¸¤å¼å¯çŸ¥ï¼Œå½“ $m>1$ æ—¶ï¼Œæœ‰ $k^m < n < (k+1)^m$ã€‚ä¸¤è¾¹åŒæ—¶å¼€æ–¹å¾—ï¼š

$$
k < \sqrt[m]{n} < k+1
$$

ä¾æ®è¿™ä¸ªå…¬å¼æˆ‘ä»¬çŸ¥é“ï¼Œ$\sqrt[m]{n}$ å¿…ç„¶ä¸ºä¸€ä¸ªå°æ•°ï¼Œä¸” $k$ ä¸º $\sqrt[m]{n}$ çš„æ•´æ•°éƒ¨åˆ†ï¼Œå³ $k = \lfloor \sqrt[m]{n} \rfloor$ã€‚

è¿™ä¸ªç»“è®ºå¸®åŠ©æˆ‘ä»¬åœ¨ $n$ å’Œ $m$ å·²çŸ¥çš„æƒ…å†µä¸‹å¿«é€Ÿç¡®å®š $k$ çš„å€¼ã€‚

ç»¼åˆä¸Šè¿°ä¸¤ä¸ªç»“è®ºï¼Œä¾æ®ç»“è®ºä¸€ï¼Œæˆ‘ä»¬çŸ¥é“ $m$ çš„å–å€¼èŒƒå›´ä¸º $[1,\log_k n)$ï¼Œä¸” $m = 1$ æ—¶å¿…ç„¶æœ‰è§£ã€‚å› ä¸ºéšç€ $m$ çš„å¢å¤§ï¼Œ$k$ ä¸æ–­å‡å°ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä»å¤§åˆ°å°æ£€æŸ¥æ¯ä¸€ä¸ª $m$ å¯èƒ½çš„å–å€¼ï¼Œåˆ©ç”¨ç»“è®ºäºŒå¿«é€Ÿç®—å‡ºå¯¹åº”çš„ $k$ å€¼ï¼Œç„¶åæ ¡éªŒè®¡ç®—å‡ºçš„ $k$ å€¼æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚å¦‚æœ $k$ å€¼æœ‰æ•ˆï¼Œæˆ‘ä»¬å³å¯è¿”å›ç»“æœã€‚

åœ¨å®é™…ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆç®—å‡º $m$ å–å€¼çš„ä¸Šç•Œ $\textit{mMax}$ï¼Œç„¶åä»ä¸Šç•Œå¼€å§‹å‘ä¸‹æšä¸¾ $m$ å€¼ï¼Œå¦‚æœå½“å‰ $m$ å€¼å¯¹åº”çš„ $k$ åˆæ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å³å¯è¿”å›å½“å‰çš„ $k$ å€¼ã€‚å¦‚æœæˆ‘ä»¬ä¸€ç›´æ£€æŸ¥åˆ° $m=2$ éƒ½æ²¡èƒ½æ‰¾åˆ°ç­”æ¡ˆï¼Œé‚£ä¹ˆæ­¤æ—¶å³å¯ç›´æ¥è¿”å› $m=1$ å¯¹åº”çš„ $k$ å€¼ï¼š$n-1$ã€‚

**ä»£ç **

```C++ [sol1-C++]
class Solution {
public:
    string smallestGoodBase(string n) {
        long nVal = stol(n);
        int mMax = floor(log(nVal) / log(2));
        for (int m = mMax; m > 1; m--) {
            int k = pow(nVal, 1.0 / m);
            long mul = 1, sum = 1;
            for (int i = 0; i < m; i++) {
                mul *= k;
                sum += mul;
            }
            if (sum == nVal) {
                return to_string(k);
            }
        }
        return to_string(nVal - 1);
    }
};
```

```Java [sol1-Java]
class Solution {
    public String smallestGoodBase(String n) {
        long nVal = Long.parseLong(n);
        int mMax = (int) Math.floor(Math.log(nVal) / Math.log(2));
        for (int m = mMax; m > 1; m--) {
            int k = (int) Math.pow(nVal, 1.0 / m);
            long mul = 1, sum = 1;
            for (int i = 0; i < m; i++) {
                mul *= k;
                sum += mul;
            }
            if (sum == nVal) {
                return Integer.toString(k);
            }
        }
        return Long.toString(nVal - 1);
    }
}
```

```C# [sol1-C#]
public class Solution {
    public string SmallestGoodBase(string n) {
        long nVal = long.Parse(n);
        int mMax = (int) Math.Floor(Math.Log(nVal) / Math.Log(2));
        for (int m = mMax; m > 1; m--) {
            int k = (int) Math.Pow(nVal, 1.0 / m);
            long mul = 1, sum = 1;
            for (int i = 0; i < m; i++) {
                mul *= k;
                sum += mul;
            }
            if (sum == nVal) {
                return k.ToString();
            }
        }
        return (nVal - 1).ToString();
    }
}
```

```JavaScript [sol1-JavaScript]
var smallestGoodBase = function(n) {
    const nVal = parseInt(n);
    const mMax = Math.floor(Math.log(nVal) / Math.log(2));
    for (let m = mMax; m > 1; m--) {
        const k = BigInt(Math.floor(Math.pow(nVal, 1.0 / m)));
        if (k > 1) {
            let mul = BigInt(1), sum = BigInt(1);
            for (let i = 1; i <= m; i++) {
                mul *= k;
                sum += mul;
            }
            if (sum === BigInt(n)) {
                return k + '';
            }
        }
    }
    return (BigInt(n) - BigInt(1)) + '';
};
```

```go [sol1-Golang]
func smallestGoodBase(n string) string {
    nVal, _ := strconv.Atoi(n)
    mMax := bits.Len(uint(nVal)) - 1
    for m := mMax; m > 1; m-- {
        k := int(math.Pow(float64(nVal), 1/float64(m)))
        mul, sum := 1, 1
        for i := 0; i < m; i++ {
            mul *= k
            sum += mul
        }
        if sum == nVal {
            return strconv.Itoa(k)
        }
    }
    return strconv.Itoa(nVal - 1)
}
```

```C [sol1-C]
char* smallestGoodBase(char* n) {
    long nVal = atol(n);
    int mMax = floor(log(nVal) / log(2));
    char* ret = malloc(sizeof(char) * (mMax + 1));
    for (int m = mMax; m > 1; m--) {
        int k = pow(nVal, 1.0 / m);
        long mul = 1, sum = 1;
        for (int i = 0; i < m; i++) {
            mul *= k;
            sum += mul;
        }
        if (sum == nVal) {
            sprintf(ret, "%lld", k);
            return ret;
        }
    }
    sprintf(ret, "%lld", nVal - 1);
    return ret;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(\log^2 n)$ã€‚è‡³å¤šéœ€è¦è¿›è¡Œ $O(\log n)$ æ¬¡æ£€æŸ¥ï¼Œæ¯æ¬¡æ£€æŸ¥çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(\log n)$ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚åªéœ€è¦å¸¸æ•°çš„ç©ºé—´ä¿å­˜è‹¥å¹²å˜é‡ã€‚