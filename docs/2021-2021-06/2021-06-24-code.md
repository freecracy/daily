# 2021å¹´06æœˆ24æ—¥ code
<a href="https://toutiao.io/k/dr4u4yt">Redisï¼šæˆ‘æ˜¯å¦‚ä½•ä¸å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡çš„</a><br /><a href="https://toutiao.io/k/kkvemjf">Redis æœ€ä½³å®è·µï¼š7 ä¸ªç»´åº¦ + 43 æ¡ä½¿ç”¨è§„èŒƒï¼Œå¸¦ä½ å½»åº•ç©è½¬ Redisï¼ˆé™„å®è·µæ¸…å•ï¼‰</a><br /><a href="https://toutiao.io/k/z9fx1fc">æœ‰äº† WebClient è¿˜åœ¨ç”¨ RestTemplateï¼Ÿ</a><br /><a href="https://toutiao.io/k/yyrg9dw">ä½ æœ‰åš Code Review å—ï¼Ÿ</a><br /><a href="https://toutiao.io/k/mobj8bo">é¸¿è’™ç³»ç»Ÿç ”ç©¶ç¬¬ä¸€æ­¥ï¼šä»æºç æ„å»ºç³»ç»Ÿé•œåƒ</a><br /><a href="https://toutiao.io/k/74x2gyc">ZooKeeper é›†ç¾¤æ‹’ç»æœåŠ¡</a><br /><a href="https://toutiao.io/k/f8d95fp">ä¸€æ–‡ç†è§£ MySQL çš„äº‹åŠ¡åŸåˆ™ä¸äº‹åŠ¡éš”ç¦»</a><br /><a href="https://toutiao.io/k/hdv64nz">Flutter çš„ Widgetï¼Œåˆ»æ„åŠ ä¸Š constï¼ŒçœŸçš„å€¼å¾—å—ï¼Ÿ</a><br /><a href="https://toutiao.io/k/tofwshl">[è¯‘] åˆ›å»ºå’Œåˆ†æ Java å †è½¬å‚¨ (Heap Dumps)</a><br /><a href="https://toutiao.io/k/in7y9nd">é¢å¯¹å¤æ‚ä¸šåŠ¡æ¶æ„ï¼Œé˜¿é‡Œæ¶æ„å¸ˆæ˜¯å¦‚ä½•åšçš„ï¼Ÿ</a><br /><a href="https://toutiao.io/k/md02mcl">FP-Growth ç®—æ³•åŸç†ã€Spark å®ç°å’Œåº”ç”¨ä»‹ç»</a><br /><a href="https://toutiao.io/k/z02zptp">ä» 0 åˆ° 1 å®ç°æµè§ˆå™¨ç«¯æ²™ç›’è¿è¡Œç¯å¢ƒ</a><br /><a href="https://toutiao.io/k/ht6rgp1">å…«è‚¡æ–‡éªšå¥—è·¯ä¹‹ Java åŸºç¡€</a><br /><a href="https://toutiao.io/k/nnpqk6o">dsymutil ç¨‹åºè°ƒè¯•ç¬¦å·å¸®åŠ©å·¥å…·</a><br /><a href="https://toutiao.io/k/rnk9wn6">äº‘åŸç”Ÿéƒ¨ç½²ä¹‹ Helm æœ€ä½³å®è·µï¼ˆä¸Šï¼‰</a><br /><a href="https://toutiao.io/k/4vfw0qd">Android WebView è·å–ç½‘é¡µæºç å®è·µä¸é—®é¢˜è§£å†³</a><br /><a href="https://toutiao.io/k/ooq11o0">ä» Dagger è¿ç§»åˆ° Hilt å¯å¸¦æ¥çš„æ”¶ç›Š</a><br /><a href="https://toutiao.io/k/yby3r0f">commons-collections ååºåˆ—åŒ–åˆ©ç”¨é“¾åˆ†æï¼ˆä¸‰ï¼‰</a><br /><a href="https://toutiao.io/k/0du3q2s">å…¨æµé‡å…¥ä¾µæ£€æµ‹ç³»ç»Ÿçš„æ€§èƒ½åˆ†æ</a><br /><a href="https://toutiao.io/k/rj51l7q">ç”¨çº¯ JavaScript æ’¸ä¸€ä¸ª MVC æ¡†æ¶</a><br /><a href="https://toutiao.io/k/pbwl6pl">[æ¨è] 95% çš„ç®—æ³•éƒ½æ˜¯åŸºäºè¿™ 6 ç§ç®—æ³•æ€æƒ³</a><br /><a href="https://toutiao.io/k/a7bxrhs">[æ¨è] æœ‰èµ TCP ç½‘ç»œç¼–ç¨‹æœ€ä½³å®è·µ</a><br /><a href="https://toutiao.io/k/3kwp297">[æ¨è] æœˆè–ªä¸¤ä¸‡ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„ç¼–ç¨‹æ¨¡å‹</a><br /><a href="https://toutiao.io/k/xhidp2b">[æ¨è] ä¸€æ–‡é€šå…³è‹¦æ¶©éš¾æ‡‚çš„ Java æ³›å‹</a><br /><a href="https://toutiao.io/k/l55l3jp">[æ¨è] è¿™å¯èƒ½æ˜¯æœ€è½»é‡é«˜æ•ˆçš„è¿ç»´ç›‘æ§å·¥å…·ï¼šå¼€æº WGCLOUD</a><br /><a href="https://toutiao.io/k/96b5kbd">[æ¨è] é¢†åŸŸé©±åŠ¨è®¾è®¡ã€å¯è§†åŒ–ä¸é—ç•™ç³»ç»Ÿçš„å¾®æœåŠ¡æ”¹é€ </a><br /><a href="https://toutiao.io/k/kkc4ght">[æ¨è] åˆ©ç”¨ Kubernetes æ­å»ºä¾¿æºå¼å¼€å‘ç¯å¢ƒä¹‹ MySQL å’Œ Redis</a><br /><a href="https://toutiao.io/k/92nisj7">[æ¨è] é«˜ååã€ä½å»¶è¿Ÿ Java åº”ç”¨çš„ GC ä¼˜åŒ–å®è·µ</a><br /><a href="https://toutiao.io/k/t9ic9wp">[æ¨è] å¾’æ‰‹ç”¨ Go å†™ä¸ª Redis æœåŠ¡å™¨</a><br /><hr /><a href="https://github.com/rocketseat-education/nlw6-discover"></a><br /><a href="https://github.com/six-ddc/plow">A high-performance HTTP benchmarking tool with real-time web UI and terminal displaying</a><br /><a href="https://github.com/flutter/flutter">Flutter makes it easy and fast to build beautiful apps for mobile and beyond.</a><br /><a href="https://github.com/n8n-io/n8n">Free and open fair-code licensed node based Workflow Automation Tool. Easily automate tasks across different services.</a><br /><a href="https://github.com/PaddlePaddle/PaddleClas">A treasure chest for visual recognition powered by PaddlePaddle</a><br /><a href="https://github.com/fmtlib/fmt">A modern formatting library</a><br /><a href="https://github.com/chrisseaton/rhizome">A JIT for Ruby, implemented in pure Ruby</a><br /><a href="https://github.com/toly1994328/FlutterUnit">ã€Flutter é›†å½•æŒ‡å— Appã€‘The unity of flutter, The unity of coder.</a><br /><a href="https://github.com/Sentdex/GANTheftAuto"></a><br /><a href="https://github.com/facebookresearch/Kats">Kats, a kit to analyze time series data, a lightweight, easy-to-use, generalizable, and extendable framework to perform time series analysis, from understanding the key statistics and characteristics, detecting change points and anomalies, to forecasting future trends.</a><br /><a href="https://github.com/maaslalani/slides">Terminal based presentation tool</a><br /><a href="https://github.com/kdn251/interviews">Everything you need to know to get the job.</a><br /><a href="https://github.com/dfeneyrou/palanteer">High performance visual profiler, debugger, tests enabler for C++ and Python</a><br /><a href="https://github.com/rocketseat-education/nlw-06-nodejs"></a><br /><a href="https://github.com/kwai/DouZero">[ICML 2021] DouZero: Mastering DouDizhu with Self-Play Deep Reinforcement Learning | æ–—åœ°ä¸»AI</a><br /><a href="https://github.com/KarenOk/whatsapp-web-clone">Clone of Whatsapp Web's current UI.</a><br /><a href="https://github.com/microsoft/Web-Dev-For-Beginners">24 Lessons, 12 Weeks, Get Started as a Web Developer</a><br /><a href="https://github.com/python-discord/cj8-qualifier">CJ Qual</a><br /><a href="https://github.com/login?return_to=%2Ftrekhleb%2Fjavascript-algorithms">ğŸ“ Algorithms and data structures implemented in JavaScript with explanations and links to further readings</a><br /><a href="https://github.com/mperham/sidekiq">Simple, efficient background processing for Ruby</a><br /><a href="https://github.com/unit8co/darts">A python library for easy manipulation and forecasting of time series.</a><br /><a href="https://github.com/tuteng/Best-websites-a-programmer-should-visit-zh">ç¨‹åºå‘˜åº”è¯¥è®¿é—®çš„æœ€ä½³ç½‘ç«™ä¸­æ–‡ç‰ˆ</a><br /><a href="https://github.com/ibraheemdev/modern-unix">A collection of modern/faster/saner alternatives to common unix commands.</a><br /><a href="https://github.com/sdmg15/Best-websites-a-programmer-should-visit">ğŸ”— Some useful websites for programmers.</a><br /><a href="https://github.com/OffcierCia/DeFi-Developer-Road-Map">DeFi Developer Road Map. Feel free to submit a pull request, with anything from small fixes to translations, docs or tools you'd like to add.</a><br /><hr />ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°<br /><p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ <code>points</code> ï¼Œå…¶ä¸­ <code>points[i] = [x<sub>i</sub>, y<sub>i</sub>]</code> è¡¨ç¤º <strong>X-Y</strong> å¹³é¢ä¸Šçš„ä¸€ä¸ªç‚¹ã€‚æ±‚æœ€å¤šæœ‰å¤šå°‘ä¸ªç‚¹åœ¨åŒä¸€æ¡ç›´çº¿ä¸Šã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2021/02/25/plane1.jpg" style="width: 300px; height: 294px;" />
<pre>
<strong>è¾“å…¥ï¼š</strong>points = [[1,1],[2,2],[3,3]]
<strong>è¾“å‡ºï¼š</strong>3
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2021/02/25/plane2.jpg" style="width: 300px; height: 294px;" />
<pre>
<strong>è¾“å…¥ï¼š</strong>points = [[1,1],[3,2],[5,3],[4,1],[2,3],[1,4]]
<strong>è¾“å‡ºï¼š</strong>4
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 <= points.length <= 300</code></li>
	<li><code>points[i].length == 2</code></li>
	<li><code>-10<sup>4</sup> <= x<sub>i</sub>, y<sub>i</sub> <= 10<sup>4</sup></code></li>
	<li><code>points</code> ä¸­çš„æ‰€æœ‰ç‚¹ <strong>äº’ä¸ç›¸åŒ</strong></li>
</ul>
<br />#### æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨

**æ€è·¯åŠè§£æ³•**

æˆ‘ä»¬å¯ä»¥è€ƒè™‘æšä¸¾æ‰€æœ‰çš„ç‚¹ï¼Œå‡è®¾ç›´çº¿ç»è¿‡è¯¥ç‚¹æ—¶ï¼Œè¯¥ç›´çº¿æ‰€èƒ½ç»è¿‡çš„æœ€å¤šçš„ç‚¹æ•°ã€‚

å‡è®¾æˆ‘ä»¬å½“å‰æšä¸¾åˆ°ç‚¹ $i$ï¼Œå¦‚æœç›´çº¿åŒæ—¶ç»è¿‡å¦å¤–ä¸¤ä¸ªä¸åŒçš„ç‚¹ $j$ å’Œ $k$ï¼Œé‚£ä¹ˆå¯ä»¥å‘ç°ç‚¹ $i$ å’Œç‚¹ $j$ æ‰€è¿ç›´çº¿çš„æ–œç‡æ°ç­‰äºç‚¹ $i$ å’Œç‚¹ $k$ æ‰€è¿ç›´çº¿çš„æ–œç‡ã€‚

äºæ˜¯æˆ‘ä»¬å¯ä»¥ç»Ÿè®¡å…¶ä»–æ‰€æœ‰ç‚¹ä¸ç‚¹ $i$ æ‰€è¿ç›´çº¿çš„æ–œç‡ï¼Œå‡ºç°æ¬¡æ•°æœ€å¤šçš„æ–œç‡å³ä¸ºç»è¿‡ç‚¹æ•°æœ€å¤šçš„ç›´çº¿çš„æ–œç‡ï¼Œå…¶ç»è¿‡çš„ç‚¹æ•°ä¸ºè¯¥æ–œç‡å‡ºç°çš„æ¬¡æ•°åŠ ä¸€ï¼ˆç‚¹ $i$ è‡ªèº«ä¹Ÿè¦è¢«ç»Ÿè®¡ï¼‰ã€‚

**å¦‚ä½•è®°å½•æ–œç‡**

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæµ®ç‚¹æ•°ç±»å‹å¯èƒ½å› ä¸ºç²¾åº¦ä¸å¤Ÿè€Œæ— æ³•è¶³å¤Ÿç²¾ç¡®åœ°è¡¨ç¤ºæ¯ä¸€ä¸ªæ–œç‡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ¢ä¸€ç§æ–¹æ³•æ¥è®°å½•æ–œç‡ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–œç‡å¯ä»¥è¡¨ç¤ºä¸º $\textit{slope} = \dfrac{\Delta y}{\Delta x}$ çš„å½¢å¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨åˆ†å­å’Œåˆ†æ¯ç»„æˆçš„äºŒå…ƒç»„æ¥ä»£è¡¨æ–œç‡ã€‚ä½†æ³¨æ„åˆ°å­˜åœ¨å½¢å¦‚ $\dfrac{1}{2}=\dfrac{2}{4}$ è¿™æ ·ä¸¤ä¸ªäºŒå…ƒç»„ä¸åŒï¼Œä½†å®é™…ä¸Šä¸¤åˆ†æ•°çš„å€¼ç›¸åŒçš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†åˆ†æ•° $\dfrac{\Delta y}{\Delta x}$ åŒ–ç®€ä¸ºæœ€ç®€åˆ†æ•°çš„å½¢å¼ã€‚

å°†åˆ†å­å’Œåˆ†æ¯åŒæ—¶é™¤ä»¥äºŒè€…ç»å¯¹å€¼çš„æœ€å¤§å…¬çº¦æ•°ï¼Œå¯å¾—äºŒå…ƒç»„ $\Big(\dfrac{\Delta x}{\gcd(|\Delta x|,|\Delta y|)},\dfrac{\Delta y}{\gcd(|\Delta x|,|\Delta y|)}\Big)$ã€‚ä»¤ $\textit{mx}=\dfrac{\Delta x}{\gcd(|\Delta x|,|\Delta y|)}$ï¼Œ$\textit{my}=\dfrac{\Delta y}{\gcd(|\Delta x|,|\Delta y|)}$ï¼Œåˆ™ä¸Šè¿°åŒ–ç®€åçš„äºŒå…ƒç»„ä¸º $(\textit{mx},\textit{my})$ã€‚

æ­¤å¤–ï¼Œå› ä¸ºåˆ†å­åˆ†æ¯å¯èƒ½å­˜åœ¨è´Ÿæ•°ï¼Œä¸ºäº†é˜²æ­¢å‡ºç°å½¢å¦‚ $\dfrac{-1}{2}=\dfrac{1}{-2}$ çš„æƒ…å†µï¼Œæˆ‘ä»¬è¿˜éœ€è¦è§„å®šåˆ†å­ä¸ºéè´Ÿæ•´æ•°ï¼Œå¦‚æœ $\textit{my}$ ä¸ºè´Ÿæ•°ï¼Œæˆ‘ä»¬å°†äºŒå…ƒç»„ä¸­ä¸¤ä¸ªæ•°åŒæ—¶å–ç›¸åæ•°å³å¯ã€‚

ç‰¹åˆ«åœ°ï¼Œè€ƒè™‘åˆ° $\textit{mx}$ å’Œ $\textit{my}$ ä¸¤æ•°å…¶ä¸­æœ‰ä¸€ä¸ªä¸º $0$ çš„æƒ…å†µï¼ˆå› ä¸ºé¢˜ç›®ä¸­ä¸å­˜åœ¨é‡å¤çš„ç‚¹ï¼Œå› æ­¤ä¸å­˜åœ¨ä¸¤æ•°å‡ä¸º $0$ çš„æƒ…å†µï¼‰ï¼Œæ­¤æ—¶ä¸¤æ•°ä¸å­˜åœ¨æ•°å­¦æ„ä¹‰ä¸Šçš„æœ€å¤§å…¬çº¦æ•°ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥ç‰¹åˆ¤è¿™ä¸¤ç§æƒ…å†µã€‚å½“ $\textit{mx}$ ä¸º $0$ æ—¶ï¼Œæˆ‘ä»¬ä»¤ $\textit{my}=1$ï¼›å½“ $\textit{my}$ ä¸º $0$ æ—¶ï¼Œæˆ‘ä»¬ä»¤ $\textit{mx}=1$ å³å¯ã€‚

ç»è¿‡ä¸Šè¿°æ“ä½œä¹‹åï¼Œå³å¯å¾—åˆ°æœ€ç»ˆçš„äºŒå…ƒç»„ $(\textit{mx},\textit{my})$ã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œå› ä¸ºç‚¹çš„æ¨ªçºµåæ ‡å–å€¼èŒƒå›´å‡ä¸º $[-10^4, 10^4]$ï¼Œæ‰€ä»¥æ–œç‡ $\textit{slope} = \dfrac{\textit{my}}{\textit{mx}}$ ä¸­ï¼Œ$\textit{mx}$ è½åœ¨åŒºé—´ $[- 2 \times 10^4, 2 \times 10^4]$ å†…ï¼Œ$\textit{my}$ è½åœ¨åŒºé—´ $[0, 2 \times 10^4]$ å†…ã€‚æ³¨æ„åˆ° $32$ ä½æ•´æ•°çš„èŒƒå›´è¿œè¶…è¿™ä¸¤ä¸ªåŒºé—´ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨å•ä¸ª $32$ ä½æ•´å‹å˜é‡æ¥è¡¨ç¤ºè¿™ä¸¤ä¸ªæ•´æ•°ã€‚å…·ä½“åœ°ï¼Œæˆ‘ä»¬ä»¤ $\textit{val} = \textit{my} + (2 \times 10^4 + 1) \times \textit{mx}$ å³å¯ã€‚

**ä¼˜åŒ–**

æœ€åæˆ‘ä»¬å†åŠ å››ä¸ªå°ä¼˜åŒ–ï¼š

- åœ¨ç‚¹çš„æ€»æ•°é‡å°äºç­‰äº $2$ çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ€»å¯ä»¥ç”¨ä¸€æ¡ç›´çº¿å°†æ‰€æœ‰ç‚¹ä¸²è”ï¼Œæ­¤æ—¶æˆ‘ä»¬ç›´æ¥è¿”å›ç‚¹çš„æ€»æ•°é‡å³å¯ï¼›
- å½“æˆ‘ä»¬æšä¸¾åˆ°ç‚¹ $i$ æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘ç¼–å·å¤§äº $i$ çš„ç‚¹åˆ°ç‚¹ $i$ çš„æ–œç‡ï¼Œå› ä¸ºå¦‚æœç›´çº¿åŒæ—¶ç»è¿‡ç¼–å·å°äºç‚¹ $i$ çš„ç‚¹ $j$ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬æšä¸¾åˆ° $j$ æ—¶å°±å·²ç»è€ƒè™‘è¿‡è¯¥ç›´çº¿äº†ï¼›
- å½“æˆ‘ä»¬æ‰¾åˆ°ä¸€æ¡ç›´çº¿ç»è¿‡äº†å›¾ä¸­è¶…è¿‡åŠæ•°çš„ç‚¹æ—¶ï¼Œæˆ‘ä»¬å³å¯ä»¥ç¡®å®šè¯¥ç›´çº¿å³ä¸ºç»è¿‡æœ€å¤šç‚¹çš„ç›´çº¿ï¼›
- å½“æˆ‘ä»¬æšä¸¾åˆ°ç‚¹ $i$ï¼ˆå‡è®¾ç¼–å·ä» $0$ å¼€å§‹ï¼‰æ—¶ï¼Œæˆ‘ä»¬è‡³å¤šåªèƒ½æ‰¾åˆ° $n-i$ ä¸ªç‚¹å…±çº¿ã€‚å‡è®¾æ­¤å‰æ‰¾åˆ°çš„å…±çº¿çš„ç‚¹çš„æ•°é‡çš„æœ€å¤§å€¼ä¸º $k$ï¼Œå¦‚æœæœ‰ $k \geq n-i$ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å³å¯åœæ­¢æšä¸¾ï¼Œå› ä¸ºä¸å¯èƒ½å†æ‰¾åˆ°æ›´å¤§çš„ç­”æ¡ˆäº†ã€‚

**ä»£ç **

```C++ [sol1-C++]
class Solution {
public:
    int gcd(int a, int b) {
        return b ? gcd(b, a % b) : a;
    }

    int maxPoints(vector<vector<int>>& points) {
        int n = points.size();
        if (n <= 2) {
            return n;
        }
        int ret = 0;
        for (int i = 0; i < n; i++) {
            if (ret >= n - i || ret > n / 2) {
                break;
            }
            unordered_map<int, int> mp;
            for (int j = i + 1; j < n; j++) {
                int x = points[i][0] - points[j][0];
                int y = points[i][1] - points[j][1];
                if (x == 0) {
                    y = 1;
                } else if (y == 0) {
                    x = 1;
                } else {
                    if (y < 0) {
                        x = -x;
                        y = -y;
                    }
                    int gcdXY = gcd(abs(x), abs(y));
                    x /= gcdXY, y /= gcdXY;
                }
                mp[y + x * 20001]++;
            }
            int maxn = 0;
            for (auto& [_, num] : mp) {
                maxn = max(maxn, num + 1);
            }
            ret = max(ret, maxn);
        }
        return ret;
    }
};
```

```Java [sol1-Java]
class Solution {
    public int maxPoints(int[][] points) {
        int n = points.length;
        if (n <= 2) {
            return n;
        }
        int ret = 0;
        for (int i = 0; i < n; i++) {
            if (ret >= n - i || ret > n / 2) {
                break;
            }
            Map<Integer, Integer> map = new HashMap<Integer, Integer>();
            for (int j = i + 1; j < n; j++) {
                int x = points[i][0] - points[j][0];
                int y = points[i][1] - points[j][1];
                if (x == 0) {
                    y = 1;
                } else if (y == 0) {
                    x = 1;
                } else {
                    if (y < 0) {
                        x = -x;
                        y = -y;
                    }
                    int gcdXY = gcd(Math.abs(x), Math.abs(y));
                    x /= gcdXY;
                    y /= gcdXY;
                }
                int key = y + x * 20001;
                map.put(key, map.getOrDefault(key, 0) + 1);
            }
            int maxn = 0;
            for (Map.Entry<Integer, Integer> entry: map.entrySet()) {
                int num = entry.getValue();
                maxn = Math.max(maxn, num + 1);
            }
            ret = Math.max(ret, maxn);
        }
        return ret;
    }

    public int gcd(int a, int b) {
        return b != 0 ? gcd(b, a % b) : a;
    }
}
```

```C# [sol1-C#]
public class Solution {
    public int MaxPoints(int[][] points) {
        int n = points.Length;
        if (n <= 2) {
            return n;
        }
        int ret = 0;
        for (int i = 0; i < n; i++) {
            if (ret >= n - i || ret > n / 2) {
                break;
            }
            Dictionary<int, int> dictionary = new Dictionary<int, int>();
            for (int j = i + 1; j < n; j++) {
                int x = points[i][0] - points[j][0];
                int y = points[i][1] - points[j][1];
                if (x == 0) {
                    y = 1;
                } else if (y == 0) {
                    x = 1;
                } else {
                    if (y < 0) {
                        x = -x;
                        y = -y;
                    }
                    int gcdXY = gcd(Math.Abs(x), Math.Abs(y));
                    x /= gcdXY;
                    y /= gcdXY;
                }
                int key = y + x * 20001;
                if (!dictionary.ContainsKey(key)) {
                    dictionary.Add(key, 1);
                } else {
                    dictionary[key]++;
                }
            }
            int maxn = 0;
            foreach (int num in dictionary.Values) {
                maxn = Math.Max(maxn, num + 1);
            }
            ret = Math.Max(ret, maxn);
        }
        return ret;
    }

    public int gcd(int a, int b) {
        return b != 0 ? gcd(b, a % b) : a;
    }
}
```

```go [sol1-Golang]
func maxPoints(points [][]int) (ans int) {
    n := len(points)
    if n <= 2 {
        return n
    }
    for i, p := range points {
        if ans >= n-i || ans > n/2 {
            break
        }
        cnt := map[int]int{}
        for _, q := range points[i+1:] {
            x, y := p[0]-q[0], p[1]-q[1]
            if x == 0 {
                y = 1
            } else if y == 0 {
                x = 1
            } else {
                if y < 0 {
                    x, y = -x, -y
                }
                g := gcd(abs(x), abs(y))
                x /= g
                y /= g
            }
            cnt[y+x*20001]++
        }
        for _, c := range cnt {
            ans = max(ans, c+1)
        }
    }
    return
}

func gcd(a, b int) int {
    for a != 0 {
        a, b = b%a, a
    }
    return b
}

func abs(x int) int {
    if x < 0 {
        return -x
    }
    return x
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

```JavaScript [sol1-JavaScript]
var maxPoints = function(points) {
    const n = points.length;
    if (n <= 2) {
        return n;
    }
    let ret = 0;
    for (let i = 0; i < n; i++) {
        if (ret >= n - i || ret > n / 2) {
            break;
        }
        const map = new Map();
        for (let j = i + 1; j < n; j++) {
            let x = points[i][0] - points[j][0];
            let y = points[i][1] - points[j][1];
            if (x === 0) {
                y = 1;
            } else if (y === 0) {
                x = 1;
            } else {
                if (y < 0) {
                    x = -x;
                    y = -y;
                }
                const gcdXY = gcd(Math.abs(x), Math.abs(y));
                x /= gcdXY;
                y /= gcdXY;
            }
            const key = y + x * 20001;
            map.set(key, (map.get(key) || 0)+ 1);
        }
        let maxn = 0;
        for (const num of map.values()) {
            maxn = Math.max(maxn, num + 1);
        }
        ret = Math.max(ret, maxn);
    }
    return ret;
};

const gcd = (a, b) => {
    return b != 0 ? gcd(b, a % b) : a;
}
```

```C [sol1-C]

struct HashTable {
    int key, val;
    UT_hash_handle hh;
};

int gcd(int a, int b) {
    return b ? gcd(b, a % b) : a;
}

int maxPoints(int** points, int pointsSize, int* pointsColSize) {
    int n = pointsSize;
    if (n <= 2) {
        return n;
    }
    int ret = 0;
    for (int i = 0; i < n; i++) {
        if (ret >= n - i || ret > n / 2) {
            break;
        }
        struct HashTable* hashTable = NULL;
        for (int j = i + 1; j < n; j++) {
            int x = points[i][0] - points[j][0];
            int y = points[i][1] - points[j][1];
            if (x == 0) {
                y = 1;
            } else if (y == 0) {
                x = 1;
            } else {
                if (y < 0) {
                    x = -x;
                    y = -y;
                }
                int gcdXY = gcd(abs(x), abs(y));
                x /= gcdXY, y /= gcdXY;
            }
            struct HashTable* tmp;
            int val = y + x * 20010;
            HASH_FIND_INT(hashTable, &val, tmp);
            if (tmp == NULL) {
                tmp = malloc(sizeof(struct HashTable));
                tmp->key = val;
                tmp->val = 1;
                HASH_ADD_INT(hashTable, key, tmp);
            } else {
                tmp->val++;
            }
        }
        int maxn = 0;
        struct HashTable *iter, *tmp;
        HASH_ITER(hh, hashTable, iter, tmp) {
            maxn = fmax(maxn, iter->val + 1);
            HASH_DEL(hashTable, iter);
            free(iter);
        }
        ret = fmax(ret, maxn);
    }
    return ret;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2 \times \log m)$ï¼Œå…¶ä¸­ $n$ ä¸ºç‚¹çš„æ•°é‡ï¼Œ$m$ ä¸ºæ¨ªçºµåæ ‡å·®çš„æœ€å¤§å€¼ã€‚æœ€åæƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦æšä¸¾æ‰€æœ‰ $n$ ä¸ªç‚¹ï¼Œæšä¸¾å•ä¸ªç‚¹è¿‡ç¨‹ä¸­éœ€è¦è¿›è¡Œ $O(n)$ æ¬¡æœ€å¤§å…¬çº¦æ•°è®¡ç®—ï¼Œå•æ¬¡æœ€å¤§å…¬çº¦æ•°è®¡ç®—çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(\log m)$ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2 \times \log m)$ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºç‚¹çš„æ•°é‡ã€‚ä¸»è¦ä¸ºå“ˆå¸Œè¡¨çš„å¼€é”€ã€‚