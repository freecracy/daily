# 2021年04月28日 code
<a href="https://toutiao.io/k/0iue4f4">2.7w 字！Java 基础面试题/知识点总结（2021 最新版）</a><br /><a href="https://toutiao.io/k/2e818j0">线程的安全性（并发基础篇）</a><br /><a href="https://toutiao.io/k/ykohxmm">腾讯技术大牛书单</a><br /><a href="https://toutiao.io/k/i3wcv9p">了不起的 Chrome 浏览器：Chrome 90 将默认使用 HTTPS，Web 更安全了</a><br /><a href="https://toutiao.io/k/6wnrpgg">偷偷学会让程序主动监测死锁，然后惊艳所有人</a><br /><a href="https://toutiao.io/k/agdq59u">震惊，高中少年与 CDN 的不解之缘</a><br /><a href="https://toutiao.io/k/trbossi">假如易立竞吐槽程序员</a><br /><a href="https://toutiao.io/k/ar460yv">Spring Boot 启动慢？那是因为你不知道它</a><br /><a href="https://toutiao.io/k/72233gt">精选前端核心面试题及解答（基础篇）</a><br /><a href="https://toutiao.io/k/49uqxvv">Mybatis 自定义拦截器与插件开发</a><br /><a href="https://toutiao.io/k/15x97lr">LeetCode (735)：行星碰撞</a><br /><a href="https://toutiao.io/k/8r5l4gb">Java 并发组件浅析</a><br /><a href="https://toutiao.io/k/s05bitw">老司机带你细数 AQS 子类，及以其实现的类</a><br /><a href="https://toutiao.io/k/beltfad">为 ping 命令增加时间信息的正确方法</a><br /><a href="https://toutiao.io/k/fsz1tkg">拥抱早起，Live better</a><br /><a href="https://toutiao.io/k/ey24bnu">微前端架构实战下：ModulFederation 篇</a><br /><a href="https://toutiao.io/k/i17lpy4">新一代 Web 建站技术栈的演进：SSR、SSG、ISR、DPR 都在做什么？</a><br /><a href="https://toutiao.io/k/opmz7mp">我是小 M，老板不当人子</a><br /><a href="https://toutiao.io/k/2tsoam4">避免掉进 “重造轮子” 的坑：从审核系统说起</a><br /><a href="https://toutiao.io/k/s73mzo7">持续集成环境下的 Android 模拟器</a><br /><a href="https://toutiao.io/k/nrdp4oq">[推荐] 用户画像的基础、原理、方法论（模型）和应用</a><br /><a href="https://toutiao.io/k/811or1j">[推荐] 学会这 10 种定时任务，我有点飘了</a><br /><a href="https://toutiao.io/k/4zqz7k1">[推荐] RESTful API 设计最佳实践</a><br /><a href="https://toutiao.io/k/j7fdh6h">[推荐] 一文搞懂分布式锁的原理与实现</a><br /><a href="https://toutiao.io/k/czntgsa">[推荐] 这 11 款 Chrome 神器，用起来爽到爆</a><br /><a href="https://toutiao.io/k/wxrneux">[推荐] 为什么放弃 Kafka，选择 Pulsar?</a><br /><a href="https://toutiao.io/k/zxa65u1">[推荐] 超级详细的 Spring Boot 注解总结</a><br /><a href="https://toutiao.io/k/omkb9gy">[推荐] InnoDB 解决幻读的方案：LBCC & MVCC</a><br /><a href="https://toutiao.io/k/08uadl6">[推荐] 书单丨“1 本抵 10 本” 的好书，建议收藏</a><br /><a href="https://toutiao.io/k/90vs9kg">[推荐] ClickHouse 在 Bilibili 用户行为分析的实践</a><br /><a href="https://toutiao.io/k/ti0gb8i">[推荐] Redis 进阶笔记</a><br /><a href="https://toutiao.io/k/6z3uu2m">[推荐] 如何设计一个高性能的秒杀系统</a><br /><a href="https://toutiao.io/k/xkhaihd">[推荐] 协程切换会引起什么问题</a><br /><a href="https://toutiao.io/k/syxnrph">[推荐] OpenResty 实现限流</a><br /><hr /><a href="https://github.com/TheAlgorithms/Python">All Algorithms implemented in Python</a><br /><a href="https://github.com/goldbergyoni/nodebestpractices">✅ The Node.js best practices list (April 2021)</a><br /><a href="https://github.com/login?return_to=%2Ftrekhleb%2Fjavascript-algorithms">📝 Algorithms and data structures implemented in JavaScript with explanations and links to further readings</a><br /><a href="https://github.com/chrisleekr/binance-trading-bot">Automated Binance trading bot - Buy low/Sell high with stop loss limit/Trade multiple cryptocurrencies</a><br /><a href="https://github.com/jackfrued/Python-100-Days">Python - 100天从新手到大师</a><br /><a href="https://github.com/login?return_to=%2Fkamranahmedse%2Fdeveloper-roadmap">Roadmap to becoming a web developer in 2021</a><br /><a href="https://github.com/login?return_to=%2FEbookFoundation%2Ffree-programming-books">📚 Freely available programming books</a><br /><a href="https://github.com/tuvtran/project-based-learning">Curated list of project-based tutorials</a><br /><a href="https://github.com/bradtraversy/design-resources-for-developers">Curated list of design and UI resources from stock photos, web templates, CSS frameworks, UI libraries, tools and much more</a><br /><a href="https://github.com/lettier/3d-game-shaders-for-beginners">🎮 A step-by-step guide to implementing SSAO, depth of field, lighting, normal mapping, and more for your 3D game.</a><br /><a href="https://github.com/juliourena/SharpNoPSExec">Get file less command execution for lateral movement.</a><br /><a href="https://github.com/ryanmcdermott/clean-code-javascript">🛁 Clean Code concepts adapted for JavaScript</a><br /><a href="https://github.com/danistefanovic/build-your-own-x">🤓 Build your own (insert technology here)</a><br /><a href="https://github.com/aladinyo/WhatsappyApp">A whatsapp clone progressive web application built with react nodejs and firebase</a><br /><a href="https://github.com/login?return_to=%2Fphotoprism%2Fphotoprism">Personal Photo Management powered by Go and Google TensorFlow</a><br /><a href="https://github.com/ossu/computer-science">🎓 Path to a free self-taught education in Computer Science!</a><br /><a href="https://github.com/login?return_to=%2Flaurent22%2Fjoplin">Joplin - an open source note taking and to-do application with synchronization capabilities for Windows, macOS, Linux, Android and iOS. Forum: https://discourse.joplinapp.org/</a><br /><a href="https://github.com/psf/black">The uncompromising Python code formatter</a><br /><a href="https://github.com/bmorelli25/Become-A-Full-Stack-Web-Developer">Free resources for learning Full Stack Web Development</a><br /><a href="https://github.com/you-dont-need/You-Dont-Need-JavaScript">CSS is powerful, you can do a lot of things without JS.</a><br /><a href="https://github.com/pointfreeco/swift-composable-architecture">A library for building applications in a consistent and understandable way, with composition, testing, and ergonomics in mind.</a><br /><a href="https://github.com/microsoft/wslg">Enabling the Windows Subsystem for Linux to include support for Wayland and X server related scenarios</a><br /><a href="https://github.com/login?return_to=%2Fgetify%2FYou-Dont-Know-JS">A book series on JavaScript. @YDKJS on twitter.</a><br /><a href="https://github.com/donnemartin/system-design-primer">Learn how to design large-scale systems. Prep for the system design interview. Includes Anki flashcards.</a><br /><a href="https://github.com/ml-tooling/opyrator">🪄 Turns your machine learning code into microservices with web API, interactive GUI, and more.</a><br /><hr />平方数之和<br /><p>给定一个非负整数&nbsp;<code>c</code>&nbsp;，你要判断是否存在两个整数 <code>a</code> 和 <code>b</code>，使得&nbsp;<code>a<sup>2</sup> + b<sup>2</sup> = c</code> 。</p>

<p>&nbsp;</p>

<p><strong>示例 1：</strong></p>

<pre><strong>输入：</strong>c = 5
<strong>输出：</strong>true
<strong>解释：</strong>1 * 1 + 2 * 2 = 5
</pre>

<p><strong>示例 2：</strong></p>

<pre><strong>输入：</strong>c = 3
<strong>输出：</strong>false
</pre>

<p><strong>示例 3：</strong></p>

<pre><strong>输入：</strong>c = 4
<strong>输出：</strong>true
</pre>

<p><strong>示例 4：</strong></p>

<pre><strong>输入：</strong>c = 2
<strong>输出：</strong>true
</pre>

<p><strong>示例 5：</strong></p>

<pre><strong>输入：</strong>c = 1
<strong>输出：</strong>true</pre>

<p>&nbsp;</p>

<p><strong>提示：</strong></p>

<ul>
	<li><code>0 &lt;= c &lt;= 2<sup>31</sup> - 1</code></li>
</ul>
<br />#### 前言

对于给定的非负整数 $c$，需要判断是否存在整数 $a$ 和 $b$，使得 $a^2 + b^2 = c$。可以枚举 $a$ 和 $b$ 所有可能的情况，时间复杂度为 $O(c^2)$。但是暴力枚举有一些情况是没有必要的。例如：当 $c = 20$ 时，当 $a = 1$ 的时候，枚举 $b$ 的时候，只需要枚举到 $b = 5$ 就可以结束了，这是因为 $1^2 + 5^2 = 25 > 20$。当 $b > 5$ 时，一定有 $1^2 + b^2 > 20$。

注意到这一点，可以使用  $\texttt{sqrt}$ 函数或者双指针降低时间复杂度。

#### 方法一：使用 $\texttt{sqrt}$ 函数

在枚举 $a$ 的同时，使用 $\texttt{sqrt}$ 函数找出 $b$。注意：本题 $c$ 的取值范围在 $[0,2^{31} - 1]$，因此在计算的过程中可能会发生 $\texttt{int}$ 型溢出的情况，需要使用 $\texttt{long}$ 型避免溢出。

```Java [sol1-Java]
class Solution {
    public boolean judgeSquareSum(int c) {
        for (long a = 0; a * a <= c; a++) {
            double b = Math.sqrt(c - a * a);
            if (b == (int) b) {
                return true;
            }
        }
        return false;
    }
}
```

```JavaScript [sol1-JavaScript]
var judgeSquareSum = function(c) {
    for (let a = 0; a * a <= c; a++) {
        const b = Math.sqrt(c - a * a);
        if (b === parseInt(b)) {
            return true;
        }
    }
    return false;
};
```

```go [sol1-Golang]
func judgeSquareSum(c int) bool {
    for a := 0; a*a <= c; a++ {
        rt := math.Sqrt(float64(c - a*a))
        if rt == math.Floor(rt) {
            return true
        }
    }
    return false
}
```

```C++ [sol1-C++]
class Solution {
public:
    bool judgeSquareSum(int c) {
        for (long a = 0; a * a <= c; a++) {
            double b = sqrt(c - a * a);
            if (b == (int)b) {
                return true;
            }
        }
        return false;
    }
};
```

```C [sol1-C]
bool judgeSquareSum(int c) {
    for (long a = 0; a * a <= c; a++) {
        double b = sqrt(c - a * a);
        if (b == (int)b) {
            return true;
        }
    }
    return false;
}
```

**复杂度分析**

- 时间复杂度：$O(\sqrt{c})$。枚举 $a$ 的时间复杂度为 $O(\sqrt{c})$，对于每个 $a$ 的值，可在 $O(1)$ 的时间内寻找 $b$。

- 空间复杂度：$O(1)$。

#### 方法二：双指针

不失一般性，可以假设 $a \le b$。初始时 $a = 0$，$b = \sqrt{c}$，进行如下操作：

- 如果 $a^2 + b^2 = c$，我们找到了题目要求的一个解，返回 $\text{true}$；
- 如果 $a^2 + b^2 < c$，此时需要将 $a$ 的值加 $1$，继续查找；
- 如果 $a^2 + b^2 > c$，此时需要将 $b$ 的值减 $1$，继续查找。

当 $a = b$ 时，结束查找，此时如果仍然没有找到整数 $a$ 和 $b$ 满足 $a^2 + b^2 = c$，则说明不存在题目要求的解，返回 $\text{false}$。

```Java [sol2-Java]
class Solution {
    public boolean judgeSquareSum(int c) {
        int left = 0;
        int right = (int) Math.sqrt(c);
        while (left <= right) {
            int sum = left * left + right * right;
            if (sum == c) {
                return true;
            } else if (sum > c) {
                right--;
            } else {
                left++;
            }
        }
        return false;
    }
}
```

```JavaScript [sol2-JavaScript]
var judgeSquareSum = function(c) {
    let left = 0;
    let right = Math.floor(Math.sqrt(c));
    while (left <= right) {
        const sum = left * left + right * right;
        if (sum === c) {
            return true;
        } else if (sum > c) {
            right--;
        } else {
            left++;
        }
    }
    return false;
};
```

```go [sol2-Golang]
func judgeSquareSum(c int) bool {
    left, right := 0, int(math.Sqrt(float64(c)))
    for left <= right {
        sum := left*left + right*right
        if sum == c {
            return true
        } else if sum > c {
            right--
        } else {
            left++
        }
    }
    return false
}
```

```C++ [sol2-C++]
class Solution {
public:
    bool judgeSquareSum(int c) {
        long left = 0;
        long right = (int)sqrt(c);
        while (left <= right) {
            long sum = left * left + right * right;
            if (sum == c) {
                return true;
            } else if (sum > c) {
                right--;
            } else {
                left++;
            }
        }
        return false;
    }
};
```

```C [sol2-C]
bool judgeSquareSum(int c) {
    long left = 0;
    long right = (int)sqrt(c);
    while (left <= right) {
        long sum = left * left + right * right;
        if (sum == c) {
            return true;
        } else if (sum > c) {
            right--;
        } else {
            left++;
        }
    }
    return false;
}
```

**复杂度分析**

- 时间复杂度：$O(\sqrt{c})$。最坏情况下 $a$ 和 $b$ 一共枚举了 $0$ 到 $\sqrt{c}$ 里的所有整数。

- 空间复杂度：$O(1)$。

#### 方法三：数学

费马平方和定理告诉我们：

> 一个非负整数 $c$ 如果能够表示为两个整数的平方和，当且仅当 $c$ 的所有形如 $4k + 3$ 的**质因子**的幂均为偶数。

证明请见 [这里](http://wstein.org/edu/124/lectures/lecture21/lecture21/node2.html)。

因此我们需要对 $c$ 进行**质因数分解**，再判断**所有**形如 $4k + 3$ 的质因子的幂是否均为偶数即可。

```Java [sol3-Java]
class Solution {
    public boolean judgeSquareSum(int c) {
        for (int base = 2; base * base <= c; base++) {
            // 如果不是因子，枚举下一个
            if (c % base != 0) {
                continue;
            }

            // 计算 base 的幂
            int exp = 0;
            while (c % base == 0) {
                c /= base;
                exp++;
            }

            // 根据 Sum of two squares theorem 验证
            if (base % 4 == 3 && exp % 2 != 0) {
                return false;
            }
        }

      	// 例如 11 这样的用例，由于上面的 for 循环里 base * base <= c ，base == 11 的时候不会进入循环体
      	// 因此在退出循环以后需要再做一次判断
        return c % 4 != 3;
    }
}
```

```JavaScript [sol3-JavaScript]
var judgeSquareSum = function(c) {
    for (let base = 2; base * base <= c; base++) {
        // 如果不是因子，枚举下一个
        if (c % base !== 0) {
            continue;
        }

        // 计算 base 的幂
        let exp = 0;
        while (c % base == 0) {
            c /= base;
            exp++;
        }

        // 根据 Sum of two squares theorem 验证
        if (base % 4 === 3 && exp % 2 !== 0) {
            return false;
        }
    }

    // 例如 11 这样的用例，由于上面的 for 循环里 base * base <= c ，base == 11 的时候不会进入循环体
    // 因此在退出循环以后需要再做一次判断
    return c % 4 !== 3;
};
```

```go [sol3-Golang]
func judgeSquareSum(c int) bool {
    for base := 2; base*base <= c; base++ {
        // 如果不是因子，枚举下一个
        if c%base > 0 {
            continue
        }

        // 计算 base 的幂
        exp := 0
        for ; c%base == 0; c /= base {
            exp++
        }

        // 根据 Sum of two squares theorem 验证
        if base%4 == 3 && exp%2 != 0 {
            return false
        }
    }

    // 例如 11 这样的用例，由于上面的 for 循环里 base * base <= c ，base == 11 的时候不会进入循环体
    // 因此在退出循环以后需要再做一次判断
    return c%4 != 3
}
```

```C++ [sol3-C++]
class Solution {
public:
    bool judgeSquareSum(int c) {
        for (int base = 2; base * base <= c; base++) {
            // 如果不是因子，枚举下一个
            if (c % base != 0) {
                continue;
            }

            // 计算 base 的幂
            int exp = 0;
            while (c % base == 0) {
                c /= base;
                exp++;
            }

            // 根据 Sum of two squares theorem 验证
            if (base % 4 == 3 && exp % 2 != 0) {
                return false;
            }
        }

        // 例如 11 这样的用例，由于上面的 for 循环里 base * base <= c ，base == 11 的时候不会进入循环体
        // 因此在退出循环以后需要再做一次判断
        return c % 4 != 3;
    }
};
```

```C [sol3-C]
bool judgeSquareSum(int c) {
    for (int base = 2; base * base <= c; base++) {
        // 如果不是因子，枚举下一个
        if (c % base != 0) {
            continue;
        }

        // 计算 base 的幂
        int exp = 0;
        while (c % base == 0) {
            c /= base;
            exp++;
        }

        // 根据 Sum of two squares theorem 验证
        if (base % 4 == 3 && exp % 2 != 0) {
            return false;
        }
    }

    // 例如 11 这样的用例，由于上面的 for 循环里 base * base <= c ，base == 11 的时候不会进入循环体
    // 因此在退出循环以后需要再做一次判断
    return c % 4 != 3;
}
```

**复杂度分析**

* 时间复杂度：$O(\sqrt{c})$。

* 空间复杂度：$O(1)$。

---
# [📚 好读书？读好书！让时间更有价值| 世界读书日](https://leetcode-cn.com/circle/discuss/12QtuI/)
4 月 22 日至 4 月 28 日，进入「[学习](https://leetcode-cn.com/leetbook/)」，完成页面右上角的「让时间更有价值」限时阅读任务，可获得「2021 读书日纪念勋章」。更多活动详情戳上方标题了解更多👆
#### 今日学习任务：
- 了解构造函数引用
[完成阅读 1.3 构造函数引用与讨论](https://leetcode-cn.com/leetbook/read/modern-java-recipes/9i21ds/)
- 了解并行流
[完成阅读 9.1 ~ 9.2（含讨论）](https://leetcode-cn.com/leetbook/read/modern-java-recipes/9zjzzh/)