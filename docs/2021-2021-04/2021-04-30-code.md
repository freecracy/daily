# 2021å¹´04æœˆ30æ—¥ code
<a href="https://toutiao.io/k/8gzyh5c">å¯èƒ½æ˜¯æœ€å¥½ç”¨çš„ Taro å°ç¨‹åºè·¯ç”±åº“</a><br /><a href="https://toutiao.io/k/eyk6ijj">äº‘ä¸Šç»†ç²’åº¦è®¿é—®ç®¡ç†çš„å‚è€ƒæ¶æ„</a><br /><a href="https://toutiao.io/k/5g18w9p">è¿è¡Œ 3000 æ¬¡éƒ½ä¸å‡ºé”™çš„ MIT 6.824 Raft å®éªŒ</a><br /><a href="https://toutiao.io/k/09egmu8">Prometheus + Grafana å¿«é€Ÿä¸Šæ‰‹</a><br /><a href="https://toutiao.io/k/ikalxbo">ä¸‡å­—é•¿æ–‡è®²è¿°æˆ‘æ˜¯æ€æ ·ä¿é€æ¸…åçš„ | å¯’é—¨å­¦å­å¥‹æ–—å²ï¼ˆå››ï¼‰</a><br /><a href="https://toutiao.io/k/bllxzxj">æ’æŸ¥ Dubbo æ¥å£é‡å¤æ³¨é”€é—®é¢˜ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªå·§å¦™çš„è®¾è®¡</a><br /><a href="https://toutiao.io/k/v1291xo">åŸºäºæ‹‰é“¾å¼å’Œçº¿æ€§æ¢æµ‹å¼æ•£åˆ—è¡¨å®ç° Map</a><br /><a href="https://toutiao.io/k/upn8q80">ä»£ç å®¡æŸ¥å®è·µç»éªŒåˆ†äº«ï¼šåº”è¯¥æ˜¯å¤§å†™è¿˜æ˜¯å°å†™ï¼Ÿ</a><br /><a href="https://toutiao.io/k/x7otoc2">æˆ‘æ˜¯å¦‚ä½•æŠŠå¾®æœåŠ¡çš„è¿™ä¸ªæ¨¡å¼è½åœ°çš„ï¼šä¸€ä¸ªæœåŠ¡ä¸€ä¸ªæ•°æ®åº“æ¨¡å¼ï¼ˆä¸­ï¼‰</a><br /><a href="https://toutiao.io/k/oq5qkeb">GitHub ææƒé¡¹ç›®æ¨è</a><br /><a href="https://toutiao.io/k/y1kcddr">å¦‚ä½•æŠŠ Caffeine Cache ç”¨å¾—å¦‚ä¸èˆ¬é¡ºæ»‘ï¼Ÿ</a><br /><a href="https://toutiao.io/k/70xdujl">ä¸€å¨ä¸€å¨çš„ if/else å‚æ•°æ ¡éªŒï¼Œç»ˆäºè¢« Spring Boot å‚æ•°æ ¡éªŒç»„ä»¶æ•´å¹²å‡€äº†</a><br /><a href="https://toutiao.io/k/ij2hbj5">MySQL ç´¢å¼•åè¿é—®</a><br /><a href="https://toutiao.io/k/zoaa9id">ä½ å·²ç»ç”¨ä¸Š 5G ç½‘ç»œäº†å—ï¼Ÿ</a><br /><a href="https://toutiao.io/k/nb71eib">WorkManager ç³»åˆ—è¯¾ç¨‹ | MAD Skills</a><br /><a href="https://toutiao.io/k/8jy3xbs">ä¸€æ–‡å­¦ä¼š Hive è§£æ Json æ•°ç»„</a><br /><a href="https://toutiao.io/k/m5yhd4b">é—²é±¼æ­£åœ¨æ‚„æ‚„æ”¾å¼ƒ Flutter å—ï¼Ÿ</a><br /><a href="https://toutiao.io/k/0qwa25x">æ¼«ç”»ï¼šå¦‚ä½•åœ¨äººç¾¤ä¸­å¿«é€Ÿè¯†åˆ«ä¸€ä¸ªç¨‹åºå‘˜</a><br /><a href="https://toutiao.io/k/foj50ju">å›¾ç¥ç»ç½‘ç»œåœ¨ç”ŸåŒ–åŒ»ç–—æ–¹é¢çš„ç›¸å…³åº”ç”¨</a><br /><a href="https://toutiao.io/k/wyhlltd">æœ‰è¶£çš„é¢è¯•é¢˜ï¼šGo è¯­è¨€å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦å’Œå­—ç¬¦ä¸ªæ•°</a><br /><a href="https://toutiao.io/k/j7fdh6h">[æ¨è] ä¸€æ–‡ææ‡‚åˆ†å¸ƒå¼é”çš„åŸç†ä¸å®ç°</a><br /><a href="https://toutiao.io/k/wxrneux">[æ¨è] ä¸ºä»€ä¹ˆæ”¾å¼ƒ Kafkaï¼Œé€‰æ‹© Pulsar?</a><br /><a href="https://toutiao.io/k/zxa65u1">[æ¨è] è¶…çº§è¯¦ç»†çš„ Spring Boot æ³¨è§£æ€»ç»“</a><br /><a href="https://toutiao.io/k/90vs9kg">[æ¨è] ClickHouse åœ¨ Bilibili ç”¨æˆ·è¡Œä¸ºåˆ†æçš„å®è·µ</a><br /><a href="https://toutiao.io/k/6z3uu2m">[æ¨è] å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜æ€§èƒ½çš„ç§’æ€ç³»ç»Ÿ</a><br /><a href="https://toutiao.io/k/nrdp4oq">[æ¨è] ç”¨æˆ·ç”»åƒçš„åŸºç¡€ã€åŸç†ã€æ–¹æ³•è®ºï¼ˆæ¨¡å‹ï¼‰å’Œåº”ç”¨</a><br /><a href="https://toutiao.io/k/08uadl6">[æ¨è] ä¹¦å•ä¸¨â€œ1 æœ¬æŠµ 10 æœ¬â€ çš„å¥½ä¹¦ï¼Œå»ºè®®æ”¶è—</a><br /><a href="https://toutiao.io/k/ti0gb8i">[æ¨è] Redis è¿›é˜¶ç¬”è®°</a><br /><a href="https://toutiao.io/k/czntgsa">[æ¨è] è¿™ 11 æ¬¾ Chrome ç¥å™¨ï¼Œç”¨èµ·æ¥çˆ½åˆ°çˆ†</a><br /><a href="https://toutiao.io/k/xkhaihd">[æ¨è] åç¨‹åˆ‡æ¢ä¼šå¼•èµ·ä»€ä¹ˆé—®é¢˜</a><br /><a href="https://toutiao.io/k/syxnrph">[æ¨è] OpenResty å®ç°é™æµ</a><br /><hr /><a href="https://github.com/TheAlgorithms/Python">All Algorithms implemented in Python</a><br /><a href="https://github.com/scala-open-letter/scala-open-letter.github.io"></a><br /><a href="https://github.com/login?return_to=%2Ftrekhleb%2Fjavascript-algorithms">ğŸ“ Algorithms and data structures implemented in JavaScript with explanations and links to further readings</a><br /><a href="https://github.com/login?return_to=%2Fopenssl%2Fopenssl">TLS/SSL and crypto library</a><br /><a href="https://github.com/doocs/leetcode">ğŸ˜ LeetCode solutions in any programming language | å¤šç§ç¼–ç¨‹è¯­è¨€å®ç° LeetCodeã€ã€Šå‰‘æŒ‡ Offerï¼ˆç¬¬ 2 ç‰ˆï¼‰ã€‹ã€ã€Šç¨‹åºå‘˜é¢è¯•é‡‘å…¸ï¼ˆç¬¬ 6 ç‰ˆï¼‰ã€‹é¢˜è§£</a><br /><a href="https://github.com/Developer-Y/cs-video-courses">List of Computer Science courses with video lectures.</a><br /><a href="https://github.com/nextapps-de/winbox">WinBox is a professional HTML5 window manager for the web: lightweight, outstanding performance, no dependencies, fully customizable, open source!</a><br /><a href="https://github.com/golang-standards/project-layout">Standard Go Project Layout</a><br /><a href="https://github.com/nekohasekai/SagerNet">The universal proxy toolchain for Android.</a><br /><a href="https://github.com/chrisleekr/binance-trading-bot">Automated Binance trading bot - Buy low/Sell high with stop loss limit/Trade multiple cryptocurrencies</a><br /><a href="https://github.com/johnBuffer/AntSimulator">Simple Ants simulator</a><br /><a href="https://github.com/UnityTechnologies/open-project-1">Unity Open Project #1: Chop Chop</a><br /><a href="https://github.com/vuetifyjs/vuetify">ğŸ‰ Material Component Framework for Vue</a><br /><a href="https://github.com/jackfrued/Python-100-Days">Python - 100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ</a><br /><a href="https://github.com/ansible/ansible">Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy and maintain. Automate everything from code deployment to network configuration to cloud management, in a language that approaches plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.</a><br /><a href="https://github.com/ryanmcdermott/clean-code-javascript">ğŸ› Clean Code concepts adapted for JavaScript</a><br /><a href="https://github.com/terraform-providers/terraform-provider-azurerm">Terraform provider for Azure Resource Manager</a><br /><a href="https://github.com/tuvtran/project-based-learning">Curated list of project-based tutorials</a><br /><a href="https://github.com/wuyouzhuguli/SpringAll">å¾ªåºæ¸è¿›ï¼Œå­¦ä¹ Spring Bootã€Spring Boot & Shiroã€Spring Batchã€Spring Cloudã€Spring Cloud Alibabaã€Spring Security & Spring Security OAuth2ï¼Œåšå®¢Springç³»åˆ—æºç ï¼šhttps://mrbird.cc</a><br /><a href="https://github.com/airbus-seclab/qemu_blog">A series of posts about QEMU internals</a><br /><a href="https://github.com/pointfreeco/swift-composable-architecture">A library for building applications in a consistent and understandable way, with composition, testing, and ergonomics in mind.</a><br /><a href="https://github.com/Unity-Technologies/Graphics">Unity Graphics - Including Scriptable Render Pipeline</a><br /><a href="https://github.com/tensorflow/tensorflow">An Open Source Machine Learning Framework for Everyone</a><br /><a href="https://github.com/acidanthera/OpenCorePkg">OpenCore bootloader</a><br /><hr />åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— II<br /><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â <code>nums</code> ï¼Œé™¤æŸä¸ªå…ƒç´ ä»…å‡ºç° <strong>ä¸€æ¬¡</strong> å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ éƒ½æ°å‡ºç° <strong>ä¸‰æ¬¡ ã€‚</strong>è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›é‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [2,2,3,2]
<strong>è¾“å‡ºï¼š</strong>3
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [0,1,0,1,0,1,99]
<strong>è¾“å‡ºï¼š</strong>99
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 <= nums.length <= 3 * 10<sup>4</sup></code></li>
	<li><code>-2<sup>31</sup> <= nums[i] <= 2<sup>31</sup> - 1</code></li>
	<li><code>nums</code> ä¸­ï¼Œé™¤æŸä¸ªå…ƒç´ ä»…å‡ºç° <strong>ä¸€æ¬¡</strong> å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ éƒ½æ°å‡ºç° <strong>ä¸‰æ¬¡</strong></li>
</ul>

<p>Â </p>

<p><strong>è¿›é˜¶ï¼š</strong>ä½ çš„ç®—æ³•åº”è¯¥å…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚ ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–ç©ºé—´æ¥å®ç°å—ï¼Ÿ</p>
<br />#### æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨

**æ€è·¯ä¸ç®—æ³•**

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“ˆå¸Œæ˜ å°„ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ã€‚å¯¹äºå“ˆå¸Œæ˜ å°„ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹ï¼Œé”®è¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼Œå€¼è¡¨ç¤ºå…¶å‡ºç°çš„æ¬¡æ•°ã€‚

åœ¨ç»Ÿè®¡å®Œæˆåï¼Œæˆ‘ä»¬éå†å“ˆå¸Œæ˜ å°„å³å¯æ‰¾å‡ºåªå‡ºç°ä¸€æ¬¡çš„å…ƒç´ ã€‚

**ä»£ç **

```C++ [sol1-C++]
class Solution {
public:
    int singleNumber(vector<int>& nums) {
        unordered_map<int, int> freq;
        for (int num: nums) {
            ++freq[num];
        }
        int ans = 0;
        for (auto [num, occ]: freq) {
            if (occ == 1) {
                ans = num;
                break;
            }
        }
        return ans;
    }
};
```

```Java [sol1-Java]
class Solution {
    public int singleNumber(int[] nums) {
        Map<Integer, Integer> freq = new HashMap<Integer, Integer>();
        for (int num : nums) {
            freq.put(num, freq.getOrDefault(num, 0) + 1);
        }
        int ans = 0;
        for (Map.Entry<Integer, Integer> entry : freq.entrySet()) {
            int num = entry.getKey(), occ = entry.getValue();
            if (occ == 1) {
                ans = num;
                break;
            }
        }
        return ans;
    }
}
```

```Python [sol1-Python3]
class Solution:
    def singleNumber(self, nums: List[int]) -> int:
        freq = collections.Counter(nums)
        ans = [num for num, occ in freq.items() if occ == 1][0]
        return ans
```

```JavaScript [sol1-JavaScript]
var singleNumber = function(nums) {
    const freq = new Map();
    for (const num of nums) {
        freq.set(num, (freq.get(num) || 0) + 1);
    }
    let ans = 0;
    for (const [num, occ] of freq.entries()) {
        if (occ === 1) {
            ans = num;
            break;
        }
    }
    return ans;
};
```

```go [sol1-Golang]
func singleNumber(nums []int) int {
    freq := map[int]int{}
    for _, v := range nums {
        freq[v]++
    }
    for num, occ := range freq {
        if occ == 1 {
            return num
        }
    }
    return 0 // ä¸ä¼šå‘ç”Ÿï¼Œæ•°æ®ä¿è¯æœ‰ä¸€ä¸ªå…ƒç´ ä»…å‡ºç°ä¸€æ¬¡
}
```

```C [sol1-C]
struct HashTable {
    int key, val;
    UT_hash_handle hh;
};

int singleNumber(int *nums, int numsSize) {
    struct HashTable *hashTable = NULL;
    for (int i = 0; i < numsSize; i++) {
        struct HashTable *tmp;
        HASH_FIND_INT(hashTable, &nums[i], tmp);
        if (tmp == NULL) {
            tmp = malloc(sizeof(struct HashTable));
            tmp->key = nums[i];
            tmp->val = 1;
            HASH_ADD_INT(hashTable, key, tmp);
        } else {
            tmp->val++;
        }
    }
    int ans = 0;
    struct HashTable *iter, *tmp;
    HASH_ITER(hh, hashTable, iter, tmp) {
        if (iter->val == 1) {
            ans = iter->key;
            break;
        }
    }
    return ans;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚å“ˆå¸Œæ˜ å°„ä¸­åŒ…å«æœ€å¤š $\lfloor n/3 \rfloor + 1$ ä¸ªå…ƒç´ ï¼Œå³éœ€è¦çš„ç©ºé—´ä¸º $O(n)$ã€‚

#### æ–¹æ³•äºŒï¼šä¾æ¬¡ç¡®å®šæ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½

**æ€è·¯ä¸ç®—æ³•**

ä¸ºäº†æ–¹ä¾¿å™è¿°ï¼Œæˆ‘ä»¬ç§°ã€Œåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€ä¸ºã€Œç­”æ¡ˆã€ã€‚

ç”±äºæ•°ç»„ä¸­çš„å…ƒç´ éƒ½åœ¨ $\texttt{int}$ï¼ˆå³ $32$ ä½æ•´æ•°ï¼‰èŒƒå›´å†…ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¾æ¬¡è®¡ç®—ç­”æ¡ˆçš„æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½æ˜¯ $0$ è¿˜æ˜¯ $1$ã€‚

å…·ä½“åœ°ï¼Œè€ƒè™‘ç­”æ¡ˆçš„ç¬¬ $i$ ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆ$i$ ä» $0$ å¼€å§‹ç¼–å·ï¼‰ï¼Œå®ƒå¯èƒ½ä¸º $0$ æˆ– $1$ã€‚å¯¹äºæ•°ç»„ä¸­éç­”æ¡ˆçš„å…ƒç´ ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½å‡ºç°äº† $3$ æ¬¡ï¼Œå¯¹åº”ç€ç¬¬ $i$ ä¸ªäºŒè¿›åˆ¶ä½çš„ $3$ ä¸ª $0$ æˆ– $3$ ä¸ª $1$ï¼Œæ— è®ºæ˜¯å“ªä¸€ç§æƒ…å†µï¼Œå®ƒä»¬çš„å’Œéƒ½æ˜¯ $3$ çš„å€æ•°ï¼ˆå³å’Œä¸º $0$ æˆ– $3$ï¼‰ã€‚å› æ­¤ï¼š

> ç­”æ¡ˆçš„ç¬¬ $i$ ä¸ªäºŒè¿›åˆ¶ä½å°±æ˜¯æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„ç¬¬ $i$ ä¸ªäºŒè¿›åˆ¶ä½ä¹‹å’Œé™¤ä»¥ $3$ çš„ä½™æ•°ã€‚

è¿™æ ·ä¸€æ¥ï¼Œå¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´  $x$ï¼Œæˆ‘ä»¬ä½¿ç”¨ä½è¿ç®— $\texttt{(x >> i) \& 1}$ å¾—åˆ° $x$ çš„ç¬¬ $i$ ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå¹¶å°†å®ƒä»¬ç›¸åŠ å†å¯¹ $3$ å–ä½™ï¼Œå¾—åˆ°çš„ç»“æœä¸€å®šä¸º $0$ æˆ– $1$ï¼Œå³ä¸ºç­”æ¡ˆçš„ç¬¬ $i$ ä¸ªäºŒè¿›åˆ¶ä½ã€‚

**ç»†èŠ‚**

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨çš„è¯­è¨€å¯¹ã€Œæœ‰ç¬¦å·æ•´æ•°ç±»å‹ã€å’Œã€Œæ— ç¬¦å·æ•´æ•°ç±»å‹ã€æ²¡æœ‰åŒºåˆ†ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¾—åˆ°é”™è¯¯çš„ç­”æ¡ˆã€‚è¿™æ˜¯å› ä¸ºã€Œæœ‰ç¬¦å·æ•´æ•°ç±»å‹ã€ï¼ˆå³ $\texttt{int}$ ç±»å‹ï¼‰çš„ç¬¬ $31$ ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆå³æœ€é«˜ä½ï¼‰æ˜¯è¡¥ç æ„ä¹‰ä¸‹çš„ç¬¦å·ä½ï¼Œå¯¹åº”ç€ $-2^{31}$ï¼Œè€Œã€Œæ— ç¬¦å·æ•´æ•°ç±»å‹ã€ç”±äºæ²¡æœ‰ç¬¦å·ï¼Œç¬¬ $31$ ä¸ªäºŒè¿›åˆ¶ä½å¯¹åº”ç€ $2^{31}$ã€‚å› æ­¤åœ¨æŸäº›è¯­è¨€ï¼ˆä¾‹å¦‚ $\texttt{Python}$ï¼‰ä¸­éœ€è¦å¯¹æœ€é«˜ä½è¿›è¡Œç‰¹æ®Šåˆ¤æ–­ã€‚

**ä»£ç **

```C++ [sol2-C++]
class Solution {
public:
    int singleNumber(vector<int>& nums) {
        int ans = 0;
        for (int i = 0; i < 32; ++i) {
            int total = 0;
            for (int num: nums) {
                total += ((num >> i) & 1);
            }
            if (total % 3) {
                ans |= (1 << i);
            }
        }
        return ans;
    }
};
```

```Java [sol2-Java]
class Solution {
    public int singleNumber(int[] nums) {
        int ans = 0;
        for (int i = 0; i < 32; ++i) {
            int total = 0;
            for (int num: nums) {
                total += ((num >> i) & 1);
            }
            if (total % 3 != 0) {
                ans |= (1 << i);
            }
        }
        return ans;
    }
}
```

```Python [sol2-Python3]
class Solution:
    def singleNumber(self, nums: List[int]) -> int:
        ans = 0
        for i in range(32):
            total = sum((num >> i) & 1 for num in nums)
            if total % 3:
                # Python è¿™é‡Œå¯¹äºæœ€é«˜ä½éœ€è¦ç‰¹æ®Šåˆ¤æ–­
                if i == 31:
                    ans -= (1 << i)
                else:
                    ans |= (1 << i)
        return ans
```

```JavaScript [sol2-JavaScript]
var singleNumber = function(nums) {
    let ans = 0;
    for (let i = 0; i < 32; ++i) {
        let total = 0;
        for (const num of nums) {
            total += ((num >> i) & 1);
        }
        if (total % 3 != 0) {
            ans |= (1 << i);
        }
    }
    return ans;
};
```

```go [sol2-Golang]
func singleNumber(nums []int) int {
    ans := int32(0)
    for i := 0; i < 32; i++ {
        total := int32(0)
        for _, num := range nums {
            total += int32(num) >> i & 1
        }
        if total%3 > 0 {
            ans |= 1 << i
        }
    }
    return int(ans)
}
```

```C [sol2-C]
int singleNumber(int *nums, int numsSize) {
    int ans = 0;
    for (int i = 0; i < 32; ++i) {
        int total = 0;
        for (int j = 0; j < numsSize; ++j) {
            total += ((nums[j] >> i) & 1);
        }
        if (total % 3) {
            ans |= (1u << i);
        }
    }
    return ans;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log C)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œ$C$ æ˜¯å…ƒç´ çš„æ•°æ®èŒƒå›´ï¼Œåœ¨æœ¬é¢˜ä¸­ $\log C=\log 2^{32} = 32$ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦éå†ç¬¬ $0\sim31$ ä¸ªäºŒè¿›åˆ¶ä½ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚

#### æ–¹æ³•ä¸‰ï¼šæ•°å­—ç”µè·¯è®¾è®¡

**è¯´æ˜**

æ–¹æ³•ä¸‰ä»¥åŠåç»­è¿›è¡Œä¼˜åŒ–çš„æ–¹æ³•å››éœ€è¦è¯»è€…æœ‰ä¸€å®šçš„æ•°å­—ç”µè·¯è®¾è®¡çš„åŸºç¡€ã€‚è¯»è€…éœ€è¦å¯¹ä»¥ä¸‹çŸ¥è¯†ï¼š

- ç®€å•çš„é—¨ç”µè·¯ï¼ˆä¾‹å¦‚ä¸é—¨ã€å¼‚æˆ–é—¨ç­‰ï¼‰

- ç»™å®šæ•°å­—ç”µè·¯è¾“å…¥å’Œè¾“å‡ºï¼ˆçœŸå€¼è¡¨ï¼‰ï¼Œä½¿ç”¨é—¨ç”µè·¯è®¾è®¡å‡ºä¸€ç§æ»¡è¶³è¦æ±‚çš„æ•°å­—ç”µè·¯ç»“æ„

æœ‰ä¸€å®šçš„äº†è§£ã€‚

**é—¨ç”µè·¯è¡¨ç¤º**

æˆ‘ä»¬å°†ä¼šç”¨åˆ°å››ç§é—¨ç”µè·¯ï¼Œä½¿ç”¨çš„ç¬¦å·å¦‚ä¸‹ï¼š

- éé—¨ï¼šæˆ‘ä»¬ç”¨ $A'$ è¡¨ç¤ºè¾“å…¥ä¸º $A$ çš„éé—¨çš„è¾“å‡ºï¼›

- ä¸é—¨ï¼šæˆ‘ä»¬ç”¨ $AB$ è¡¨ç¤ºè¾“å…¥ä¸º $A$ å’Œ $B$ çš„ä¸é—¨çš„è¾“å‡ºã€‚ç”±äºã€Œä¸è¿ç®—ã€å…·æœ‰ç»“åˆå¾‹ï¼Œå› æ­¤å¦‚æœåŒæ—¶ç”¨äº†å¤šä¸ªä¸é—¨ï¼ˆä¾‹å¦‚å°† $A$ å’Œ $B$ è¿›è¡Œä¸è¿ç®—åï¼Œå†å’Œ $C$ è¿›è¡Œä¸è¿ç®—ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªè¾“å…¥å†™åœ¨ä¸€èµ·ï¼ˆä¾‹å¦‚ $ABC$ï¼‰ï¼›

- æˆ–é—¨ï¼šæˆ‘ä»¬ç”¨ $A+B$ è¡¨ç¤ºè¾“å…¥ä¸º $A$ å’Œ $B$ çš„æˆ–é—¨çš„è¾“å‡ºã€‚åŒæ ·åœ°ï¼Œå¤šä¸ªæˆ–é—¨å¯ä»¥å†™åœ¨ä¸€èµ·ï¼ˆä¾‹å¦‚ $A+B+C$ï¼‰ï¼›

- å¼‚æˆ–é—¨ï¼šæˆ‘ä»¬ç”¨ $A\oplus B$ è¡¨ç¤ºè¾“å…¥ä¸º $A$ å’Œ $B$ çš„å¼‚æˆ–é—¨çš„è¾“å‡ºã€‚åŒæ ·çš„ï¼Œå¤šä¸ªå¼‚æˆ–é—¨å¯ä»¥å†™åœ¨ä¸€èµ·ï¼ˆä¾‹å¦‚ $A\oplus B\oplus C$ï¼‰ã€‚

**æ€è·¯ä¸ç®—æ³•**

åœ¨æ–¹æ³•äºŒä¸­ï¼Œæˆ‘ä»¬æ˜¯ä¾æ¬¡å¤„ç†æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½çš„ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦ä¸­å°±å¼•å…¥äº† $O(\log C)$ è¿™ä¸€é¡¹ã€‚æ—¢ç„¶æˆ‘ä»¬åœ¨å¯¹ä¸¤ä¸ªæ•´æ•°è¿›è¡Œæ™®é€šçš„äºŒå…ƒè¿ç®—æ—¶ï¼Œéƒ½æ˜¯å°†å®ƒä»¬çœ‹æˆæ•´ä½“è¿›è¡Œå¤„ç†çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦èƒ½ä»¥æ™®é€šçš„äºŒå…ƒè¿ç®—ä¸ºåŸºç¡€ï¼ŒåŒæ—¶å¤„ç†æ‰€æœ‰çš„äºŒè¿›åˆ¶ä½ï¼Ÿ

ç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªã€Œé»‘ç›’ã€å­˜å‚¨å½“å‰éå†è¿‡çš„æ‰€æœ‰æ•´æ•°ã€‚ã€Œé»‘ç›’ã€çš„ç¬¬ $i$ ä½ä¸º $\{ 0, 1, 2 \}$ ä¸‰è€…ä¹‹ä¸€ï¼Œè¡¨ç¤ºå½“å‰éå†è¿‡çš„æ‰€æœ‰æ•´æ•°çš„ç¬¬ $i$ ä½ä¹‹å’Œé™¤ä»¥ $3$ çš„ä½™æ•°ã€‚ä½†ç”±äºäºŒè¿›åˆ¶è¡¨ç¤ºä¸­åªæœ‰ $0$ å’Œ $1$ è€Œæ²¡æœ‰ $2$ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨ã€Œé»‘ç›’ã€ä¸­ä½¿ç”¨ä¸¤ä¸ªæ•´æ•°æ¥è¿›è¡Œå­˜å‚¨ï¼Œå³ï¼š

> é»‘ç›’ä¸­å­˜å‚¨äº†ä¸¤ä¸ªæ•´æ•° $a$ å’Œ $b$ï¼Œä¸”ä¼šæœ‰ä¸‰ç§æƒ…å†µï¼š
> - $a$ çš„ç¬¬ $i$ ä½ä¸º $0$ ä¸” $b$ çš„ç¬¬ $i$ ä½ä¸º $0$ï¼Œè¡¨ç¤º $0$ï¼›
> - $a$ çš„ç¬¬ $i$ ä½ä¸º $0$ ä¸” $b$ çš„ç¬¬ $i$ ä½ä¸º $1$ï¼Œè¡¨ç¤º $1$ï¼›
> - $a$ çš„ç¬¬ $i$ ä½ä¸º $1$ ä¸” $b$ çš„ç¬¬ $i$ ä½ä¸º $0$ï¼Œè¡¨ç¤º $2$ã€‚
>
> ä¸ºäº†æ–¹ä¾¿å™è¿°ï¼Œæˆ‘ä»¬ç”¨ $(00)$ è¡¨ç¤º $a$ çš„ç¬¬ $i$ ä½ä¸º $0$ ä¸” $b$ çš„ç¬¬ $i$ ä½ä¸º $0$ï¼Œå…¶ä½™çš„æƒ…å†µç±»ä¼¼ã€‚

å½“æˆ‘ä»¬éå†åˆ°ä¸€ä¸ªæ–°çš„æ•´æ•° $x$ æ—¶ï¼Œå¯¹äº $x$ çš„ç¬¬ $i$ ä½ $x_i$ï¼Œå¦‚æœ $x_i=0$ï¼Œé‚£ä¹ˆ $a$ å’Œ $b$ çš„ç¬¬ $i$ ä½ä¸å˜ï¼›å¦‚æœ $x_i=1$ï¼Œé‚£ä¹ˆ $a$ å’Œ $b$ çš„ç¬¬ $i$ ä½æŒ‰ç…§ $(00)\to(01)\to(10)\to(00)$ è¿™ä¸€å¾ªç¯è¿›è¡Œå˜åŒ–ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸‹é¢çš„çœŸå€¼è¡¨ï¼š

| $(a_i ~ b_i)$ | $x_i$ | æ–°çš„ $(a_i ~ b_i)$ |
| :-: | :-: | :-: |
| $00$ | $0$ | $00$ |
| $00$ | $1$ | $01$ |
| $01$ | $0$ | $01$ |
| $01$ | $1$ | $10$ |
| $10$ | $0$ | $10$ |
| $10$ | $1$ | $00$ |

å½“æˆ‘ä»¬è€ƒè™‘è¾“å‡ºä¸º $a_i$ æ—¶ï¼š

| $(a_i ~ b_i)$ | $x_i$ | æ–°çš„ $a_i$ |
| :-: | :-: | :-: |
| $00$ | $0$ | $0$ |
| $00$ | $1$ | $0$ |
| $01$ | $0$ | $0$ |
| $01$ | $1$ | $1$ |
| $10$ | $0$ | $1$ |
| $10$ | $1$ | $0$ |

æ ¹æ®çœŸå€¼è¡¨å¯ä»¥è®¾è®¡å‡ºç”µè·¯ï¼š

$$
a_i = a_i'b_ix_i + a_ib_i'x_i'
$$

å½“æˆ‘ä»¬è€ƒè™‘è¾“å‡ºä¸º $b_i$ æ—¶ï¼š

| $(a_i ~ b_i)$ | $x_i$ | æ–°çš„ $b_i$ |
| :-: | :-: | :-: |
| $00$ | $0$ | $0$ |
| $00$ | $1$ | $1$ |
| $01$ | $0$ | $1$ |
| $01$ | $1$ | $0$ |
| $10$ | $0$ | $0$ |
| $10$ | $1$ | $0$ |

æ ¹æ®çœŸå€¼è¡¨å¯ä»¥è®¾è®¡å‡ºç”µè·¯ï¼š

$$
b_i = a_i'b_i'x_i + a_i'b_ix_i' = a_i'(b_i \oplus x_i)
$$

å°†ä¸Šé¢çš„ç”µè·¯é€»è¾‘è¿ç®—è½¬æ¢ä¸ºç­‰ä»·çš„æ•´æ•°ä½è¿ç®—ï¼Œæœ€ç»ˆçš„è½¬æ¢è§„åˆ™å³ä¸ºï¼š

$$
\begin{cases}
\texttt{a = (\textasciitilde a \& b \& x) | (a \& \textasciitilde b \& \textasciitilde x)} \\
\texttt{b = \textasciitilde a \& (b\^ x)}
\end{cases}
$$

å…¶ä¸­ $\texttt{\textasciitilde, \&, |, \^ }$ åˆ†åˆ«è¡¨ç¤ºæŒ‰ä½éã€ä¸ã€æˆ–ã€å¼‚æˆ–è¿ç®—ã€‚

å½“æˆ‘ä»¬éå†å®Œæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ åï¼Œ$(a_i b_i)$ è¦ä¹ˆæ˜¯ $(00)$ï¼Œè¡¨ç¤ºç­”æ¡ˆçš„ç¬¬ $i$ ä½æ˜¯ $0$ï¼›è¦ä¹ˆæ˜¯ $(01)$ï¼Œè¡¨ç¤ºç­”æ¡ˆçš„ç¬¬ $i$ ä½æ˜¯ $1$ã€‚å› æ­¤æˆ‘ä»¬åªéœ€è¦è¿”å› $b$ ä½œä¸ºç­”æ¡ˆå³å¯ã€‚

**ç»†èŠ‚**

ç”±äºç”µè·¯ä¸­çš„ $a_i$ å’Œ $b_i$ æ˜¯ã€ŒåŒæ—¶ã€å¾—å‡ºç»“æœçš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è®¡ç®— $a$ å’Œ $b$ æ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸´æ—¶å˜é‡æš‚å­˜å®ƒä»¬ä¹‹å‰çš„å€¼ï¼Œå†ä½¿ç”¨è½¬æ¢è§„åˆ™è¿›è¡Œè®¡ç®—ã€‚

**ä»£ç **

```C++ [sol3-C++]
class Solution {
public:
    int singleNumber(vector<int>& nums) {
        int a = 0, b = 0;
        for (int num: nums) {
            tie(a, b) = pair{(~a & b & num) | (a & ~b & ~num), ~a & (b ^ num)};
        }
        return b;
    }
};
```

```Java [sol3-Java]
class Solution {
    public int singleNumber(int[] nums) {
        int a = 0, b = 0;
        for (int num : nums) {
            int aNext = (~a & b & num) | (a & ~b & ~num), bNext = ~a & (b ^ num);
            a = aNext;
            b = bNext;
        }
        return b;
    }
}
```

```Python [sol3-Python3]
class Solution:
    def singleNumber(self, nums: List[int]) -> int:
        a = b = 0
        for num in nums:
            a, b = (~a & b & num) | (a & ~b & ~num), ~a & (b ^ num)
        return b
```

```JavaScript [sol3-JavaScript]
var singleNumber = function(nums) {
    let a = 0, b = 0;
    for (const num of nums) {
        const aNext = (~a & b & num) | (a & ~b & ~num), bNext = ~a & (b ^ num);
        a = aNext;
        b = bNext;
    }
    return b;
};
```

```go [sol3-Golang]
func singleNumber(nums []int) int {
    a, b := 0, 0
    for _, num := range nums {
        a, b = b&^a&num|a&^b&^num, (b^num)&^a
    }
    return b
}
```

```C [sol1-C]
int singleNumber(int *nums, int numsSize) {
    int a = 0, b = 0;
    for (int i = 0; i < numsSize; i++) {
        int tmp_a = (~a & b & nums[i]) | (a & ~b & ~nums[i]);
        int tmp_b = ~a & (b ^ nums[i]);
        a = tmp_a;
        b = tmp_b;
    }
    return b;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚

#### æ–¹æ³•å››ï¼šæ•°å­—ç”µè·¯è®¾è®¡ä¼˜åŒ–

**æ€è·¯ä¸ç®—æ³•**

æˆ‘ä»¬å‘ç°æ–¹æ³•ä¸‰ä¸­è®¡ç®— $b$ çš„è§„åˆ™è¾ƒä¸ºç®€å•ï¼Œè€Œ $a$ çš„è§„åˆ™è¾ƒä¸ºéº»çƒ¦ï¼Œå› æ­¤å¯ä»¥å°†ã€ŒåŒæ—¶è®¡ç®—ã€æ”¹ä¸ºã€Œåˆ†åˆ«è®¡ç®—ã€ï¼Œå³å…ˆè®¡ç®—å‡º $b$ï¼Œå†æ‹¿æ–°çš„ $b$ å€¼è®¡ç®— $a$ã€‚

å¯¹äºåŸå§‹çš„çœŸå€¼è¡¨ï¼š

| $(a_i ~ b_i)$ | $x_i$ | æ–°çš„ $(a_i ~ b_i)$ |
| :-: | :-: | :-: |
| $00$ | $0$ | $00$ |
| $00$ | $1$ | $01$ |
| $01$ | $0$ | $01$ |
| $01$ | $1$ | $10$ |
| $10$ | $0$ | $10$ |
| $10$ | $1$ | $00$ |

æˆ‘ä»¬å°†ç¬¬ä¸€åˆ—çš„ $b_i$ æ›¿æ¢æ–°çš„ $b_i$ å³å¯å¾—åˆ°ï¼š

| $(a_i,$ æ–°çš„ $b_i)$ | $x_i$ | æ–°çš„ $a_i$ |
| :-: | :-: | :-: |
| $00$ | $0$ | $0$ |
| $01$ | $1$ | $0$ |
| $01$ | $0$ | $0$ |
| $00$ | $1$ | $1$ |
| $10$ | $0$ | $1$ |
| $10$ | $1$ | $0$ |

æ ¹æ®çœŸå€¼è¡¨å¯ä»¥è®¾è®¡å‡ºç”µè·¯ï¼š

$$
a_i = a_i'b_i'x_i + a_ib_i'x_i' = b_i'(a_i \oplus x_i)
$$

è¿™æ ·å°±ä¸ $b_i$ çš„ç”µè·¯é€»è¾‘éå¸¸ç±»ä¼¼äº†ã€‚æœ€ç»ˆçš„è½¬æ¢è§„åˆ™å³ä¸ºï¼š

$$
\begin{cases}
\texttt{b = \textasciitilde a \& (b\^ x)} \\
\texttt{a = \textasciitilde b \& (a\^ x)}
\end{cases}
$$

éœ€è¦æ³¨æ„å…ˆè®¡ç®— $b$ï¼Œå†è®¡ç®— $a$ã€‚

**ä»£ç **

```C++ [sol4-C++]
class Solution {
public:
    int singleNumber(vector<int>& nums) {
        int a = 0, b = 0;
        for (int num: nums) {
            b = ~a & (b ^ num);
            a = ~b & (a ^ num);
        }
        return b;
    }
};
```

```Java [sol4-Java]
class Solution {
    public int singleNumber(int[] nums) {
        int a = 0, b = 0;
        for (int num : nums) {
            b = ~a & (b ^ num);
            a = ~b & (a ^ num);
        }
        return b;
    }
}
```

```Python [sol4-Python3]
class Solution:
    def singleNumber(self, nums: List[int]) -> int:
        a = b = 0
        for num in nums:
            b = ~a & (b ^ num)
            a = ~b & (a ^ num)
        return b
```

```JavaScript [sol4-JavaScript]
var singleNumber = function(nums) {
    let a = 0, b = 0;
    for (const num of nums) {
        b = ~a & (b ^ num);
        a = ~b & (a ^ num);
    }
    return b;
};
```

```go [sol4-Golang]
func singleNumber(nums []int) int {
    a, b := 0, 0
    for _, num := range nums {
        b = (b ^ num) &^ a
        a = (a ^ num) &^ b
    }
    return b
}
```

```C [sol1-C]
int singleNumber(int *nums, int numsSize) {
    int a = 0, b = 0;
    for (int i = 0; i < numsSize; i++) {
        b = ~a & (b ^ nums[i]);
        a = ~b & (a ^ nums[i]);
    }
    return b;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚