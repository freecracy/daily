# 2021å¹´04æœˆ02æ—¥ code
<a href="https://toutiao.io/k/9uox6mg">21 å¼ å›¾è¯¦è§£ç½‘ç»œåŸºç¡€çŸ¥è¯†</a><br /><a href="https://toutiao.io/k/romtfff">å›¾æ–‡è¯¦è§£ Java å¯¹è±¡å†…å­˜å¸ƒå±€</a><br /><a href="https://toutiao.io/k/jky5ja4">æ¼«ç”» Go è¯­è¨€ä¸­å‡½æ•° new ä¸ make çš„ä½¿ç”¨å’ŒåŒºåˆ«</a><br /><a href="https://toutiao.io/k/dt8maz4">Java åŸºç¡€ï¼šå‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µå’Œ API åº”ç”¨</a><br /><a href="https://toutiao.io/k/fzt2lff">Tyk API Gateway åå‘ä»£ç†è®¾è®¡</a><br /><a href="https://toutiao.io/k/iorrbp6">æˆ·å£ï¼Ÿå¤§å‚ï¼Ÿé«˜è–ªï¼Ÿç”Ÿæ´»ï¼ŸèŠèŠåº”å±Šç¨‹åºå‘˜çš„èŒä¸šé€‰æ‹©</a><br /><a href="https://toutiao.io/k/o3u2wt9">ç§»åŠ¨å®‰å…¨æ¡†æ¶ï¼šMobSF</a><br /><a href="https://toutiao.io/k/wf4vhf3">Mybatis æºç å…¥é—¨</a><br /><a href="https://toutiao.io/k/ygnbct1">GitHub åŠ é€ŸæŒ‡å—è¿›é˜¶ç‰ˆ</a><br /><a href="https://toutiao.io/k/54gq9yp">[è¯‘] åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨ Kubernetes ä¸Šçš„è¿›åŒ–</a><br /><a href="https://toutiao.io/k/71w69om">å¼€å‘å¯¹æ¥è¿‡ç¨‹ä¸­çš„æ•™è®­</a><br /><a href="https://toutiao.io/k/kj06ppi">å†™ç»™å¼€å‘äººå‘˜çš„å®ç”¨å¯†ç å­¦ï¼šæ•°å­—ç­¾å</a><br /><a href="https://toutiao.io/k/61ppcxj">ä»å®‰å“ WebView æ›´æ–°è¯´èµ·</a><br /><a href="https://toutiao.io/k/r5w1s4o">[è¯‘] æ•°æ®ç§‘å­¦å®¶è¦çŸ¥é“çš„ 3 æ¡æ•°å­¦å®šå¾‹</a><br /><a href="https://toutiao.io/k/vgm6pkz">[è¯‘] ä½¿ç”¨ PDB é¿å… Kubernetes é›†ç¾¤ä¸­æ–­</a><br /><a href="https://toutiao.io/k/ype1puf">åœ¨ Linux ä¸­é™åˆ¶ Python ç¨‹åºæ‰€èƒ½ä½¿ç”¨çš„æœ€å¤§å†…å­˜</a><br /><a href="https://toutiao.io/k/5xgjqr3">Docker å®æˆ˜ï¼šWeb æœåŠ¡å™¨</a><br /><a href="https://toutiao.io/k/xtx4q2b">å·¥å…· | è…¾è®¯å¼€æºçš„ä¸€ä¸ªä¸“æ³¨äºå¼ é‡è®¡ç®—/æ·±åº¦å­¦ä¹ çš„åŸºç¡€åº“</a><br /><a href="https://toutiao.io/k/e513a5p">å»å¹´ï¼Œä¸€é“èš‚èšé‡‘æœç¬”è¯•é¢˜ï¼Œè¿˜è¡Œï¼Œä¸­ç­‰éš¾åº¦</a><br /><a href="https://toutiao.io/k/3b9zx23">ã€Šé©¯é¾™é«˜æ‰‹ã€‹ã€Šå¤§é»„èœ‚ã€‹ï¼šè¿™äº›åŠ¨ç”»äººç‰©å’Œåœºæ™¯èƒŒåçš„å°ç§˜å¯†</a><br /><a href="https://toutiao.io/k/sso4l2l">[æ¨è] æˆ‘åœ¨æ¶æ„è®¾è®¡å’Œä»£ç å¼€å‘ä¸­çš„ä¸€äº›å¸¸ç”¨åŸåˆ™</a><br /><a href="https://toutiao.io/k/nu45i3g">[æ¨è] æ¶æ„å®è·µå…¨æ™¯å›¾</a><br /><a href="https://toutiao.io/k/2qkwu5f">[æ¨è] Spring Boot ä¸­ä¼˜é›…çš„ä½¿ç”¨ Swagger 2ï¼ˆå²ä¸Šæœ€å…¨æ³¨è§£ç¯‡ï¼‰</a><br /><a href="https://toutiao.io/k/47wemjf">[æ¨è] è¶…å®ç”¨çš„ IDEA æ’ä»¶æ¨èï¼ç™¾ä¸‡çº§ä¸‹è½½é‡</a><br /><a href="https://toutiao.io/k/7aczn5o">[æ¨è] é¢è¯•å®˜å¸¸é—®çš„åƒåœ¾å›æ”¶å™¨ï¼Œè¿™æ¬¡å…¨ææ‡‚</a><br /><a href="https://toutiao.io/k/adg4qv6">[æ¨è] Redis åˆ†å¸ƒå¼é”é‡åˆ°çš„åºåˆ—åŒ–é—®é¢˜</a><br /><a href="https://toutiao.io/k/lq6l2fa">[æ¨è] åŠ å¯†æŠ€æœ¯çš„æœªæ¥ï¼šä»æœåŠ¡ç«¯å¯†ç å­˜å‚¨åˆ°ç”¨æˆ·æ•°æ®åŠ å¯†æ–¹æ¡ˆ</a><br /><a href="https://toutiao.io/k/ny7vvdw">[æ¨è] ä¸‡å­—è¯¦è§£æ•´ä¸ªæ•°æ®ä»“åº“å»ºè®¾ä½“ç³»</a><br /><a href="https://toutiao.io/k/le19zdx">[æ¨è] ä¸‡å­—é•¿æ–‡ï¼šå½»åº•ææ‡‚å®¹å™¨é•œåƒæ„å»º</a><br /><a href="https://toutiao.io/k/ukg83qx">[æ¨è] å€¼å¾—æ‹¥æœ‰çš„æ‰‹ç»˜é£æ ¼ç”»å›¾å·¥å…·</a><br /><a href="https://toutiao.io/k/cifpaoe">[æ¨è] å¦‚ä½•åƒé€ä¸€ä¸ª Java é¡¹ç›®ï¼Ÿï¼ˆé™„å­¦ä¹ å®è·µï¼‰</a><br /><a href="https://toutiao.io/k/nvr0l12">[æ¨è] æƒé™ä½“ç³»è®¾è®¡ï¼šç½‘æ˜“æœ‰æ•° BI åŠŸèƒ½å“é‰´</a><br /><a href="https://toutiao.io/k/v9aar7o">[æ¨è] è¿™ 30 ä¸ªæˆ‘ç²¾é€‰çš„å«ç­”æ¡ˆçš„é¢è¯•é¢˜ï¼Œç¡¬ä¸ç¡¬ä½ è¯´å§</a><br /><a href="https://toutiao.io/k/vulmd0h">[æ¨è] æµ…è°ˆåˆ†åº“åˆ†è¡¨é‚£äº›äº‹å„¿</a><br /><a href="https://toutiao.io/k/mvtejua">[æ¨è] ä¹¦å•ï¼šäº’è”ç½‘ä¼ä¸šé¢è¯•æ¡ˆå¤´ä¹¦ä¹‹æ¶æ„å¸ˆç¯‡</a><br /><hr /><a href="https://github.com/johnBuffer/AntSimulator">Simple Ants simulator</a><br /><a href="https://github.com/catchorg/Catch2">A modern, C++-native, header-only, test framework for unit-tests, TDD and BDD - using C++11, C++14, C++17 and later (or C++03 on the Catch1.x branch)</a><br /><a href="https://github.com/tonarino/innernet">A private network system that uses WireGuard under the hood.</a><br /><a href="https://github.com/mrcodedev/frontend-developer-resources">Recursos gratuitos para empezar a ser un Frontend Developer o ampliar conocimientos</a><br /><a href="https://github.com/Lifka/hacking-resources">Hacking resources and cheat sheets. References, tools, scripts, tutorials, and other resources that help offensive and defensive security professionals.</a><br /><a href="https://github.com/facebookresearch/madgrad">MADGRAD Optimization Method</a><br /><a href="https://github.com/gto76/python-cheatsheet">Comprehensive Python Cheatsheet</a><br /><a href="https://github.com/login?return_to=%2Ftrungk18%2Fangular-spotify">Spotify client built with Angular 11, Nx Workspace, ngrx, TailwindCSS and ng-zorro</a><br /><a href="https://github.com/NAalytics/Assemblies-of-putative-SARS-CoV2-spike-encoding-mRNA-sequences-for-vaccines-BNT-162b2-and-mRNA-1273">RNA vaccines have become a key tool in moving forward through the challenges raised both in the current pandemic and in numerous other public health and medical challenges. With the rollout of vaccines for COVID-19, these synthetic mRNAs have become broadly distributed RNA species in numerous human populations. Despite their ubiquity, sequences â€¦</a><br /><a href="https://github.com/login?return_to=%2Fnuxt%2Fnuxt.js">The Intuitive Vue Framework</a><br /><a href="https://github.com/Datalux/Osintgram">Osintgram is a OSINT tool on Instagram. It offers an interactive shell to perform analysis on Instagram account of any users by its nickname</a><br /><a href="https://github.com/olmps/memo">Memo is an Anki mobile app written in Flutter</a><br /><a href="https://github.com/dromara/sa-token">è¿™å¯èƒ½æ˜¯å²ä¸ŠåŠŸèƒ½æœ€å…¨çš„Javaæƒé™è®¤è¯æ¡†æ¶ï¼ç›®å‰å·²é›†æˆâ€”â€”ç™»å½•éªŒè¯ã€æƒé™éªŒè¯ã€Sessionä¼šè¯ã€è¸¢äººä¸‹çº¿ã€åˆ†å¸ƒå¼ä¼šè¯ã€å•ç‚¹ç™»å½•ã€OAuth2.0ã€è®°ä½æˆ‘æ¨¡å¼ã€æ¨¡æ‹Ÿä»–äººè´¦å·ã€ä¸´æ—¶èº«ä»½åˆ‡æ¢ã€é›†æˆRedisã€å¤šè´¦å·è®¤è¯ä½“ç³»ã€å‰åå°åˆ†ç¦»æ¨¡å¼ã€æ³¨è§£å¼é‰´æƒã€è·¯ç”±æ‹¦æˆªå¼é‰´æƒã€èŠ±å¼tokenç”Ÿæˆã€è‡ªåŠ¨ç»­ç­¾ã€åŒç«¯äº’æ–¥ç™»å½•ã€ä¼šè¯æ²»ç†ã€å¯†ç åŠ å¯†ã€jwté›†æˆã€Springé›†æˆ...</a><br /><a href="https://github.com/symfony/symfony">The Symfony PHP framework</a><br /><a href="https://github.com/merry75/educative.io_courses">this is downloadings of all educative.io free student subscription courses as pdf from GitHub student pack</a><br /><a href="https://github.com/siduck76/neovim-dots">beautiful neovim setup</a><br /><a href="https://github.com/btcpayserver/btcpayserver">Accept Bitcoin payments. Free, open-source & self-hosted, Bitcoin payment processor.</a><br /><a href="https://github.com/login?return_to=%2FEbookFoundation%2Ffree-programming-books">ğŸ“š Freely available programming books</a><br /><a href="https://github.com/Asabeneh/30-Days-Of-React">30 Days of React challenge is a step by step guide to learn React in 30 days. It requires HTML, CSS, and JavaScript knowledge. You should be comfortable with JavaScript before you start to React. If you are not comfortable with JavaScript check out 30DaysOfJavaScript. This is a continuation of 30 Days Of JS. This challenge may take up to 100 dayâ€¦</a><br /><a href="https://github.com/uutils/coreutils">Cross-platform Rust rewrite of the GNU coreutils</a><br /><a href="https://github.com/mytechnotalent/Reverse-Engineering">A FREE comprehensive reverse engineering course covering x86, x64, 32-bit ARM & 64-bit ARM architectures.</a><br /><a href="https://github.com/login?return_to=%2Fmrdoob%2Fthree.js">JavaScript 3D library.</a><br /><a href="https://github.com/goldbergyoni/nodebestpractices">âœ… The Node.js best practices list (March 2021)</a><br /><a href="https://github.com/ansible/ansible">Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy and maintain. Automate everything from code deployment to network configuration to cloud management, in a language that approaches plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.</a><br /><a href="https://github.com/protocolbuffers/protobuf">Protocol Buffers - Google's data interchange format</a><br /><hr />ç›´æ–¹å›¾çš„æ°´é‡<br /><p>ç»™å®šä¸€ä¸ªç›´æ–¹å›¾(ä¹Ÿç§°æŸ±çŠ¶å›¾)ï¼Œå‡è®¾æœ‰äººä»ä¸Šé¢æºæºä¸æ–­åœ°å€’æ°´ï¼Œæœ€åç›´æ–¹å›¾èƒ½å­˜å¤šå°‘æ°´é‡?ç›´æ–¹å›¾çš„å®½åº¦ä¸º 1ã€‚</p>

<p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/10/22/rainwatertrap.png" style="height: 161px; width: 412px;"></p>

<p><small>ä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„ç›´æ–¹å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºæ°´ï¼‰ã€‚&nbsp;<strong>æ„Ÿè°¢ Marcos</strong> è´¡çŒ®æ­¤å›¾ã€‚</small></p>

<p><strong>ç¤ºä¾‹:</strong></p>

<pre><strong>è¾“å…¥:</strong> [0,1,0,2,1,0,1,3,2,1,2,1]
<strong>è¾“å‡º:</strong> 6</pre>
<br />#### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’

å¯¹äºä¸‹æ ‡ $i$ï¼Œæ°´èƒ½åˆ°è¾¾çš„æœ€å¤§é«˜åº¦ç­‰äºä¸‹æ ‡ $i$ ä¸¤è¾¹çš„æœ€å¤§é«˜åº¦çš„æœ€å°å€¼ï¼Œä¸‹æ ‡ $i$ å¤„èƒ½æ¥çš„æ°´çš„é‡ç­‰äºä¸‹æ ‡ $i$ å¤„çš„æ°´èƒ½åˆ°è¾¾çš„æœ€å¤§é«˜åº¦å‡å» $\textit{height}[i]$ã€‚

æœ´ç´ çš„åšæ³•æ˜¯å¯¹äºæ•°ç»„ $\textit{height}$ ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œåˆ†åˆ«å‘å·¦å’Œå‘å³æ‰«æå¹¶è®°å½•å·¦è¾¹å’Œå³è¾¹çš„æœ€å¤§é«˜åº¦ï¼Œç„¶åè®¡ç®—æ¯ä¸ªä¸‹æ ‡ä½ç½®èƒ½æ¥çš„æ°´çš„é‡ã€‚å‡è®¾æ•°ç»„ $\textit{height}$ çš„é•¿åº¦ä¸º $n$ï¼Œè¯¥åšæ³•éœ€è¦å¯¹æ¯ä¸ªä¸‹æ ‡ä½ç½®ä½¿ç”¨ $O(n)$ çš„æ—¶é—´å‘ä¸¤è¾¹æ‰«æå¹¶å¾—åˆ°æœ€å¤§é«˜åº¦ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$ã€‚

ä¸Šè¿°åšæ³•çš„æ—¶é—´å¤æ‚åº¦è¾ƒé«˜æ˜¯å› ä¸ºéœ€è¦å¯¹æ¯ä¸ªä¸‹æ ‡ä½ç½®éƒ½å‘ä¸¤è¾¹æ‰«æã€‚å¦‚æœå·²ç»çŸ¥é“æ¯ä¸ªä½ç½®ä¸¤è¾¹çš„æœ€å¤§é«˜åº¦ï¼Œåˆ™å¯ä»¥åœ¨ $O(n)$ çš„æ—¶é—´å†…å¾—åˆ°èƒ½æ¥çš„æ°´çš„æ€»é‡ã€‚ä½¿ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ $O(n)$ çš„æ—¶é—´å†…é¢„å¤„ç†å¾—åˆ°æ¯ä¸ªä½ç½®ä¸¤è¾¹çš„æœ€å¤§é«˜åº¦ã€‚

åˆ›å»ºä¸¤ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°ç»„ $\textit{leftMax}$ å’Œ $\textit{rightMax}$ã€‚å¯¹äº $0 \le i<n$ï¼Œ$\textit{leftMax}[i]$ è¡¨ç¤ºä¸‹æ ‡ $i$ åŠå…¶å·¦è¾¹çš„ä½ç½®ä¸­ï¼Œ$\textit{height}$ çš„æœ€å¤§é«˜åº¦ï¼Œ$\textit{rightMax}[i]$ è¡¨ç¤ºä¸‹æ ‡ $i$ åŠå…¶å³è¾¹çš„ä½ç½®ä¸­ï¼Œ$\textit{height}$ çš„æœ€å¤§é«˜åº¦ã€‚

æ˜¾ç„¶ï¼Œ$\textit{leftMax}[0]=\textit{height}[0]$ï¼Œ$\textit{rightMax}[n-1]=\textit{height}[n-1]$ã€‚ä¸¤ä¸ªæ•°ç»„çš„å…¶ä½™å…ƒç´ çš„è®¡ç®—å¦‚ä¸‹ï¼š

- å½“ $1 \le i \le n-1$ æ—¶ï¼Œ$\textit{leftMax}[i]=\max(\textit{leftMax}[i-1], \textit{height}[i])$ï¼›

- å½“ $0 \le i \le n-2$ æ—¶ï¼Œ$\textit{rightMax}[i]=\max(\textit{rightMax}[i+1], \textit{height}[i])$ã€‚

å› æ­¤å¯ä»¥æ­£å‘éå†æ•°ç»„ $\textit{height}$ å¾—åˆ°æ•°ç»„ $\textit{leftMax}$ çš„æ¯ä¸ªå…ƒç´ å€¼ï¼Œåå‘éå†æ•°ç»„ $\textit{height}$ å¾—åˆ°æ•°ç»„ $\textit{rightMax}$ çš„æ¯ä¸ªå…ƒç´ å€¼ã€‚

åœ¨å¾—åˆ°æ•°ç»„ $\textit{leftMax}$ å’Œ $\textit{rightMax}$ çš„æ¯ä¸ªå…ƒç´ å€¼ä¹‹åï¼Œå¯¹äº $0 \le i<n$ï¼Œä¸‹æ ‡ $i$ å¤„èƒ½æ¥çš„æ°´çš„é‡ç­‰äº $\min(\textit{leftMax}[i],\textit{rightMax}[i])-\textit{height}[i]$ã€‚éå†æ¯ä¸ªä¸‹æ ‡ä½ç½®å³å¯å¾—åˆ°èƒ½æ¥çš„æ°´çš„æ€»é‡ã€‚

åŠ¨æ€è§„åˆ’åšæ³•å¯ä»¥ç”±ä¸‹å›¾ä½“ç°ã€‚

![fig1](https://assets.leetcode-cn.com/solution-static/jindian_17.21/1.png)

```Java [sol1-Java]
class Solution {
    public int trap(int[] height) {
        int n = height.length;
        if (n == 0) {
            return 0;
        }

        int[] leftMax = new int[n];
        leftMax[0] = height[0];
        for (int i = 1; i < n; ++i) {
            leftMax[i] = Math.max(leftMax[i - 1], height[i]);
        }

        int[] rightMax = new int[n];
        rightMax[n - 1] = height[n - 1];
        for (int i = n - 2; i >= 0; --i) {
            rightMax[i] = Math.max(rightMax[i + 1], height[i]);
        }

        int ans = 0;
        for (int i = 0; i < n; ++i) {
            ans += Math.min(leftMax[i], rightMax[i]) - height[i];
        }
        return ans;
    }
}
```

```go [sol1-Golang]
func trap(height []int) (ans int) {
    n := len(height)
    if n == 0 {
        return
    }

    leftMax := make([]int, n)
    leftMax[0] = height[0]
    for i := 1; i < n; i++ {
        leftMax[i] = max(leftMax[i-1], height[i])
    }

    rightMax := make([]int, n)
    rightMax[n-1] = height[n-1]
    for i := n - 2; i >= 0; i-- {
        rightMax[i] = max(rightMax[i+1], height[i])
    }

    for i, h := range height {
        ans += min(leftMax[i], rightMax[i]) - h
    }
    return
}

func min(a, b int) int {
    if a < b {
        return a
    }
    return b
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

```JavaScript [sol1-JavaScript]
var trap = function(height) {
    const n = height.length;
    if (n == 0) {
        return 0;
    }

    const leftMax = new Array(n).fill(0);
    leftMax[0] = height[0];
    for (let i = 1; i < n; ++i) {
        leftMax[i] = Math.max(leftMax[i - 1], height[i]);
    }

    const rightMax = new Array(n).fill(0);
    rightMax[n - 1] = height[n - 1];
    for (let i = n - 2; i >= 0; --i) {
        rightMax[i] = Math.max(rightMax[i + 1], height[i]);
    }

    let ans = 0;
    for (let i = 0; i < n; ++i) {
        ans += Math.min(leftMax[i], rightMax[i]) - height[i];
    }
    return ans;
};
```

```Python [sol1-Python3]
class Solution:
    def trap(self, height: List[int]) -> int:
        if not height:
            return 0
        
        n = len(height)
        leftMax = [height[0]] + [0] * (n - 1)
        for i in range(1, n):
            leftMax[i] = max(leftMax[i - 1], height[i])

        rightMax = [0] * (n - 1) + [height[n - 1]]
        for i in range(n - 2, -1, -1):
            rightMax[i] = max(rightMax[i + 1], height[i])

        ans = sum(min(leftMax[i], rightMax[i]) - height[i] for i in range(n))
        return ans
```

```C++ [sol1-C++]
class Solution {
public:
    int trap(vector<int>& height) {
        int n = height.size();
        if (n == 0) {
            return 0;
        }
        vector<int> leftMax(n);
        leftMax[0] = height[0];
        for (int i = 1; i < n; ++i) {
            leftMax[i] = max(leftMax[i - 1], height[i]);
        }

        vector<int> rightMax(n);
        rightMax[n - 1] = height[n - 1];
        for (int i = n - 2; i >= 0; --i) {
            rightMax[i] = max(rightMax[i + 1], height[i]);
        }

        int ans = 0;
        for (int i = 0; i < n; ++i) {
            ans += min(leftMax[i], rightMax[i]) - height[i];
        }
        return ans;
    }
};
```

```C [sol1-C]
int trap(int* height, int heightSize) {
    int n = heightSize;
    if (n == 0) {
        return 0;
    }
    int leftMax[n];
    memset(leftMax, 0, sizeof(leftMax));
    leftMax[0] = height[0];
    for (int i = 1; i < n; ++i) {
        leftMax[i] = fmax(leftMax[i - 1], height[i]);
    }

    int rightMax[n];
    memset(rightMax, 0, sizeof(rightMax));
    rightMax[n - 1] = height[n - 1];
    for (int i = n - 2; i >= 0; --i) {
        rightMax[i] = fmax(rightMax[i + 1], height[i]);
    }

    int ans = 0;
    for (int i = 0; i < n; ++i) {
        ans += fmin(leftMax[i], rightMax[i]) - height[i];
    }
    return ans;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\textit{height}$ çš„é•¿åº¦ã€‚è®¡ç®—æ•°ç»„ $\textit{leftMax}$ å’Œ $\textit{rightMax}$ çš„å…ƒç´ å€¼å„éœ€è¦éå†æ•°ç»„ $\textit{height}$ ä¸€æ¬¡ï¼Œè®¡ç®—èƒ½æ¥çš„æ°´çš„æ€»é‡è¿˜éœ€è¦éå†ä¸€æ¬¡ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\textit{height}$ çš„é•¿åº¦ã€‚éœ€è¦åˆ›å»ºä¸¤ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°ç»„ $\textit{leftMax}$ å’Œ $\textit{rightMax}$ã€‚

#### æ–¹æ³•äºŒï¼šå•è°ƒæ ˆ

é™¤äº†è®¡ç®—å¹¶å­˜å‚¨æ¯ä¸ªä½ç½®ä¸¤è¾¹çš„æœ€å¤§é«˜åº¦ä»¥å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨å•è°ƒæ ˆè®¡ç®—èƒ½æ¥çš„æ°´çš„æ€»é‡ã€‚

ç»´æŠ¤ä¸€ä¸ªå•è°ƒæ ˆï¼Œå•è°ƒæ ˆå­˜å‚¨çš„æ˜¯ä¸‹æ ‡ï¼Œæ»¡è¶³ä»æ ˆåº•åˆ°æ ˆé¡¶çš„ä¸‹æ ‡å¯¹åº”çš„æ•°ç»„ $\textit{height}$ ä¸­çš„å…ƒç´ é€’å‡ã€‚

ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œéå†åˆ°ä¸‹æ ‡ $i$ æ—¶ï¼Œå¦‚æœæ ˆå†…è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œè®°æ ˆé¡¶å…ƒç´ ä¸º $\textit{top}$ï¼Œ$\textit{top}$ çš„ä¸‹é¢ä¸€ä¸ªå…ƒç´ æ˜¯ $\textit{left}$ï¼Œåˆ™ä¸€å®šæœ‰ $\textit{height}[\textit{left}] \ge \textit{height}[\textit{top}]$ã€‚å¦‚æœ $\textit{height}[i]>\textit{height}[\textit{top}]$ï¼Œåˆ™å¾—åˆ°ä¸€ä¸ªå¯ä»¥æ¥é›¨æ°´çš„åŒºåŸŸï¼Œè¯¥åŒºåŸŸçš„å®½åº¦æ˜¯ $i-\textit{left}-1$ï¼Œé«˜åº¦æ˜¯ $\min(\textit{height}[\textit{left}],\textit{height}[i])-\textit{height}[\textit{top}]$ï¼Œæ ¹æ®å®½åº¦å’Œé«˜åº¦å³å¯è®¡ç®—å¾—åˆ°è¯¥åŒºåŸŸèƒ½æ¥çš„æ°´çš„é‡ã€‚

ä¸ºäº†å¾—åˆ° $\textit{left}$ï¼Œéœ€è¦å°† $\textit{top}$ å‡ºæ ˆã€‚åœ¨å¯¹ $\textit{top}$ è®¡ç®—èƒ½æ¥çš„æ°´çš„é‡ä¹‹åï¼Œ$\textit{left}$ å˜æˆæ–°çš„ $\textit{top}$ï¼Œé‡å¤ä¸Šè¿°æ“ä½œï¼Œç›´åˆ°æ ˆå˜ä¸ºç©ºï¼Œæˆ–è€…æ ˆé¡¶ä¸‹æ ‡å¯¹åº”çš„ $\textit{height}$ ä¸­çš„å…ƒç´ å¤§äºæˆ–ç­‰äº $\textit{height}[i]$ã€‚

åœ¨å¯¹ä¸‹æ ‡ $i$ å¤„è®¡ç®—èƒ½æ¥çš„æ°´çš„é‡ä¹‹åï¼Œå°† $i$ å…¥æ ˆï¼Œç»§ç»­éå†åé¢çš„ä¸‹æ ‡ï¼Œè®¡ç®—èƒ½æ¥çš„æ°´çš„é‡ã€‚éå†ç»“æŸä¹‹åå³å¯å¾—åˆ°èƒ½æ¥çš„æ°´çš„æ€»é‡ã€‚

ä¸‹é¢ç”¨ä¸€ä¸ªä¾‹å­ $\textit{height}=[0,1,0,2,1,0,1,3,2,1,2,1]$ æ¥å¸®åŠ©è¯»è€…ç†è§£å•è°ƒæ ˆçš„åšæ³•ã€‚

<![f1](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f1.png),![f2](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f2.png),![f3](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f3.png),![f4](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f4.png),![f5](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f5.png),![f6](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f6.png),![f7](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f7.png),![f8](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f8.png),![f9](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f9.png),![f10](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f10.png),![f11](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f11.png),![f12](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f12.png),![f13](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f13.png),![f14](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f14.png),![f15](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f15.png),![f16](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f16.png),![f17](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f17.png),![f18](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f18.png),![f19](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f19.png),![f20](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f20.png),![f21](https://assets.leetcode-cn.com/solution-static/jindian_17.21/f21.png)>

```Java [sol2-Java]
class Solution {
    public int trap(int[] height) {
        int ans = 0;
        Deque<Integer> stack = new LinkedList<Integer>();
        int n = height.length;
        for (int i = 0; i < n; ++i) {
            while (!stack.isEmpty() && height[i] > height[stack.peek()]) {
                int top = stack.pop();
                if (stack.isEmpty()) {
                    break;
                }
                int left = stack.peek();
                int currWidth = i - left - 1;
                int currHeight = Math.min(height[left], height[i]) - height[top];
                ans += currWidth * currHeight;
            }
            stack.push(i);
        }
        return ans;
    }
}
```

```go [sol2-Golang]
func trap(height []int) (ans int) {
    stack := []int{}
    for i, h := range height {
        for len(stack) > 0 && h > height[stack[len(stack)-1]] {
            top := stack[len(stack)-1]
            stack = stack[:len(stack)-1]
            if len(stack) == 0 {
                break
            }
            left := stack[len(stack)-1]
            curWidth := i - left - 1
            curHeight := min(height[left], h) - height[top]
            ans += curWidth * curHeight
        }
        stack = append(stack, i)
    }
    return
}

func min(a, b int) int {
    if a < b {
        return a
    }
    return b
}
```

```JavaScript [sol2-JavaScript]
var trap = function(height) {
    let ans = 0;
    const stack = [];
    const n = height.length;
    for (let i = 0; i < n; ++i) {
        while (stack.length && height[i] > height[stack[stack.length - 1]]) {
            const top = stack.pop();
            if (!stack.length) {
                break;
            }
            const left = stack[stack.length - 1];
            const currWidth = i - left - 1;
            const currHeight = Math.min(height[left], height[i]) - height[top];
            ans += currWidth * currHeight;
        }
        stack.push(i);
    }
    return ans;
};
```

```Python [sol2-Python3]
class Solution:
    def trap(self, height: List[int]) -> int:
        ans = 0
        stack = list()
        n = len(height)
        
        for i, h in enumerate(height):
            while stack and h > height[stack[-1]]:
                top = stack.pop()
                if not stack:
                    break
                left = stack[-1]
                currWidth = i - left - 1
                currHeight = min(height[left], height[i]) - height[top]
                ans += currWidth * currHeight
            stack.append(i)
        
        return ans
```

```C++ [sol2-C++]
class Solution {
public:
    int trap(vector<int>& height) {
        int ans = 0;
        stack<int> stk;
        int n = height.size();
        for (int i = 0; i < n; ++i) {
            while (!stk.empty() && height[i] > height[stk.top()]) {
                int top = stk.top();
                stk.pop();
                if (stk.empty()) {
                    break;
                }
                int left = stk.top();
                int currWidth = i - left - 1;
                int currHeight = min(height[left], height[i]) - height[top];
                ans += currWidth * currHeight;
            }
            stk.push(i);
        }
        return ans;
    }
};
```

```C [sol2-C]
int trap(int* height, int heightSize) {
    int n = heightSize;
    if (n == 0) {
        return 0;
    }
    int ans = 0;
    int stk[n], top = 0;
    for (int i = 0; i < n; ++i) {
        while (top && height[i] > height[stk[top - 1]]) {
            int stk_top = stk[--top];
            if (!top) {
                break;
            }
            int left = stk[top - 1];
            int currWidth = i - left - 1;
            int currHeight = fmin(height[left], height[i]) - height[stk_top];
            ans += currWidth * currHeight;
        }
        stk[top++] = i;
    }
    return ans;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\textit{height}$ çš„é•¿åº¦ã€‚ä» $0$ åˆ° $n-1$ çš„æ¯ä¸ªä¸‹æ ‡æœ€å¤šåªä¼šå…¥æ ˆå’Œå‡ºæ ˆå„ä¸€æ¬¡ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\textit{height}$ çš„é•¿åº¦ã€‚ç©ºé—´å¤æ‚åº¦ä¸»è¦å–å†³äºæ ˆç©ºé—´ï¼Œæ ˆçš„å¤§å°ä¸ä¼šè¶…è¿‡ $n$ã€‚

#### æ–¹æ³•ä¸‰ï¼šåŒæŒ‡é’ˆ

åŠ¨æ€è§„åˆ’çš„åšæ³•ä¸­ï¼Œéœ€è¦ç»´æŠ¤ä¸¤ä¸ªæ•°ç»„ $\textit{leftMax}$ å’Œ $\textit{rightMax}$ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n)$ã€‚æ˜¯å¦å¯ä»¥å°†ç©ºé—´å¤æ‚åº¦é™åˆ° $O(1)$ï¼Ÿ

æ³¨æ„åˆ°ä¸‹æ ‡ $i$ å¤„èƒ½æ¥çš„æ°´çš„é‡ç”± $\textit{leftMax}[i]$ å’Œ $\textit{rightMax}[i]$ ä¸­çš„æœ€å°å€¼å†³å®šã€‚ç”±äºæ•°ç»„ $\textit{leftMax}$ æ˜¯ä»å·¦å¾€å³è®¡ç®—ï¼Œæ•°ç»„ $\textit{rightMax}$ æ˜¯ä»å³å¾€å·¦è®¡ç®—ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆå’Œä¸¤ä¸ªå˜é‡ä»£æ›¿ä¸¤ä¸ªæ•°ç»„ã€‚

ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆ $\textit{left}$ å’Œ $\textit{right}$ï¼Œä»¥åŠä¸¤ä¸ªå˜é‡ $\textit{leftMax}$ å’Œ $\textit{rightMax}$ï¼Œåˆå§‹æ—¶ $\textit{left}=0,\textit{right}=n-1,\textit{leftMax}=0,\textit{rightMax}=0$ã€‚æŒ‡é’ˆ $\textit{left}$ åªä¼šå‘å³ç§»åŠ¨ï¼ŒæŒ‡é’ˆ $\textit{right}$ åªä¼šå‘å·¦ç§»åŠ¨ï¼Œåœ¨ç§»åŠ¨æŒ‡é’ˆçš„è¿‡ç¨‹ä¸­ç»´æŠ¤ä¸¤ä¸ªå˜é‡ $\textit{leftMax}$ å’Œ $\textit{rightMax}$ çš„å€¼ã€‚

å½“ä¸¤ä¸ªæŒ‡é’ˆæ²¡æœ‰ç›¸é‡æ—¶ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š

- ä½¿ç”¨ $\textit{height}[\textit{left}]$ å’Œ $\textit{height}[\textit{right}]$ çš„å€¼æ›´æ–° $\textit{leftMax}$ å’Œ $\textit{rightMax}$ çš„å€¼ï¼›

- å¦‚æœ $\textit{height}[\textit{left}]<\textit{height}[\textit{right}]$ï¼Œåˆ™å¿…æœ‰ $\textit{leftMax}<\textit{rightMax}$ï¼Œä¸‹æ ‡ $\textit{left}$ å¤„èƒ½æ¥çš„æ°´çš„é‡ç­‰äº $\textit{leftMax}-\textit{height}[\textit{left}]$ï¼Œå°†ä¸‹æ ‡ $\textit{left}$ å¤„èƒ½æ¥çš„æ°´çš„é‡åŠ åˆ°èƒ½æ¥çš„æ°´çš„æ€»é‡ï¼Œç„¶åå°† $\textit{left}$ åŠ  $1$ï¼ˆå³å‘å³ç§»åŠ¨ä¸€ä½ï¼‰ï¼›

- å¦‚æœ $\textit{height}[\textit{left}] \ge \textit{height}[\textit{right}]$ï¼Œåˆ™å¿…æœ‰ $\textit{leftMax} \ge \textit{rightMax}$ï¼Œä¸‹æ ‡ $\textit{right}$ å¤„èƒ½æ¥çš„æ°´çš„é‡ç­‰äº $\textit{rightMax}-\textit{height}[\textit{right}]$ï¼Œå°†ä¸‹æ ‡ $\textit{right}$ å¤„èƒ½æ¥çš„æ°´çš„é‡åŠ åˆ°èƒ½æ¥çš„æ°´çš„æ€»é‡ï¼Œç„¶åå°† $\textit{right}$ å‡ $1$ï¼ˆå³å‘å·¦ç§»åŠ¨ä¸€ä½ï¼‰ã€‚

å½“ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡æ—¶ï¼Œå³å¯å¾—åˆ°èƒ½æ¥çš„æ°´çš„æ€»é‡ã€‚

ä¸‹é¢ç”¨ä¸€ä¸ªä¾‹å­ $\textit{height}=[0,1,0,2,1,0,1,3,2,1,2,1]$ æ¥å¸®åŠ©è¯»è€…ç†è§£åŒæŒ‡é’ˆçš„åšæ³•ã€‚

<![p1](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p1.png),![p2](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p2.png),![p3](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p3.png),![p4](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p4.png),![p5](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p5.png),![p6](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p6.png),![p7](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p7.png),![p8](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p8.png),![p9](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p9.png),![p10](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p10.png),![p11](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p11.png),![p12](https://assets.leetcode-cn.com/solution-static/jindian_17.21/p12.png)>

```Java [sol3-Java]
class Solution {
    public int trap(int[] height) {
        int ans = 0;
        int left = 0, right = height.length - 1;
        int leftMax = 0, rightMax = 0;
        while (left < right) {
            leftMax = Math.max(leftMax, height[left]);
            rightMax = Math.max(rightMax, height[right]);
            if (height[left] < height[right]) {
                ans += leftMax - height[left];
                ++left;
            } else {
                ans += rightMax - height[right];
                --right;
            }
        }
        return ans;
    }
}
```

```go [sol3-Golang]
func trap(height []int) (ans int) {
    left, right := 0, len(height)-1
    leftMax, rightMax := 0, 0
    for left < right {
        leftMax = max(leftMax, height[left])
        rightMax = max(rightMax, height[right])
        if height[left] < height[right] {
            ans += leftMax - height[left]
            left++
        } else {
            ans += rightMax - height[right]
            right--
        }
    }
    return
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

```JavaScript [sol3-JavaScript]
var trap = function(height) {
    let ans = 0;
    let left = 0, right = height.length - 1;
    let leftMax = 0, rightMax = 0;
    while (left < right) {
        leftMax = Math.max(leftMax, height[left]);
        rightMax = Math.max(rightMax, height[right]);
        if (height[left] < height[right]) {
            ans += leftMax - height[left];
            ++left;
        } else {
            ans += rightMax - height[right];
            --right;
        }
    }
    return ans;
};
```

```Python [sol3-Python3]
class Solution:
    def trap(self, height: List[int]) -> int:
        ans = 0
        left, right = 0, len(height) - 1
        leftMax = rightMax = 0

        while left < right:
            leftMax = max(leftMax, height[left])
            rightMax = max(rightMax, height[right])
            if height[left] < height[right]:
                ans += leftMax - height[left]
                left += 1
            else:
                ans += rightMax - height[right]
                right -= 1
        
        return ans
```

```C++ [sol3-C++]
class Solution {
public:
    int trap(vector<int>& height) {
        int ans = 0;
        int left = 0, right = height.size() - 1;
        int leftMax = 0, rightMax = 0;
        while (left < right) {
            leftMax = max(leftMax, height[left]);
            rightMax = max(rightMax, height[right]);
            if (height[left] < height[right]) {
                ans += leftMax - height[left];
                ++left;
            } else {
                ans += rightMax - height[right];
                --right;
            }
        }
        return ans;
    }
};
```

```C [sol3-C]
int trap(int* height, int heightSize) {
    int ans = 0;
    int left = 0, right = heightSize - 1;
    int leftMax = 0, rightMax = 0;
    while (left < right) {
        leftMax = fmax(leftMax, height[left]);
        rightMax = fmax(rightMax, height[right]);
        if (height[left] < height[right]) {
            ans += leftMax - height[left];
            ++left;
        } else {
            ans += rightMax - height[right];
            --right;
        }
    }
    return ans;
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\textit{height}$ çš„é•¿åº¦ã€‚ä¸¤ä¸ªæŒ‡é’ˆçš„ç§»åŠ¨æ€»æ¬¡æ•°ä¸è¶…è¿‡ $n$ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚åªéœ€è¦ä½¿ç”¨å¸¸æ•°çš„é¢å¤–ç©ºé—´ã€‚